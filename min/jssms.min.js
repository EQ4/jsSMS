/*
jsSMS - A Sega Master System/GameGear emulator in JavaScript
Copyright (C) 2012 Guillaume Marty (https://github.com/gmarty)
Based on JavaGear Copyright (c) 2002-2008 Chris White

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
(function(){'use strict';var aa=void 0,j=!0,ba=null,l=!1;function ca(){return function(){}}var da=!(!window.DataView||!window.ArrayBuffer);function ea(c){this.vb={ui:fa,swfPath:"lib/"};if(c!=aa)for(var g in this.vb)c[g]!=aa&&(this.vb[g]=c[g]);this.U=new ga(this);this.O=new c.ui(this);this.C=new ha(this);this.ya=new ja(this);this.ports=new ma(this);this.K=new na(this);this.O.updateStatus("Ready to load a ROM.")}
ea.prototype={va:l,pb:0,W:0,tb:0,Da:0,Fa:0,Ja:l,ca:j,T:l,La:j,Ba:[],Ca:0,Ka:0,za:[],rb:0,qb:0,Ea:0,Eb:0,gb:"",hb:"",reset:function(){var c=this.C.jb,g=0;0==c||this.T?(this.Da=60,this.W=262,g=3579545):1==c&&(this.Da=50,this.W=313,g=3546893);this.pb=Math.round(g/this.Da/this.W+1);this.C.jb=c;if(this.La){c=this.ya;c.ob=(g<<8)/16/44100;c.P=0;c.I=0;c.oa=16;c.X=32768;for(g=0;4>g;g++)c.H[g<<1]=1,c.H[(g<<1)+1]=15,c.F[g]=0,c.M[g]=1,3!=g&&(c.ia[g]=oa);this.Ka=Math.round(44100/this.Da);if(0==this.Ba.length||
this.Ba.length!=this.Ka)this.Ba=Array(this.Ka);if(0==this.za.length||this.za.length!=this.W){this.za=Array(this.W);for(var a=0,g=0;g<this.W;g++)c=(this.Ka<<16)/this.W+a,a=c-(c>>16<<16),this.za[g]=c>>16}}this.Eb=0;this.Fa=this.tb;this.U.reset();this.O.reset();this.C.reset();this.ports.reset();this.K.reset();ya(this.K,ba)},start:function(){var c=this;this.va||(this.va=j);this.O.requestAnimationFrame(this.frame.bind(this),this.O.screen);this.bb=ba;this.Ea=0;za(this);this.Db=setInterval(function(){za(c)},
500)},stop:function(){clearInterval(this.Db);this.va=l},frame:function(){if(this.va){var c;for(var g=0;g<this.W;g++){var a=this.K,h=this.pb,k=0,q=0,m=0;a.n+=h;0!=h&&(a.zb=h);if(a.ba){var r=a;r.Q&&(r.ka&&(r.b++,r.ka=l),r.Q=r.R=l,r.ba=l,n(r,r.b),0==r.sa?(r.b=0==r.ta||255==r.ta?56:r.ta,r.n-=13):1==r.sa?(r.b=56,r.n-=13):(r.b=r.t((r.Ha<<8)+r.ta),r.n-=19))}for(;0<a.n;)switch(q=a.d(a.b++),a.n-=Aa[q],q){case 1:a.e=a.d(a.b++);a.f=a.d(a.b++);break;case 2:a.k(s(a),a.c);break;case 3:var z=a;z.e=z.e+1&255;0==
z.e&&(z.f=z.f+1&255);break;case 4:a.f=t(a,a.f);break;case 5:a.f=u(a,a.f);break;case 6:a.f=a.d(a.b++);break;case 7:var S=a,Ha=S.c>>7;S.c=S.c<<1&255|Ha;S.a=S.a&236|Ha;break;case 8:var ka=a,kb=ka.c;ka.c=ka.Ra;ka.Ra=kb;kb=ka.a;ka.a=ka.Ya;ka.Ya=kb;break;case 9:Ea(a,v(a,A(a),s(a)));break;case 10:a.c=a.d(s(a));break;case 11:C(a);break;case 12:a.e=t(a,a.e);break;case 13:a.e=u(a,a.e);break;case 14:a.e=a.d(a.b++);break;case 15:var Wa=a,Qb=Wa.c&1;Wa.c=Wa.c>>1|Qb<<7;Wa.a=Wa.a&236|Qb;break;case 16:a.f=a.f-1&255;
Fa(a,0!=a.f);break;case 17:a.h=a.d(a.b++);a.i=a.d(a.b++);break;case 18:a.k(D(a),a.c);break;case 19:Ga(a);break;case 20:a.i=t(a,a.i);break;case 21:a.i=u(a,a.i);break;case 22:a.i=a.d(a.b++);break;case 23:var Ia=a,Ac=Ia.c>>7;Ia.c=(Ia.c<<1|Ia.a&1)&255;Ia.a=Ia.a&236|Ac;break;case 24:a.b+=E(a)+1;break;case 25:Ea(a,v(a,A(a),D(a)));break;case 26:a.c=a.d(D(a));break;case 27:Ka(a);break;case 28:a.h=t(a,a.h);break;case 29:a.h=u(a,a.h);break;case 30:a.h=a.d(a.b++);break;case 31:var Ja=a,Bc=Ja.c&1;Ja.c=(Ja.c>>
1|(Ja.a&1)<<7)&255;Ja.a=Ja.a&236|Bc;break;case 32:Fa(a,0==(a.a&64));break;case 33:a.g=a.d(a.b++);a.j=a.d(a.b++);break;case 34:k=a.t(a.b);a.k(k,a.g);a.k(++k,a.j);a.b+=2;break;case 35:Va(a);break;case 36:a.j=t(a,a.j);break;case 37:a.j=u(a,a.j);break;case 38:a.j=a.d(a.b++);break;case 39:var la=a,Rb=la.lb[la.c|(la.a&1)<<8|(la.a&2)<<8|(la.a&16)<<6];la.c=Rb&255;la.a=la.a&2|Rb>>8;break;case 40:Fa(a,0!=(a.a&64));break;case 41:Ea(a,v(a,A(a),A(a)));break;case 42:k=a.t(a.b);a.g=a.d(k);a.j=a.d(k+1);a.b+=2;break;
case 43:Xa(a);break;case 44:a.g=t(a,a.g);break;case 45:a.g=u(a,a.g);break;case 46:a.g=a.d(a.b++);break;case 47:var bb=a;bb.c^=255;bb.a|=18;break;case 48:Fa(a,0==(a.a&1));break;case 49:a.m=a.t(a.b);a.b+=2;break;case 50:a.k(a.t(a.b),a.c);a.b+=2;break;case 51:a.m++;break;case 52:ab(a,A(a));break;case 53:cb(a,A(a));break;case 54:a.k(A(a),a.d(a.b++));break;case 55:a.a|=1;a.a&=-3;a.a&=-17;break;case 56:Fa(a,0!=(a.a&1));break;case 57:Ea(a,v(a,A(a),a.m));break;case 58:a.c=a.d(a.t(a.b));a.b+=2;break;case 59:a.m--;
break;case 60:a.c=t(a,a.c);break;case 61:a.c=u(a,a.c);break;case 62:a.c=a.d(a.b++);break;case 63:var U=a;0!=(U.a&1)?(U.a&=-2,U.a|=16):(U.a|=1,U.a&=-17);U.a&=-3;break;case 65:a.f=a.e;break;case 66:a.f=a.i;break;case 67:a.f=a.h;break;case 68:a.f=a.j;break;case 69:a.f=a.g;break;case 70:a.f=a.d(A(a));break;case 71:a.f=a.c;break;case 72:a.e=a.f;break;case 74:a.e=a.i;break;case 75:a.e=a.h;break;case 76:a.e=a.j;break;case 77:a.e=a.g;break;case 78:a.e=a.d(A(a));break;case 79:a.e=a.c;break;case 80:a.i=a.f;
break;case 81:a.i=a.e;break;case 83:a.i=a.h;break;case 84:a.i=a.j;break;case 85:a.i=a.g;break;case 86:a.i=a.d(A(a));break;case 87:a.i=a.c;break;case 88:a.h=a.f;break;case 89:a.h=a.e;break;case 90:a.h=a.i;break;case 92:a.h=a.j;break;case 93:a.h=a.g;break;case 94:a.h=a.d(A(a));break;case 95:a.h=a.c;break;case 96:a.j=a.f;break;case 97:a.j=a.e;break;case 98:a.j=a.i;break;case 99:a.j=a.h;break;case 101:a.j=a.g;break;case 102:a.j=a.d(A(a));break;case 103:a.j=a.c;break;case 104:a.g=a.f;break;case 105:a.g=
a.e;break;case 106:a.g=a.i;break;case 107:a.g=a.h;break;case 108:a.g=a.j;break;case 110:a.g=a.d(A(a));break;case 111:a.g=a.c;break;case 112:a.k(A(a),a.f);break;case 113:a.k(A(a),a.e);break;case 114:a.k(A(a),a.i);break;case 115:a.k(A(a),a.h);break;case 116:a.k(A(a),a.j);break;case 117:a.k(A(a),a.g);break;case 118:a.n=0;a.ka=j;a.b--;break;case 119:a.k(A(a),a.c);break;case 120:a.c=a.f;break;case 121:a.c=a.e;break;case 122:a.c=a.i;break;case 123:a.c=a.h;break;case 124:a.c=a.j;break;case 125:a.c=a.g;break;
case 126:a.c=a.d(A(a));break;case 128:G(a,a.f);break;case 129:G(a,a.e);break;case 130:G(a,a.i);break;case 131:G(a,a.h);break;case 132:G(a,a.j);break;case 133:G(a,a.g);break;case 134:G(a,a.d(A(a)));break;case 135:G(a,a.c);break;case 136:H(a,a.f);break;case 137:H(a,a.e);break;case 138:H(a,a.i);break;case 139:H(a,a.h);break;case 140:H(a,a.j);break;case 141:H(a,a.g);break;case 142:H(a,a.d(A(a)));break;case 143:H(a,a.c);break;case 144:I(a,a.f);break;case 145:I(a,a.e);break;case 146:I(a,a.i);break;case 147:I(a,
a.h);break;case 148:I(a,a.j);break;case 149:I(a,a.g);break;case 150:I(a,a.d(A(a)));break;case 151:I(a,a.c);break;case 152:K(a,a.f);break;case 153:K(a,a.e);break;case 154:K(a,a.i);break;case 155:K(a,a.h);break;case 156:K(a,a.j);break;case 157:K(a,a.g);break;case 158:K(a,a.d(A(a)));break;case 159:K(a,a.c);break;case 160:a.a=a.l[a.c&=a.f]|16;break;case 161:a.a=a.l[a.c&=a.e]|16;break;case 162:a.a=a.l[a.c&=a.i]|16;break;case 163:a.a=a.l[a.c&=a.h]|16;break;case 164:a.a=a.l[a.c&=a.j]|16;break;case 165:a.a=
a.l[a.c&=a.g]|16;break;case 166:a.a=a.l[a.c&=a.d(A(a))]|16;break;case 167:a.a=a.l[a.c]|16;break;case 168:a.a=a.l[a.c^=a.f];break;case 169:a.a=a.l[a.c^=a.e];break;case 170:a.a=a.l[a.c^=a.i];break;case 171:a.a=a.l[a.c^=a.h];break;case 172:a.a=a.l[a.c^=a.j];break;case 173:a.a=a.l[a.c^=a.g];break;case 174:a.a=a.l[a.c^=a.d(A(a))];break;case 175:a.a=a.l[a.c=0];break;case 176:a.a=a.l[a.c|=a.f];break;case 177:a.a=a.l[a.c|=a.e];break;case 178:a.a=a.l[a.c|=a.i];break;case 179:a.a=a.l[a.c|=a.h];break;case 180:a.a=
a.l[a.c|=a.j];break;case 181:a.a=a.l[a.c|=a.g];break;case 182:a.a=a.l[a.c|=a.d(A(a))];break;case 183:a.a=a.l[a.c];break;case 184:L(a,a.f);break;case 185:L(a,a.e);break;case 186:L(a,a.i);break;case 187:L(a,a.h);break;case 188:L(a,a.j);break;case 189:L(a,a.g);break;case 190:L(a,a.d(A(a)));break;case 191:L(a,a.c);break;case 192:db(a,0==(a.a&64));break;case 193:var Sb=a,Tb=a.t(a.m);Sb.f=Tb>>8;Sb.e=Tb&255;a.m+=2;break;case 194:lb(a,0==(a.a&64));break;case 195:a.b=a.t(a.b);break;case 196:a.call(0==(a.a&
64));break;case 197:mb(a,a.f,a.e);break;case 198:G(a,a.d(a.b++));break;case 199:n(a,a.b);a.b=0;break;case 200:db(a,0!=(a.a&64));break;case 201:a.b=a.t(a.m);a.m+=2;break;case 202:lb(a,0!=(a.a&64));break;case 203:var b=a,Ub=a.d(a.b++);b.n-=nb[Ub];switch(Ub){case 0:b.f=ob(b,b.f);break;case 1:b.e=ob(b,b.e);break;case 2:b.i=ob(b,b.i);break;case 3:b.h=ob(b,b.h);break;case 4:b.j=ob(b,b.j);break;case 5:b.g=ob(b,b.g);break;case 6:b.k(A(b),ob(b,b.d(A(b))));break;case 7:b.c=ob(b,b.c);break;case 8:b.f=Fb(b,b.f);
break;case 9:b.e=Fb(b,b.e);break;case 10:b.i=Fb(b,b.i);break;case 11:b.h=Fb(b,b.h);break;case 12:b.j=Fb(b,b.j);break;case 13:b.g=Fb(b,b.g);break;case 14:b.k(A(b),Fb(b,b.d(A(b))));break;case 15:b.c=Fb(b,b.c);break;case 16:b.f=M(b,b.f);break;case 17:b.e=M(b,b.e);break;case 18:b.i=M(b,b.i);break;case 19:b.h=M(b,b.h);break;case 20:b.j=M(b,b.j);break;case 21:b.g=M(b,b.g);break;case 22:b.k(A(b),M(b,b.d(A(b))));break;case 23:b.c=M(b,b.c);break;case 24:b.f=Gb(b,b.f);break;case 25:b.e=Gb(b,b.e);break;case 26:b.i=
Gb(b,b.i);break;case 27:b.h=Gb(b,b.h);break;case 28:b.j=Gb(b,b.j);break;case 29:b.g=Gb(b,b.g);break;case 30:b.k(A(b),Gb(b,b.d(A(b))));break;case 31:b.c=Gb(b,b.c);break;case 32:b.f=Hb(b,b.f);break;case 33:b.e=Hb(b,b.e);break;case 34:b.i=Hb(b,b.i);break;case 35:b.h=Hb(b,b.h);break;case 36:b.j=Hb(b,b.j);break;case 37:b.g=Hb(b,b.g);break;case 38:b.k(A(b),Hb(b,b.d(A(b))));break;case 39:b.c=Hb(b,b.c);break;case 40:b.f=Ib(b,b.f);break;case 41:b.e=Ib(b,b.e);break;case 42:b.i=Ib(b,b.i);break;case 43:b.h=Ib(b,
b.h);break;case 44:b.j=Ib(b,b.j);break;case 45:b.g=Ib(b,b.g);break;case 46:b.k(A(b),Ib(b,b.d(A(b))));break;case 47:b.c=Ib(b,b.c);break;case 48:b.f=Jb(b,b.f);break;case 49:b.e=Jb(b,b.e);break;case 50:b.i=Jb(b,b.i);break;case 51:b.h=Jb(b,b.h);break;case 52:b.j=Jb(b,b.j);break;case 53:b.g=Jb(b,b.g);break;case 54:b.k(A(b),Jb(b,b.d(A(b))));break;case 55:b.c=Jb(b,b.c);break;case 56:b.f=Kb(b,b.f);break;case 57:b.e=Kb(b,b.e);break;case 58:b.i=Kb(b,b.i);break;case 59:b.h=Kb(b,b.h);break;case 60:b.j=Kb(b,b.j);
break;case 61:b.g=M(b,b.g);break;case 62:b.k(A(b),Kb(b,b.d(A(b))));break;case 63:b.c=Kb(b,b.c);break;case 64:N(b,b.f&1);break;case 65:N(b,b.e&1);break;case 66:N(b,b.i&1);break;case 67:N(b,b.h&1);break;case 68:N(b,b.j&1);break;case 69:N(b,b.g&1);break;case 70:N(b,b.d(A(b))&1);break;case 71:N(b,b.c&1);break;case 72:N(b,b.f&2);break;case 73:N(b,b.e&2);break;case 74:N(b,b.i&2);break;case 75:N(b,b.h&2);break;case 76:N(b,b.j&2);break;case 77:N(b,b.g&2);break;case 78:N(b,b.d(A(b))&2);break;case 79:N(b,b.c&
2);break;case 80:N(b,b.f&4);break;case 81:N(b,b.e&4);break;case 82:N(b,b.i&4);break;case 83:N(b,b.h&4);break;case 84:N(b,b.j&4);break;case 85:N(b,b.g&4);break;case 86:N(b,b.d(A(b))&4);break;case 87:N(b,b.c&4);break;case 88:N(b,b.f&8);break;case 89:N(b,b.e&8);break;case 90:N(b,b.i&8);break;case 91:N(b,b.h&8);break;case 92:N(b,b.j&8);break;case 93:N(b,b.g&8);break;case 94:N(b,b.d(A(b))&8);break;case 95:N(b,b.c&8);break;case 96:N(b,b.f&16);break;case 97:N(b,b.e&16);break;case 98:N(b,b.i&16);break;case 99:N(b,
b.h&16);break;case 100:N(b,b.j&16);break;case 101:N(b,b.g&16);break;case 102:N(b,b.d(A(b))&16);break;case 103:N(b,b.c&16);break;case 104:N(b,b.f&32);break;case 105:N(b,b.e&32);break;case 106:N(b,b.i&32);break;case 107:N(b,b.h&32);break;case 108:N(b,b.j&32);break;case 109:N(b,b.g&32);break;case 110:N(b,b.d(A(b))&32);break;case 111:N(b,b.c&32);break;case 112:N(b,b.f&64);break;case 113:N(b,b.e&64);break;case 114:N(b,b.i&64);break;case 115:N(b,b.h&64);break;case 116:N(b,b.j&64);break;case 117:N(b,b.g&
64);break;case 118:N(b,b.d(A(b))&64);break;case 119:N(b,b.c&64);break;case 120:N(b,b.f&128);break;case 121:N(b,b.e&128);break;case 122:N(b,b.i&128);break;case 123:N(b,b.h&128);break;case 124:N(b,b.j&128);break;case 125:N(b,b.g&128);break;case 126:N(b,b.d(A(b))&128);break;case 127:N(b,b.c&128);break;case 128:b.f&=-2;break;case 129:b.e&=-2;break;case 130:b.i&=-2;break;case 131:b.h&=-2;break;case 132:b.j&=-2;break;case 133:b.g&=-2;break;case 134:b.k(A(b),b.d(A(b))&-2);break;case 135:b.c&=-2;break;case 136:b.f&=
-3;break;case 137:b.e&=-3;break;case 138:b.i&=-3;break;case 139:b.h&=-3;break;case 140:b.j&=-3;break;case 141:b.g&=-3;break;case 142:b.k(A(b),b.d(A(b))&-3);break;case 143:b.c&=-3;break;case 144:b.f&=-5;break;case 145:b.e&=-5;break;case 146:b.i&=-5;break;case 147:b.h&=-5;break;case 148:b.j&=-5;break;case 149:b.g&=-5;break;case 150:b.k(A(b),b.d(A(b))&-5);break;case 151:b.c&=-5;break;case 152:b.f&=-9;break;case 153:b.e&=-9;break;case 154:b.i&=-9;break;case 155:b.h&=-9;break;case 156:b.j&=-9;break;case 157:b.g&=
-9;break;case 158:b.k(A(b),b.d(A(b))&-9);break;case 159:b.c&=-9;break;case 160:b.f&=-17;break;case 161:b.e&=-17;break;case 162:b.i&=-17;break;case 163:b.h&=-17;break;case 164:b.j&=-17;break;case 165:b.g&=-17;break;case 166:b.k(A(b),b.d(A(b))&-17);break;case 167:b.c&=-17;break;case 168:b.f&=-33;break;case 169:b.e&=-33;break;case 170:b.i&=-33;break;case 171:b.h&=-33;break;case 172:b.j&=-33;break;case 173:b.g&=-33;break;case 174:b.k(A(b),b.d(A(b))&-33);break;case 175:b.c&=-33;break;case 176:b.f&=-65;
break;case 177:b.e&=-65;break;case 178:b.i&=-65;break;case 179:b.h&=-65;break;case 180:b.j&=-65;break;case 181:b.g&=-65;break;case 182:b.k(A(b),b.d(A(b))&-65);break;case 183:b.c&=-65;break;case 184:b.f&=-129;break;case 185:b.e&=-129;break;case 186:b.i&=-129;break;case 187:b.h&=-129;break;case 188:b.j&=-129;break;case 189:b.g&=-129;break;case 190:b.k(A(b),b.d(A(b))&-129);break;case 191:b.c&=-129;break;case 192:b.f|=1;break;case 193:b.e|=1;break;case 194:b.i|=1;break;case 195:b.h|=1;break;case 196:b.j|=
1;break;case 197:b.g|=1;break;case 198:b.k(A(b),b.d(A(b))|1);break;case 199:b.c|=1;break;case 200:b.f|=2;break;case 201:b.e|=2;break;case 202:b.i|=2;break;case 203:b.h|=2;break;case 204:b.j|=2;break;case 205:b.g|=2;break;case 206:b.k(A(b),b.d(A(b))|2);break;case 207:b.c|=2;break;case 208:b.f|=4;break;case 209:b.e|=4;break;case 210:b.i|=4;break;case 211:b.h|=4;break;case 212:b.j|=4;break;case 213:b.g|=4;break;case 214:b.k(A(b),b.d(A(b))|4);break;case 215:b.c|=4;break;case 216:b.f|=8;break;case 217:b.e|=
8;break;case 218:b.i|=8;break;case 219:b.h|=8;break;case 220:b.j|=8;break;case 221:b.g|=8;break;case 222:b.k(A(b),b.d(A(b))|8);break;case 223:b.c|=8;break;case 224:b.f|=16;break;case 225:b.e|=16;break;case 226:b.i|=16;break;case 227:b.h|=16;break;case 228:b.j|=16;break;case 229:b.g|=16;break;case 230:b.k(A(b),b.d(A(b))|16);break;case 231:b.c|=16;break;case 232:b.f|=32;break;case 233:b.e|=32;break;case 234:b.i|=32;break;case 235:b.h|=32;break;case 236:b.j|=32;break;case 237:b.g|=32;break;case 238:b.k(A(b),
b.d(A(b))|32);break;case 239:b.c|=32;break;case 240:b.f|=64;break;case 241:b.e|=64;break;case 242:b.i|=64;break;case 243:b.h|=64;break;case 244:b.j|=64;break;case 245:b.g|=64;break;case 246:b.k(A(b),b.d(A(b))|64);break;case 247:b.c|=64;break;case 248:b.f|=128;break;case 249:b.e|=128;break;case 250:b.i|=128;break;case 251:b.h|=128;break;case 252:b.j|=128;break;case 253:b.g|=128;break;case 254:b.k(A(b),b.d(A(b))|128);break;case 255:b.c|=128}break;case 204:a.call(0!=(a.a&64));break;case 205:n(a,a.b+
2);a.b=a.t(a.b);break;case 206:H(a,a.d(a.b++));break;case 207:n(a,a.b);a.b=8;break;case 208:db(a,0==(a.a&1));break;case 209:var Vb=a,Wb=a.t(a.m);Vb.i=Wb>>8;Vb.h=Wb&255;a.m+=2;break;case 210:lb(a,0==(a.a&1));break;case 211:O(a.port,a.d(a.b++),a.c);break;case 212:a.call(0==(a.a&1));break;case 213:mb(a,a.i,a.h);break;case 214:I(a,a.d(a.b++));break;case 215:n(a,a.b);a.b=16;break;case 216:db(a,0!=(a.a&1));break;case 217:var pa=a,pb=pa.f;pa.f=pa.Sa;pa.Sa=pb;pb=pa.e;pa.e=pa.Ua;pa.Ua=pb;var qa=a,qb=qa.i;
qa.i=qa.Wa;qa.Wa=qb;qb=qa.h;qa.h=qa.Xa;qa.Xa=qb;var ra=a,rb=ra.j;ra.j=ra.Za;ra.Za=rb;rb=ra.g;ra.g=ra.ab;ra.ab=rb;break;case 218:lb(a,0!=(a.a&1));break;case 219:a.c=P(a.port,a.d(a.b++));break;case 220:a.call(0!=(a.a&1));break;case 221:var e=a,Xb=a.d(a.b++),La=0,sb=0;e.n-=Lb[Xb];switch(Xb){case 9:Mb(e,v(e,T(e),s(e)));break;case 25:Mb(e,v(e,T(e),D(e)));break;case 33:Mb(e,e.t(e.b));e.b+=2;break;case 34:La=e.t(e.b);e.k(La++,e.p);e.k(La,e.r);e.b+=2;break;case 35:e.p=e.p+1&255;0==e.p&&(e.r=e.r+1&255);break;
case 36:e.r=t(e,e.r);break;case 37:e.r=u(e,e.r);break;case 38:e.r=e.d(e.b++);break;case 41:Mb(e,v(e,T(e),T(e)));break;case 42:La=e.t(e.b);e.p=e.d(La);e.r=e.d(++La);e.b+=2;break;case 43:e.p=e.p-1&255;255==e.p&&(e.r=e.r-1&255);break;case 44:e.p=t(e,e.p);break;case 45:e.p=u(e,e.p);break;case 46:e.p=e.d(e.b++);break;case 52:ab(e,T(e)+E(e));e.b++;break;case 53:cb(e,T(e)+E(e));e.b++;break;case 54:e.k(T(e)+E(e),e.d(++e.b));e.b++;break;case 57:Mb(e,v(e,T(e),e.m));break;case 68:e.f=e.r;break;case 69:e.f=e.p;
break;case 70:e.f=e.d(T(e)+E(e));e.b++;break;case 76:e.e=e.r;break;case 77:e.e=e.p;break;case 78:e.e=e.d(T(e)+E(e));e.b++;break;case 84:e.i=e.r;break;case 85:e.i=e.p;break;case 86:e.i=e.d(T(e)+E(e));e.b++;break;case 92:e.h=e.r;break;case 93:e.h=e.p;break;case 94:e.h=e.d(T(e)+E(e));e.b++;break;case 96:e.r=e.f;break;case 97:e.r=e.e;break;case 98:e.r=e.i;break;case 99:e.r=e.h;break;case 100:break;case 101:e.r=e.p;break;case 102:e.j=e.d(T(e)+E(e));e.b++;break;case 103:e.r=e.c;break;case 104:e.p=e.f;break;
case 105:e.p=e.e;break;case 106:e.p=e.i;break;case 107:e.p=e.h;break;case 108:e.p=e.r;break;case 109:break;case 110:e.g=e.d(T(e)+E(e));e.b++;break;case 111:e.p=e.c;break;case 112:e.k(T(e)+E(e),e.f);e.b++;break;case 113:e.k(T(e)+E(e),e.e);e.b++;break;case 114:e.k(T(e)+E(e),e.i);e.b++;break;case 115:e.k(T(e)+E(e),e.h);e.b++;break;case 116:e.k(T(e)+E(e),e.j);e.b++;break;case 117:e.k(T(e)+E(e),e.g);e.b++;break;case 119:e.k(T(e)+E(e),e.c);e.b++;break;case 124:e.c=e.r;break;case 125:e.c=e.p;break;case 126:e.c=
e.d(T(e)+E(e));e.b++;break;case 132:G(e,e.r);break;case 133:G(e,e.p);break;case 134:G(e,e.d(T(e)+E(e)));e.b++;break;case 140:H(e,e.r);break;case 141:H(e,e.p);break;case 142:H(e,e.d(T(e)+E(e)));e.b++;break;case 148:I(e,e.r);break;case 149:I(e,e.p);break;case 150:I(e,e.d(T(e)+E(e)));e.b++;break;case 156:K(e,e.r);break;case 157:K(e,e.p);break;case 158:K(e,e.d(T(e)+E(e)));e.b++;break;case 164:e.a=e.l[e.c&=e.r]|16;break;case 165:e.a=e.l[e.c&=e.p]|16;break;case 166:e.a=e.l[e.c&=e.d(T(e)+E(e))]|16;e.b++;
break;case 172:e.a=e.l[e.c^=e.r];break;case 173:e.a=e.l[e.c^=e.p];break;case 174:e.a=e.l[e.c^=e.d(T(e)+E(e))];e.b++;break;case 180:e.a=e.l[e.c|=e.r];break;case 181:e.a=e.l[e.c|=e.p];break;case 182:e.a=e.l[e.c|=e.d(T(e)+E(e))];e.b++;break;case 188:L(e,e.r);break;case 189:L(e,e.p);break;case 190:L(e,e.d(T(e)+E(e)));e.b++;break;case 203:Nb(e,T(e));break;case 225:Mb(e,e.t(e.m));e.m+=2;break;case 227:sb=T(e);Mb(e,e.t(e.m));e.k(e.m,sb&255);e.k(e.m+1,sb>>8);break;case 229:mb(e,e.r,e.p);break;case 233:e.b=
T(e);break;case 249:e.m=T(e);break;default:e.b--}break;case 222:K(a,a.d(a.b++));break;case 223:n(a,a.b);a.b=24;break;case 224:db(a,0==(a.a&4));break;case 225:Ea(a,a.t(a.m));a.m+=2;break;case 226:lb(a,0==(a.a&4));break;case 227:m=a.j;a.j=a.d(a.m+1);a.k(a.m+1,m);m=a.g;a.g=a.d(a.m);a.k(a.m,m);break;case 228:a.call(0==(a.a&4));break;case 229:mb(a,a.j,a.g);break;case 230:a.a=a.l[a.c&=a.d(a.b++)]|16;break;case 231:n(a,a.b);a.b=32;break;case 232:db(a,0!=(a.a&4));break;case 233:a.b=A(a);break;case 234:lb(a,
0!=(a.a&4));break;case 235:m=a.i;a.i=a.j;a.j=m;m=a.h;a.h=a.g;a.g=m;break;case 236:a.call(0!=(a.a&4));break;case 237:var d=a,$b=a.d(a.b),p=0,x=0,Ma=0;d.n-=Pb[$b];switch($b){case 64:d.f=P(d.port,d.e);d.a=d.a&1|d.l[d.f];d.b++;break;case 65:O(d.port,d.e,d.f);d.b++;break;case 66:Yb(d,s(d));d.b++;break;case 67:x=d.t(d.b+1);d.k(x++,d.e);d.k(x,d.f);d.b+=3;break;case 68:case 76:case 84:case 92:case 100:case 108:case 116:case 124:p=d.c;d.c=0;I(d,p);d.b++;break;case 69:case 77:case 85:case 93:case 101:case 109:case 117:case 125:d.b=
d.t(d.m);d.m+=2;d.Q=d.R;break;case 70:case 78:case 102:case 110:d.sa=0;d.b++;break;case 71:d.Ha=d.c;d.b++;break;case 72:d.e=P(d.port,d.e);d.a=d.a&1|d.l[d.e];d.b++;break;case 73:O(d.port,d.e,d.e);d.b++;break;case 74:Zb(d,s(d));d.b++;break;case 75:x=d.t(d.b+1);d.e=d.d(x++);d.f=d.d(x);d.b+=3;break;case 79:d.wb=d.c;d.b++;break;case 80:d.i=P(d.port,d.e);d.a=d.a&1|d.l[d.i];d.b++;break;case 81:O(d.port,d.e,d.i);d.b++;break;case 82:Yb(d,D(d));d.b++;break;case 83:x=d.t(d.b+1);d.k(x++,d.h);d.k(x,d.i);d.b+=
3;break;case 86:case 118:d.sa=1;d.b++;break;case 87:d.c=d.Ha;d.a=d.a&1|d.Qa[d.c]|(d.R?4:0);d.b++;break;case 88:d.h=P(d.port,d.e);d.a=d.a&1|d.l[d.h];d.b++;break;case 89:O(d.port,d.e,d.h);d.b++;break;case 90:Zb(d,D(d));d.b++;break;case 91:x=d.t(d.b+1);d.h=d.d(x++);d.i=d.d(x);d.b+=3;break;case 95:d.c=Math.round(255*Math.random());d.a=d.a&1|d.Qa[d.c]|(d.R?4:0);d.b++;break;case 96:d.j=P(d.port,d.e);d.a=d.a&1|d.l[d.j];d.b++;break;case 97:O(d.port,d.e,d.j);d.b++;break;case 98:Yb(d,A(d));d.b++;break;case 99:x=
d.t(d.b+1);d.k(x++,d.g);d.k(x,d.j);d.b+=3;break;case 103:x=A(d);Ma=d.d(x);d.k(x,Ma>>4|(d.c&15)<<4);d.c=d.c&240|Ma&15;d.a=d.a&1|d.l[d.c];d.b++;break;case 104:d.g=P(d.port,d.e);d.a=d.a&1|d.l[d.g];d.b++;break;case 105:O(d.port,d.e,d.g);d.b++;break;case 106:Zb(d,A(d));d.b++;break;case 107:x=d.t(d.b+1);d.g=d.d(x++);d.j=d.d(x);d.b+=3;break;case 111:x=A(d);Ma=d.d(x);d.k(x,(Ma&15)<<4|d.c&15);d.c=d.c&240|Ma>>4;d.a=d.a&1|d.l[d.c];d.b++;break;case 113:O(d.port,d.e,0);d.b++;break;case 114:Yb(d,d.m);d.b++;break;
case 115:x=d.t(d.b+1);d.k(x++,d.m&255);d.k(x,d.m>>8);d.b+=3;break;case 120:d.c=P(d.port,d.e);d.a=d.a&1|d.l[d.c];d.b++;break;case 121:O(d.port,d.e,d.c);d.b++;break;case 122:Zb(d,d.m);d.b++;break;case 123:d.m=d.t(d.t(d.b+1));d.b+=3;break;case 160:d.k(D(d),d.d(A(d)));Ga(d);Va(d);C(d);d.a=d.a&193|(0!=s(d)?4:0);d.b++;break;case 161:p=d.a&1|2;L(d,d.d(A(d)));Va(d);C(d);p|=0==s(d)?0:4;d.a=d.a&248|p;d.b++;break;case 162:p=P(d.port,d.e);d.k(A(d),p);d.f=u(d,d.f);Va(d);d.a=128==(p&128)?d.a|2:d.a&-3;d.b++;break;
case 163:p=d.d(A(d));O(d.port,d.e,p);Va(d);d.f=u(d,d.f);255<d.g+p?(d.a|=1,d.a|=16):(d.a&=-2,d.a&=-17);d.a=128==(p&128)?d.a|2:d.a&-3;d.b++;break;case 168:d.k(D(d),d.d(A(d)));Ka(d);Xa(d);C(d);d.a=d.a&193|(0!=s(d)?4:0);d.b++;break;case 169:p=d.a&1|2;L(d,d.d(A(d)));Xa(d);C(d);p|=0==s(d)?0:4;d.a=d.a&248|p;d.b++;break;case 170:p=P(d.port,d.e);d.k(A(d),p);d.f=u(d,d.f);Xa(d);d.a=0!=(p&128)?d.a|2:d.a&-3;d.b++;break;case 171:p=d.d(A(d));O(d.port,d.e,p);Xa(d);d.f=u(d,d.f);255<d.g+p?(d.a|=1,d.a|=16):(d.a&=-2,
d.a&=-17);d.a=128==(p&128)?d.a|2:d.a&-3;d.b++;break;case 176:d.k(D(d),d.d(A(d)));Ga(d);Va(d);C(d);0!=s(d)?(d.a|=4,d.n-=5,d.b--):(d.a&=-5,d.b++);d.a&=-3;d.a&=-17;break;case 177:p=d.a&1|2;L(d,d.d(A(d)));Va(d);C(d);p|=0==s(d)?0:4;0!=(p&4)&&0==(d.a&64)?(d.n-=5,d.b--):d.b++;d.a=d.a&248|p;break;case 178:p=P(d.port,d.e);d.k(A(d),p);d.f=u(d,d.f);Va(d);0!=d.f?(d.n-=5,d.b--):d.b++;d.a=128==(p&128)?d.a|2:d.a&-3;break;case 179:p=d.d(A(d));O(d.port,d.e,p);d.f=u(d,d.f);Va(d);0!=d.f?(d.n-=5,d.b--):d.b++;255<d.g+
p?(d.a|=1,d.a|=16):(d.a&=-2,d.a&=-17);d.a=0!=(p&128)?d.a|2:d.a&-3;break;case 184:d.k(D(d),d.d(A(d)));Ka(d);Xa(d);C(d);0!=s(d)?(d.a|=4,d.n-=5,d.b--):(d.a&=-5,d.b++);d.a&=-3;d.a&=-17;break;case 185:p=d.a&1|2;L(d,d.d(A(d)));Xa(d);C(d);p|=0==s(d)?0:4;0!=(p&4)&&0==(d.a&64)?(d.n-=5,d.b--):d.b++;d.a=d.a&248|p;break;case 186:p=P(d.port,d.e);d.k(A(d),p);d.f=u(d,d.f);Xa(d);0!=d.f?(d.n-=5,d.b--):d.b++;d.a=0!=(p&128)?d.a|2:d.a&-3;break;case 187:p=d.d(A(d));O(d.port,d.e,p);d.f=u(d,d.f);Xa(d);0!=d.f?(d.n-=5,d.b--):
d.b++;255<d.g+p?(d.a|=1,d.a|=16):(d.a&=-2,d.a&=-17);d.a=0!=(p&128)?d.a|2:d.a&-3;break;default:d.b++}break;case 238:a.a=a.l[a.c^=a.d(a.b++)];break;case 239:n(a,a.b);a.b=40;break;case 240:db(a,0==(a.a&128));break;case 241:a.a=a.d(a.m++);a.c=a.d(a.m++);break;case 242:lb(a,0==(a.a&128));break;case 243:a.Q=a.R=l;a.Oa=j;break;case 244:a.call(0==(a.a&128));break;case 245:mb(a,a.c,a.a);break;case 246:a.a=a.l[a.c|=a.d(a.b++)];break;case 247:n(a,a.b);a.b=48;break;case 248:db(a,0!=(a.a&128));break;case 249:a.m=
A(a);break;case 250:lb(a,0!=(a.a&128));break;case 251:a.Q=a.R=a.Oa=j;break;case 252:a.call(0!=(a.a&128));break;case 253:var f=a,ac=a.d(a.b++),Na=aa,tb=aa;f.n-=Lb[ac];switch(ac){case 9:uc(f,v(f,Y(f),s(f)));break;case 25:uc(f,v(f,Y(f),D(f)));break;case 33:uc(f,f.t(f.b));f.b+=2;break;case 34:Na=f.t(f.b);f.k(Na++,f.q);f.k(Na,f.s);f.b+=2;break;case 35:f.q=f.q+1&255;0==f.q&&(f.s=f.s+1&255);break;case 36:f.s=t(f,f.s);break;case 37:f.s=u(f,f.s);break;case 38:f.s=f.d(f.b++);break;case 41:uc(f,v(f,Y(f),Y(f)));
break;case 42:Na=f.t(f.b);f.q=f.d(Na);f.s=f.d(++Na);f.b+=2;break;case 43:f.q=f.q-1&255;255==f.q&&(f.s=f.s-1&255);break;case 44:f.q=t(f,f.q);break;case 45:f.q=u(f,f.q);break;case 46:f.q=f.d(f.b++);break;case 52:ab(f,Y(f)+E(f));f.b++;break;case 53:cb(f,Y(f)+E(f));f.b++;break;case 54:f.k(Y(f)+E(f),f.d(++f.b));f.b++;break;case 57:uc(f,v(f,Y(f),f.m));break;case 68:f.f=f.s;break;case 69:f.f=f.q;break;case 70:f.f=f.d(Y(f)+E(f));f.b++;break;case 76:f.e=f.s;break;case 77:f.e=f.q;break;case 78:f.e=f.d(Y(f)+
E(f));f.b++;break;case 84:f.i=f.s;break;case 85:f.i=f.q;break;case 86:f.i=f.d(Y(f)+E(f));f.b++;break;case 92:f.h=f.s;break;case 93:f.h=f.q;break;case 94:f.h=f.d(Y(f)+E(f));f.b++;break;case 96:f.s=f.f;break;case 97:f.s=f.e;break;case 98:f.s=f.i;break;case 99:f.s=f.h;break;case 100:break;case 101:f.s=f.q;break;case 102:f.j=f.d(Y(f)+E(f));f.b++;break;case 103:f.s=f.c;break;case 104:f.q=f.f;break;case 105:f.q=f.e;break;case 106:f.q=f.i;break;case 107:f.q=f.h;break;case 108:f.q=f.s;break;case 109:break;
case 110:f.g=f.d(Y(f)+E(f));f.b++;break;case 111:f.q=f.c;break;case 112:f.k(Y(f)+E(f),f.f);f.b++;break;case 113:f.k(Y(f)+E(f),f.e);f.b++;break;case 114:f.k(Y(f)+E(f),f.i);f.b++;break;case 115:f.k(Y(f)+E(f),f.h);f.b++;break;case 116:f.k(Y(f)+E(f),f.j);f.b++;break;case 117:f.k(Y(f)+E(f),f.g);f.b++;break;case 119:f.k(Y(f)+E(f),f.c);f.b++;break;case 124:f.c=f.s;break;case 125:f.c=f.q;break;case 126:f.c=f.d(Y(f)+E(f));f.b++;break;case 132:G(f,f.s);break;case 133:G(f,f.q);break;case 134:G(f,f.d(Y(f)+E(f)));
f.b++;break;case 140:H(f,f.s);break;case 141:H(f,f.q);break;case 142:H(f,f.d(Y(f)+E(f)));f.b++;break;case 148:I(f,f.s);break;case 149:I(f,f.q);break;case 150:I(f,f.d(Y(f)+E(f)));f.b++;break;case 156:K(f,f.s);break;case 157:K(f,f.q);break;case 158:K(f,f.d(Y(f)+E(f)));f.b++;break;case 164:f.a=f.l[f.c&=f.s]|16;break;case 165:f.a=f.l[f.c&=f.q]|16;break;case 166:f.a=f.l[f.c&=f.d(Y(f)+E(f))]|16;f.b++;break;case 172:f.a=f.l[f.c^=f.s];break;case 173:f.a=f.l[f.c^=f.q];break;case 174:f.a=f.l[f.c^=f.d(Y(f)+
E(f))];f.b++;break;case 180:f.a=f.l[f.c|=f.s];break;case 181:f.a=f.l[f.c|=f.q];break;case 182:f.a=f.l[f.c|=f.d(Y(f)+E(f))];f.b++;break;case 188:L(f,f.s);break;case 189:L(f,f.q);break;case 190:L(f,f.d(Y(f)+E(f)));f.b++;break;case 203:Nb(f,Y(f));break;case 225:uc(f,f.t(f.m));f.m+=2;break;case 227:tb=Y(f);uc(f,f.t(f.m));f.k(f.m,tb&255);f.k(f.m+1,tb>>8);break;case 229:mb(f,f.s,f.q);break;case 233:f.b=Y(f);break;case 249:f.m=Y(f);break;default:f.b--}break;case 254:L(a,a.d(a.b++));break;case 255:n(a,a.b),
a.b=56}if(this.La){var bc=g;0==bc&&(this.Ca=0);var cc=this.za[bc];this.Ba=this.ya.update(this.Ca,cc);this.Ca+=cc}this.C.la=g;if(0==this.Fa&&192>g){var B=this.C,Ba=g,Oa=0,eb=0,fb=0;if(!B.o.T||!(24>Ba||168<=Ba))if(0!=(B.z[1]&64)){if(-1!=B.da){for(var V=B,Pa=V.na;Pa<=V.da;Pa++)if(V.wa[Pa]){V.wa[Pa]=l;for(var Ec=V.Na[Pa],Fc=0,gb=Pa<<5,dc=0;8>dc;dc++)for(var Gc=V.G[gb++],Hc=V.G[gb++],Ic=V.G[gb++],Jc=V.G[gb++],Ca=128;0!=Ca;Ca>>=1){var ia=0;0!=(Gc&Ca)&&(ia|=1);0!=(Hc&Ca)&&(ia|=2);0!=(Ic&Ca)&&(ia|=4);0!=
(Jc&Ca)&&(ia|=8);Ec[Fc++]=ia}}V.na=512;V.da=-1}var y=B,Qa=Ba,sa=0,Ra=0,ta=0,ua=0,ub=y.z[8],ec=y.z[9];16>Qa&&0!=(y.z[0]&64)&&(ub=0);var Kc=y.z[0]&128,fc=32-(ub>>3)+y.Ga,Ya=Qa+ec>>3;27<Ya&&(Ya-=28);for(var vb=(Qa+(ec&7)&7)<<3,gc=Qa<<8,hb=y.Ga;hb<y.$a;hb++){var hc=y.Ta+((fc&31)<<1)+(Ya<<6),Sa=y.G[hc+1],ic=(Sa&8)<<1,va=(hb<<3)+(ub&7),jc=0==(Sa&4)?vb:56-vb,kc=y.Na[(y.G[hc]&255)+((Sa&1)<<8)];if(0==(Sa&2))for(sa=0;8>sa&&256>va;sa++,va++)Ra=kc[sa+jc],ta=4*(va+gc),ua=3*(Ra+ic),y.qa[va]=0!=(Sa&16)&&0!=Ra,y.display[ta]=
y.v[ua],y.display[ta+1]=y.v[ua+1],y.display[ta+2]=y.v[ua+2];else for(sa=7;0<=sa&&256>va;sa--,va++)Ra=kc[sa+jc],ta=4*(va+gc),ua=3*(Ra+ic),y.qa[va]=0!=(Sa&16)&&0!=Ra,y.display[ta]=y.v[ua],y.display[ta+1]=y.v[ua+1],y.display[ta+2]=y.v[ua+2];fc++;0!=Kc&&23==hb&&(Ya=Qa>>3,vb=(Qa&7)<<3)}if(B.S){var W=B;W.S=l;for(var wb=0;wb<W.ma.length;wb++)W.ma[wb][0]=0;var xb=0==(W.z[1]&2)?8:16;1==(W.z[1]&1)&&(xb<<=1);for(var ib=0;64>ib;ib++){var wa=W.G[W.L+ib]&255;if(208==wa)break;wa++;240<wa&&(wa-=256);for(var Za=0;192>
Za;Za++)if(Za>=wa&&Za-wa<xb){var Ta=W.ma[Za];if(8>Ta[0]){var yb=3*Ta[0]+1,lc=W.L+(ib<<1)+128;Ta[yb++]=W.G[lc++]&255;Ta[yb++]=wa;Ta[yb++]=W.G[lc]&255;Ta[0]++}}}}if(0!=B.ma[Ba][0]){for(var w=B,zb=Ba,xa=0,Q=0,R=0,$a=w.ma[zb],mc=Math.min(8,$a[0]),nc=w.z[1]&1,Ab=zb<<8,Bb=3*mc,Lc=mc;Lc--;){var Cb=$a[Bb--]|(w.z[6]&4)<<6,Mc=$a[Bb--],J=$a[Bb--]-(w.z[0]&8),oc=zb-Mc>>nc;0!=(w.z[1]&2)&&(Cb&=-2);var pc=w.Na[Cb+((oc&8)>>3)],Ua=0;0>J&&(Ua=-J,J=0);var qc=Ua+((oc&7)<<3);if(0==nc)for(;8>Ua&&256>J;Ua++,J++)xa=pc[qc++],
0!=xa&&!w.qa[J]&&(Q=4*(J+Ab),R=3*(xa+16),w.display[Q]=w.v[R],w.display[Q+1]=w.v[R+1],w.display[Q+2]=w.v[R+2]);else for(;8>Ua&&256>J;Ua++,J+=2)xa=pc[qc++],0!=xa&&!w.qa[J]&&(Q=4*(J+Ab),R=3*(xa+16),w.display[Q]=w.v[R],w.display[Q+1]=w.v[R+1],w.display[Q+2]=w.v[R+2]),0!=xa&&!w.qa[J+1]&&(Q=4*(J+Ab+1),R=3*(xa+16),w.display[Q]=w.v[R],w.display[Q+1]=w.v[R+1],w.display[Q+2]=w.v[R+2])}8<=$a[0]&&(w.status|=64)}if(B.o.ca&&0!=(B.z[0]&32)){var rc=Ba<<8;if(32<16+(B.z[7]&15))debugger;if(49152<rc)debugger;eb=4*rc;
fb=3*(16+(B.z[7]&15));for(Oa=0;8>Oa;Oa++)B.display[eb+Oa]=B.v[fb],B.display[eb+Oa+1]=B.v[fb],B.display[eb+Oa+2]=B.v[fb]}}else for(var Da=B,sc=Ba<<8,jb=0,Db=3*(16+(Da.z[7]&15)),tc=0;1024>tc;tc++)jb=4*sc,Da.display[jb]=Da.v[Db],Da.display[jb+1]=Da.v[Db+1],Da.display[jb+2]=Da.v[Db+2],sc++}var F=this.C,Eb=g;192>=Eb?(192==Eb&&(F.status|=128),0==F.ra?(F.ra=F.z[10],F.status|=4):F.ra--,0!=(F.status&4)&&0!=(F.z[0]&16)&&(F.o.K.ba=j)):(F.ra=F.z[10],0!=(F.status&128)&&(0!=(F.z[1]&32)&&224>Eb)&&(F.o.K.ba=j))}if(this.Ja){var X=
this.K;X.R=X.Q;X.Q=l;X.ka&&(X.b++,X.ka=l);n(X,X.b);X.b=102;X.n-=11;this.Ja=l}0==this.Fa--?(this.Fa=this.tb,c=j):c=l;c&&this.O.Bb(this.C.display,[]);this.Ea++;this.O.requestAnimationFrame(this.frame.bind(this),this.O.screen)}},cb:function(c,g){0!=g%1024&&(c=c.substr(512),g-=512);var a,h,k=Math.round(g/1024),q=Array(k);for(a=0;a<k;a++)if(q[a]=Z(1024),da)for(h=0;1024>h;h++)q[a].setUint8(h,c.charCodeAt(1024*a+h));else for(h=0;1024>h;h++)q[a][h]=c.charCodeAt(1024*a+h)&255;return q}};
function vc(c,g,a){var h;h=".gg"==a.substr(-3).toLowerCase()?2:1;var k=g.length;1==h?(c.ca=j,c.T=l,c.C.Ga=0,c.C.$a=32,c.rb=256,c.qb=192):2==h&&(c.T=j,c.ca=l,c.C.Ga=5,c.C.$a=27,c.rb=160,c.qb=144);if(1024>=k)return l;h=c.cb(g,k);if(h==ba)return l;ya(c.K,h);c.gb=g;c.hb=a;return j}function za(c){var g=wc(),a="Running";c.bb&&(a+=": "+(c.Ea/((g-c.bb)/1E3)).toFixed(2)+" (/ "+(1E3/17).toFixed(2)+") FPS");c.O.updateStatus(a);c.Ea=0;c.bb=g};var Z=da?function(c){c||(c=0);return new DataView(new ArrayBuffer(c))}:Array,xc=da?function(c){if(!c)return Z();var g,a;g=c.byteLength;for(a=new Z(g);g--;)a.setInt8(g,c.getInt8(g));return a}:function(c){if(!c)return Z();var g,a;g=c.length;for(a=new Z(g);g--;)c[g]!=aa&&(a[g]=c[g]);return a},yc=da?function(c,g,a){c.V[g>>10].setInt8(g&1023,a);65532<=g&&c.page(g&3,a)}:function(c,g,a){c.V[g>>10][g&1023]=a;65532<=g&&c.page(g&3,a)},zc=da?function(c,g){return c[g>>10].getUint8(g&1023)}:function(c,g){return c[g>>
10][g&1023]&255},Cc=da?function(c,g){return 1023>(g&1023)?c[g>>10].getUint16(g&1023,j):c[g>>10].getUint8(g&1023)|c[++g>>10].getUint8(g&1023)<<8}:function(c,g){return c[g>>10][g&1023]&255|(c[++g>>10][g&1023]&255)<<8},wc=Date.now||function(){return(new Date).getTime()};function Dc(c,g){var a=l;g==aa&&(g=document);c.some(function(c){return c in g?(a=c,j):l});return a};var Aa=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,
19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],nb=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,
8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],Lb=[4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,14,20,10,8,8,11,4,4,15,20,10,8,8,11,4,4,4,4,4,23,23,19,4,4,15,4,4,4,4,4,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,4,19,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,
4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,14,4,23,4,15,4,4,4,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,10,4,4,4,4,4,4],Nc=[0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,
0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0],Pb=[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,8,12,15,20,8,14,8,
8,12,12,15,20,8,14,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];
function na(c){this.o=c;this.port=c.ports;this.sa=this.m=this.b=0;this.ba=this.Oa=this.ka=this.R=this.Q=l;this.n=this.zb=this.Ya=this.a=this.Ha=this.wb=this.s=this.q=this.r=this.p=this.ab=this.Za=this.g=this.j=this.Xa=this.Wa=this.h=this.i=this.Ua=this.Sa=this.e=this.f=this.Ra=this.c=this.ta=0;this.Y=[];this.eb=Array(8);this.Ma=ba;this.Ab=l;this.aa=Array(4);this.ea=0;this.V=Array(65);this.J=Array(65);this.lb=Array(2048);this.Qa=Array(256);this.l=Array(256);this.ha=Array(256);this.ga=Array(256);this.B=
Array(131072);this.A=Array(131072);this.Aa=Array(256);var g,a,h,k,q,m;for(c=0;256>c;c++)g=0!=(c&128)?128:0,a=0==c?64:0,h=c&32,k=c&8,q=Oc(c)?4:0,this.Qa[c]=g|a|h|k,this.l[c]=g|a|h|k|q,this.ha[c]=g|a|h|k,this.ha[c]|=128==c?4:0,this.ha[c]|=0==(c&15)?16:0,this.ga[c]=g|a|h|k|2,this.ga[c]|=127==c?4:0,this.ga[c]|=15==(c&15)?16:0,this.Aa[c]=0!=c?c&128:68,this.Aa[c]|=h|k|16;c=0;g=65536;a=0;h=65536;for(q=0;256>q;q++)for(m=0;256>m;m++)k=m-q,this.B[c]=0!=m?0!=(m&128)?128:0:64,this.B[c]|=m&40,(m&15)<(q&15)&&(this.B[c]|=
16),m<q&&(this.B[c]|=1),0!=((k^q^128)&(k^m)&128)&&(this.B[c]|=4),c++,k=m-q-1,this.B[g]=0!=m?0!=(m&128)?128:0:64,this.B[g]|=m&40,(m&15)<=(q&15)&&(this.B[g]|=16),m<=q&&(this.B[g]|=1),0!=((k^q^128)&(k^m)&128)&&(this.B[g]|=4),g++,k=q-m,this.A[a]=0!=m?0!=(m&128)?130:2:66,this.A[a]|=m&40,(m&15)>(q&15)&&(this.A[a]|=16),m>q&&(this.A[a]|=1),0!=((k^q)&(q^m)&128)&&(this.A[a]|=4),a++,k=q-m-1,this.A[h]=0!=m?0!=(m&128)?130:2:66,this.A[h]|=m&40,(m&15)>=(q&15)&&(this.A[h]|=16),m>=q&&(this.A[h]|=1),0!=((k^q)&(q^m)&
128)&&(this.A[h]|=4),h++;for(c=256;c--;)for(g=0;1>=g;g++)for(a=0;1>=a;a++)for(h=0;1>=h;h++){k=this.lb;q=g<<8|h<<9|a<<10|c;m=g|h<<1|a<<4;this.c=c;this.a=m;var r=this.c,z=0,S=m&1,Ha=S;if(0!=(m&16)||9<(r&15))z|=6;if(1==S||159<r||143<r&&9<(r&15))z|=96,Ha=1;153<r&&(Ha=1);0!=(m&2)?I(this,z):G(this,z);m=this.a&254|Ha;m=Oc(this.c)?m&251|4:m&251;k[q]=this.c|m<<8}for(c=this.c=this.a=0;65>c;c++)this.J[c]=Z(1024),this.V[c]=Z(1024);for(c=0;8>c;c++)this.eb[c]=Z(1024);this.Ma==ba&&(this.Ma=Z(32),this.Ab=l);this.J[64]=
Z(1024);this.V[64]=Z(1024);this.ea=2;this.k=yc.bind(this,this);this.d=zc.bind(this,this.J);this.t=Cc.bind(this,this.J)}
na.prototype={reset:function(){this.b=this.Ya=this.a=this.Ha=this.wb=this.q=this.s=this.p=this.r=this.j=this.g=this.Za=this.ab=this.i=this.h=this.Wa=this.Xa=this.f=this.e=this.Sa=this.Ua=this.c=this.Ra=0;this.m=57328;this.sa=this.zb=this.n=0;this.Oa=this.R=this.Q=l;this.ta=0;this.ka=l},call:function(c){c?(n(this,this.b+2),this.b=this.t(this.b),this.n-=7):this.b+=2},page:function(c,g){var a,h;this.aa[c]=g;switch(c){case 0:if(0!=(g&8)){a=(g&4)<<2;for(h=32;48>h;h++)this.J[h]=xc(this.Ma[a]),this.V[h]=
xc(this.Ma[a]),a++;this.Ab=j}else{a=this.aa[3]%this.ea<<4;for(h=32;48>h;h++)this.J[h]=xc(this.Y[a++]),this.V[h]=Z(1024)}break;case 1:a=(g%this.ea<<4)+1;for(h=1;16>h;h++)this.J[h]=xc(this.Y[a++]);break;case 2:a=g%this.ea<<4;for(h=16;32>h;h++)this.J[h]=xc(this.Y[a++]);break;case 3:if(0==(this.aa[0]&8)){a=g%this.ea<<4;for(h=32;48>h;h++)this.J[h]=xc(this.Y[a++])}}}};function E(c){return c.d(c.b)}
function ya(c,g){g!=ba&&(c.Y=g);c.aa[0]=0;c.aa[1]=0;c.aa[2]=1;c.aa[3]=0;if(c.Y!=ba){c.ea=c.Y.length/16;for(var a=0;48>a;a++)c.J[a]=xc(c.Y[a&31]),c.V[a]=Z(1024);for(a=48;64>a;a++)c.J[a]=c.eb[a&7],c.V[a]=c.eb[a&7]}else c.ea=0}function Oc(c){var g=j,a;for(a=0;8>a;a++)0!=(c&1<<a)&&(g=!g);return g}function Yb(c,g){var a=c.j<<8|c.g,h=a-g-(c.a&1);c.a=(a^h^g)>>8&16|2|h>>16&1|h>>8&128|(0!=(h&65535)?0:64)|((g^a)&(a^h)&32768)>>13;c.j=h>>8&255;c.g=h&255}
function Zb(c,g){var a=c.j<<8|c.g,h=a+g+(c.a&1);c.a=(a^h^g)>>8&16|h>>16&1|h>>8&128|(0!=(h&65535)?0:64)|((g^a^32768)&(g^h)&32768)>>13;c.j=h>>8&255;c.g=h&255}function v(c,g,a){var h=g+a;c.a=c.a&196|(g^h^a)>>8&16|h>>16&1;return h&65535}function u(c,g){g=g-1&255;c.a=c.a&1|c.ga[g];return g}function t(c,g){g=g+1&255;c.a=c.a&1|c.ha[g];return g}function Xa(c){c.g=c.g-1&255;255==c.g&&(c.j=c.j-1&255)}function Ka(c){c.h=c.h-1&255;255==c.h&&(c.i=c.i-1&255)}
function C(c){c.e=c.e-1&255;255==c.e&&(c.f=c.f-1&255)}function Va(c){c.g=c.g+1&255;0==c.g&&(c.j=c.j+1&255)}function Ga(c){c.h=c.h+1&255;0==c.h&&(c.i=c.i+1&255)}function uc(c,g){c.s=g>>8;c.q=g&255}function Mb(c,g){c.r=g>>8;c.p=g&255}function Ea(c,g){c.j=g>>8;c.g=g&255}function Y(c){return c.s<<8|c.q}function T(c){return c.r<<8|c.p}function A(c){return c.j<<8|c.g}function D(c){return c.i<<8|c.h}function s(c){return c.f<<8|c.e}function L(c,g){c.a=c.A[c.c<<8|c.c-g&255]}
function K(c,g){var a=c.a&1,h=c.c-g-a&255;c.a=c.A[a<<16|c.c<<8|h];c.c=h}function I(c,g){var a=c.c-g&255;c.a=c.A[c.c<<8|a];c.c=a}function H(c,g){var a=c.a&1,h=c.c+g+a&255;c.a=c.B[a<<16|c.c<<8|h];c.c=h}function G(c,g){var a=c.c+g&255;c.a=c.B[c.c<<8|a];c.c=a}
function Nb(c,g){var a=g+E(c)&65535,h=c.d(++c.b);c.n-=Nc[h];switch(h){case 6:c.k(a,ob(c,c.d(a)));break;case 14:c.k(a,Fb(c,c.d(a)));break;case 22:c.k(a,M(c,c.d(a)));break;case 30:c.k(a,Gb(c,c.d(a)));break;case 38:c.k(a,Hb(c,c.d(a)));break;case 46:c.k(a,Ib(c,c.d(a)));break;case 54:c.k(a,Jb(c,c.d(a)));break;case 62:c.k(a,Kb(c,c.d(a)));break;case 70:N(c,c.d(a)&1);break;case 78:N(c,c.d(a)&2);break;case 86:N(c,c.d(a)&4);break;case 94:N(c,c.d(a)&8);break;case 102:N(c,c.d(a)&16);break;case 110:N(c,c.d(a)&
32);break;case 118:N(c,c.d(a)&64);break;case 126:N(c,c.d(a)&128);break;case 134:c.k(a,c.d(a)&-2);break;case 142:c.k(a,c.d(a)&-3);break;case 150:c.k(a,c.d(a)&-5);break;case 158:c.k(a,c.d(a)&-9);break;case 166:c.k(a,c.d(a)&-17);break;case 174:c.k(a,c.d(a)&-33);break;case 182:c.k(a,c.d(a)&-65);break;case 190:c.k(a,c.d(a)&-129);break;case 198:c.k(a,c.d(a)|1);break;case 206:c.k(a,c.d(a)|2);break;case 214:c.k(a,c.d(a)|4);break;case 222:c.k(a,c.d(a)|8);break;case 230:c.k(a,c.d(a)|16);break;case 238:c.k(a,
c.d(a)|32);break;case 246:c.k(a,c.d(a)|64);break;case 254:c.k(a,c.d(a)|128)}c.b++}function N(c,g){c.a=c.a&1|c.Aa[g]}function Kb(c,g){var a=g&1;g=g>>1&255;c.a=a|c.l[g];return g}function Ib(c,g){var a=g&1;g=g>>1|g&128;c.a=a|c.l[g];return g}function Jb(c,g){var a=(g&128)>>7;g=(g<<1|1)&255;c.a=a|c.l[g];return g}function Hb(c,g){var a=(g&128)>>7;g=g<<1&255;c.a=a|c.l[g];return g}function Gb(c,g){var a=g&1;g=(g>>1|c.a<<7)&255;c.a=a|c.l[g];return g}
function M(c,g){var a=(g&128)>>7;g=(g<<1|c.a&1)&255;c.a=a|c.l[g];return g}function Fb(c,g){var a=g&1;g=(g>>1|g<<7)&255;c.a=a|c.l[g];return g}function ob(c,g){var a=(g&128)>>7;g=(g<<1|g>>7)&255;c.a=a|c.l[g];return g}function cb(c,g){c.k(g,u(c,c.d(g)))}function ab(c,g){c.k(g,t(c,c.d(g)))}function mb(c,g,a){c.k(--c.m,g);c.k(--c.m,a)}function n(c,g){c.k(--c.m,g>>8);c.k(--c.m,g&255)}function db(c,g){g&&(c.b=c.t(c.m),c.m+=2,c.n-=6)}
function Fa(c,g){if(g){var a=E(c)+1;128<=a&&(a-=256);c.b+=a;c.n-=5}else c.b++}function lb(c,g){c.b=g?c.t(c.b):c.b+2};function ga(c){this.o=c;this.Nb=this.Mb=this.ja=this.u=this.w=0;this.Lb=this.Kb=l}
ga.prototype={reset:function(){this.ja=this.u=this.w=255;this.Ja=l},keydown:function(c){switch(c.keyCode){case 38:this.w&=-2;break;case 40:this.w&=-3;break;case 37:this.w&=-5;break;case 39:this.w&=-9;break;case 88:this.w&=-17;break;case 90:this.w&=-33;break;case 13:this.o.ca?this.o.Ja=j:this.ja&=-129;break;case 104:this.u&=-2;break;case 98:this.u&=-3;break;case 100:this.u&=-5;break;case 102:this.u&=-9;break;case 103:this.u&=-17;break;case 105:this.u&=-33;break;case 97:this.u&=-65;break;default:return}c.preventDefault()},
keyup:function(c){switch(c.keyCode){case 38:this.w|=1;break;case 40:this.w|=2;break;case 37:this.w|=4;break;case 39:this.w|=8;break;case 88:this.w|=16;break;case 90:this.w|=32;break;case 13:this.o.ca||(this.ja|=128);break;case 104:this.u|=1;break;case 98:this.u|=2;break;case 100:this.u|=4;break;case 102:this.u|=8;break;case 103:this.u|=16;break;case 105:this.u|=32;break;case 97:this.u|=64;break;default:return}c.preventDefault()}};var oa=Number.MIN_VALUE,Pc=[25,20,16,13,10,8,6,5,4,3,3,2,2,1,1,0];function ja(c){this.o=c;this.P=this.ob=0;this.H=Array(8);this.I=0;this.F=Array(4);this.M=Array(4);this.ia=Array(3);this.oa=16;this.X=32768;this.pa=Array(4)}
ja.prototype={write:function(c){0!=(c&128)?(this.I=c>>4&7,this.H[this.I]=this.H[this.I]&1008|c&15):this.H[this.I]=0==this.I||2==this.I||4==this.I?this.H[this.I]&15|(c&63)<<4:c&15;switch(this.I){case 0:case 2:case 4:0==this.H[this.I]&&(this.H[this.I]=1);break;case 6:this.oa=16<<(this.H[6]&3),this.X=32768}},update:function(c,g){for(var a=[],h=0,k=0;h<g;h++){for(k=0;3>k;k++)this.pa[k]=this.ia[k]!=oa?Pc[this.H[(k<<1)+1]]*this.ia[k]>>8:Pc[this.H[(k<<1)+1]]*this.M[k];this.pa[3]=Pc[this.H[7]]*(this.X&1)<<
1;k=this.pa[0]+this.pa[1]+this.pa[2]+this.pa[3];127<k?k=127:-128>k&&(k=-128);a[c+h]=k;this.P+=this.ob;var q=this.P>>8,m=q<<8;this.P-=m;this.F[0]-=q;this.F[1]-=q;this.F[2]-=q;this.F[3]=128==this.oa?this.F[2]:this.F[3]-q;for(k=0;3>k;k++){var r=this.F[k];if(0>=r){var z=this.H[k<<1];6<z?(this.ia[k]=(m-this.P+512*r<<8)*this.M[k]/(m+this.P),this.M[k]=-this.M[k]):(this.M[k]=1,this.ia[k]=oa);this.F[k]+=z*(q/z+1)}else this.ia[k]=oa}0>=this.F[3]&&(this.M[3]=-this.M[3],128!=this.oa&&(this.F[3]+=this.oa*(q/this.oa+
1)),1==this.M[3]&&(k=0,k=0!=(this.H[6]&4)?0!=(this.X&9)&&0!=(this.X&9^9)?1:0:this.X&1,this.X=this.X>>1|k<<15))}return a}};function ha(c){this.o=c;var g;this.jb=0;this.G=Array(16384);this.v=Array(96);for(g=0;96>g;g++)this.v[g]=255;this.z=Array(16);this.status=0;this.$=l;this.ra=this.la=this.fb=this.xa=this.location=this.Z=0;this.qa=Array(256);this.Hb=this.Ta=0;this.display=c.O.nb.data;this.Ia=Array(64);this.Pa=Array(256);this.mb=Array(16);this.ua=l;this.L=this.$a=this.Ga=0;this.S=l;this.ma=Array(192);for(g=0;192>g;g++)this.ma[g]=Array(25);this.Na=Array(512);this.wa=Array(512);for(c=this.da=this.na=0;512>c;c++)this.Na[c]=
Array(64)}
ha.prototype={reset:function(){var c;this.ua=l;var g,a,h;if(this.o.ca&&!this.ua)for(c=0;64>c;c++)g=c&3,a=c>>2&3,h=c>>4&3,this.Ia[c]=85*g|85*a<<8|85*h<<16,this.ua=j;else if(this.o.T&&!this.ua){for(c=0;256>c;c++)a=c&15,h=c>>4&15,this.Pa[c]=h<<12|h<<8|a<<4|a;for(c=0;16>c;c++)this.mb[c]=c<<20;this.ua=j}this.$=j;for(c=this.xa=this.status=this.ra=this.location=0;16>c;c++)this.z[c]=0;this.z[2]=14;this.z[5]=126;this.Hb=0;this.o.K.ba=l;this.S=j;this.na=512;this.da=-1;for(c=0;16384>c;c++)this.G[c]=0;for(c=
0;196608>c;c+=4)this.display[c]=0,this.display[c+1]=0,this.display[c+2]=0,this.display[c+3]=255}};function Qc(c){c.Ta=(c.z[2]&14)<<10;c.na=0;c.da=511;for(var g=0,a=c.wa.length;g<a;g++)c.wa[g]=j;c.L=(c.z[5]&-130)<<7;c.S=j};function fa(c){this.o=c;this.enable=ca();this.updateStatus=ca();this.Ib=ca();this.Bb=ca()}
"undefined"!=typeof $&&($.fn.Cb=function(c){function g(g){this.o=g;if("[object OperaMini]"==Object.prototype.toString.call(window.Ob))$(a).html('<div class="alert alert-error"><strong>Oh no!</strong> Your browser can\'t run this emulator. Try the latest version of Firefox, Google Chrome, Opera or Safari!</div>');else{var k=this;g=$("<div></div>");var q=$('<div class="controls"></div>'),m=Dc(["fullscreenEnabled","mozFullScreenEnabled","webkitCancelFullScreen"]),r=Dc(["requestAnimationFrame","msRequestAnimationFrame",
"mozRequestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame"],window),z;if(r)this.requestAnimationFrame=window[r].bind(window);else{var S=0;this.requestAnimationFrame=function(a){var c=wc(),g=Math.max(0,16-(c-S));window.setTimeout(function(){a(c+g)},g);S=c+g}}this.kb=l;this.ub=Dc(["hidden","mozHidden","webkitHidden","msHidden"]);this.screen=$('<canvas width=256 height=192 class="screen"></canvas>');this.Va=this.screen[0].getContext("2d");if(this.Va.getImageData){this.nb=this.Va.getImageData(0,
0,256,192);this.yb=$("<div></div>");this.fa=$("<select></select>");this.fa.change(function(){k.cb()});this.D={start:$('<input type="button" value="Stop" class="btn" disabled="disabled">'),xb:$('<input type="button" value="Restart" class="btn" disabled="disabled">'),ib:$('<input type="button" value="Enable sound" class="btn" disabled="disabled">'),zoom:$('<input type="button" value="Zoom in" class="btn">')};this.D.start.click(function(){k.o.va?(k.o.stop(),k.updateStatus("Paused"),k.D.start.attr("value",
"Start")):(k.o.start(),k.D.start.attr("value","Stop"))});this.D.xb.click(function(){""!=k.o.gb&&""!=k.o.hb&&vc(k.o,k.o.gb,k.o.hb)?(k.o.reset(),Qc(k.o.C),k.o.start()):$(this).attr("disabled","disabled")});this.D.ib.click(ca());this.D.zoom.click(function(){k.kb?(k.screen.animate({width:"256px",height:"192px"},function(){$(this).removeAttr("style")}),k.D.zoom.attr("value","Zoom in")):(k.screen.animate({width:"512px",height:"384px"}),k.D.zoom.attr("value","Zoom out"));k.kb=!k.kb});m&&(this.D.Jb=$('<input type="button" value="Go fullscreen" class="btn">').click(function(){var a=
k.screen[0];a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}));for(z in this.D)this.D.hasOwnProperty(z)&&this.D[z].appendTo(q);this.log=$('<div id="status"></div>');this.screen.appendTo(g);this.yb.appendTo(g);q.appendTo(g);this.log.appendTo(g);g.appendTo($(a));c!=aa&&this.Gb(c);$(document).bind("keydown",function(a){k.o.U.keydown(a)}).bind("keyup",function(a){k.o.U.keyup(a)})}else $(a).html('<div class="alert alert-error"><strong>Oh no!</strong> Your browser doesn\'t support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest version of Firefox, Google Chrome, Opera or Safari!</div>')}}
var a=this;g.prototype={reset:function(){this.screen[0].width=256;this.screen[0].height=192;this.log.text("")},Gb:function(a){var c,g,m,r,z=0;this.fa.children().remove();$("<option>Select a ROM...</option>").appendTo(this.fa);for(c in a){if(a.hasOwnProperty(c)){g=$("<optgroup></optgroup>").attr("label",c);m=a[c].length;for(r=0;r<m;r++)$("<option>"+a[c][r][0]+"</option>").attr("value",a[c][r][1]).appendTo(g);g.appendTo(this.fa)}z++}z&&this.fa.appendTo(this.yb)},cb:function(){var a=this;this.updateStatus("Downloading...");
$.ajax({url:escape(this.fa.val()),xhr:function(){var c=$.ajaxSettings.xhr();c.overrideMimeType!=aa&&c.overrideMimeType("text/plain; charset=x-user-defined");return a.xhr=c},complete:function(c,g){var m;"error"==g?a.updateStatus("The selected rom could not be loaded."):(m=c.responseText,vc(a.o,m,a.fa.val()),a.o.reset(),Qc(a.o.C),a.o.start(),a.enable(),a.D.start.removeAttr("disabled"))}})},enable:function(){this.D.xb.removeAttr("disabled");this.o.La?this.D.ib.attr("value","Disable sound"):this.D.ib.attr("value",
"Enable sound")},updateStatus:function(a){this.log.text(a)},Ib:ca(),Bb:function(){(!this.ub||!document[this.ub])&&this.Va.putImageData(this.nb,0,0)}};return g});function ma(c){this.o=c;this.C=c.C;this.ya=c.ya;this.U=c.U;this.sb=64;this.Fb=0;this.N=[]}ma.prototype={reset:function(){this.N=Array(2)}};
function P(c,g){if(c.o.T&&7>g)switch(g){case 0:return c.U.ja&191|c.sb;case 1:case 2:case 3:case 4:case 5:return 0;case 6:return 255}switch(g&193){case 64:var a;a:{a=c.C;if(0==a.jb){if(218<a.la){a=a.la-6;break a}}else if(242<a.la){a=a.la-57;break a}a=a.la}return a;case 65:return c.Fb;case 128:a=c.C;a.$=j;var h=a.fb;a.fb=a.G[a.location++&16383]&255;return h;case 129:return a=c.C,a.$=j,h=a.status,a.status=0,a.o.K.ba=l,h;case 192:return c.U.w;case 193:return c.U.u&63|c.N[0]|c.N[1]}return 255}
function O(c,g,a){if(!(c.o.T&&7>g))switch(g&193){case 1:c.N[0]=(a&32)<<1;c.N[1]=a&128;0==c.sb&&(c.N[0]=~c.N[0],c.N[1]=~c.N[1]);break;case 128:c=c.C;g=0;c.$=j;switch(c.xa){case 0:case 1:case 2:g=c.location&16383;if(a!=(c.G[g]&255)){if(g>=c.L&&g<c.L+64)c.S=j;else if(g>=c.L+128&&g<c.L+256)c.S=j;else{var h=g>>5;c.wa[h]=j;h<c.na&&(c.na=h);h>c.da&&(c.da=h)}c.G[g]=a}break;case 3:c.o.ca?(g=3*(c.location&31),c.v[g]=c.Ia[a&63]&255,c.v[g+1]=c.Ia[a&63]>>8&255,c.v[g+2]=c.Ia[a&63]>>16&255):c.o.T&&(g=3*((c.location&
63)>>1),0==(c.location&1)?(c.v[g]=c.Pa[a]&255,c.v[g+1]=c.Pa[a]>>8&255):c.v[g+2]=c.mb[a&15]>>16&255)}c.location++;break;case 129:c=c.C;if(c.$)c.$=l,c.Z=a,c.location=c.location&16128|a;else if(c.$=j,c.xa=a>>6&3,c.location=c.Z|a<<8,0==c.xa)c.fb=c.G[c.location++&16383]&255;else if(2==c.xa){a&=15;switch(a){case 1:0!=(c.status&128)&&0!=(c.Z&32)&&(c.o.K.ba=j);(c.Z&3)!=(c.z[a]&3)&&(c.S=j);break;case 2:c.Ta=(c.Z&14)<<10;break;case 5:g=c.L,c.L=(c.Z&-130)<<7,g!=c.L&&(c.S=j)}c.z[a]=c.Z}break;case 64:case 65:c.o.La&&
c.ya.write(a)}};window.JSSMS=ea;jQuery.fn.JSSMSUI=jQuery.fn.Cb;})();
