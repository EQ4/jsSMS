/*
 jsSMS - A Sega Master System/GameGear emulator in JavaScript
 Copyright (C) 2012  Guillaume Marty (https://github.com/gmarty)
 Based on JavaGear Copyright (c) 2002-2008 Chris White.

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
'use strict';var h=!0,i=null,o=!1;function p(){return function(){}};function r(a){this.Yb={ui:t};if("undefined"!=typeof a)for(var b in this.Yb)"undefined"!=typeof a[b]&&(this.Yb[b]=a[b]);this.ra=new u(this);this.ob=new a.ui(this);this.H=new v(this);this.Jb=new w(this);this.ports=new x(this);this.Q=new y(this);this.ob.updateStatus("Ready to load a ROM.")}
r.prototype={hb:o,vb:0,Va:0,Vb:0,Bb:0,cb:0,jb:o,Aa:h,pa:o,cc:o,bb:0,Lb:"",Mb:"",reset:function(){this.hd(this.H.Qb);this.cb=this.Vb;this.ra.reset();this.ob.reset();this.H.reset();this.ports.reset();this.Q.reset();this.Q.ac(i)},start:function(){var a=this;this.hb||(this.hb=h);this.Gc=setInterval(function(){a.frame()},17);this.Wc();this.Zb();this.Fc=setInterval(function(){a.Zb()},500)},stop:function(){clearInterval(this.Gc);clearInterval(this.Fc);this.hb=o},frame:function(){this.Ac()&&this.vc();this.bb++},
Ac:function(){var a;for(a=0;a<this.Va;a++)193==a?(this.Q.Nb(this.vb,8),this.H.gd(),this.Q.Nb(0,0)):this.Q.Nb(this.vb,0),this.H.Ia=a,0==this.cb&&192>a&&this.H.yc(a),this.H.Sc(a);this.jb&&(this.Q.Tc(),this.jb=o);return 0==this.cb--?(this.cb=this.Vb,h):o},fd:function(){this.Aa=h;this.pa=o;this.H.fb=0;this.H.Db=32},dd:function(){this.pa=h;this.Aa=o;this.H.fb=5;this.H.Db=27},hd:function(a){var b=0;0==a||this.pa?(this.Bb=60,this.Va=262,b=3579545):1==a&&(this.Bb=50,this.Va=313,b=3546893);this.vb=Math.round(b/
this.Bb/this.Va+1);this.H.Qb=a},vc:function(){this.ob.dc(this.H.display,[])},Zb:function(){var a=+new Date,b="Running";this.Hb&&(b+=": "+(this.bb/((a-this.Hb)/1E3)).toFixed(2)+" (/ "+(1E3/17).toFixed(2)+") FPS");this.ob.updateStatus(b);this.bb=0;this.Hb=a},Wc:function(){this.Hb=i;this.bb=0},$b:function(a,b){var c;c=".gg"===b.substr(-3).toLowerCase()?2:1;var d=a.length;1==c?this.fd():2==c&&this.dd();if(1024>=d)return o;c=this.Ib(a,d);if(c==i)return o;this.Q.ac(c);this.Lb=a;this.Mb=b;return h},Ib:function(a,
b){0!=b%1024&&(a=a.substr(512),b-=512);var c,d,e=Math.round(b/1024),f=Array(e);for(c=0;c<e;c++){f[c]=Array(1024);for(d=0;1024>d;d++)f[c][d]=a.charCodeAt(1024*c+d)&255}return f},Uc:function(){return""!==this.Lb&&""!==this.Mb?this.$b(this.Lb,this.Mb):o}};function z(a){if(void 0===a)return[];for(var b=a.length,c=Array(b);b--;)"undefined"!=typeof a[b]&&(c[b]=a[b]);return c}function A(a){var b=o;a.some(function(a){return a in document?(b=a,h):o});return b};var C=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,19,
10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],D=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,
8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],E=[4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,14,20,10,8,8,11,4,4,15,20,10,8,8,11,4,4,4,4,4,23,23,19,4,4,15,4,4,4,4,4,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,4,19,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,
19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,14,4,23,4,15,4,4,4,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,10,4,4,4,4,4,4],F=[0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,
0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0],G=[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,8,12,15,20,8,14,8,8,12,12,
15,20,8,14,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];
function y(a){this.r=a;this.port=a.ports;this.Ra=this.o=this.b=0;this.na=this.Ma=this.Ha=this.ma=this.la=o;this.q=this.Ab=this.a=this.gb=this.v=this.t=this.u=this.s=this.Gb=this.Cb=this.g=this.j=this.zb=this.wb=this.h=this.i=this.ub=this.sb=this.e=this.f=this.rb=this.c=this.Sa=0;this.ta=[];this.Kb=Array(8);this.mb=i;this.za=Array(4);this.Da=0;this.Ca=Array(65);this.R=Array(65);this.pb=[];this.Za=[];this.n=[];this.xa=[];this.wa=[];this.G=[];this.F=[];this.Na=[];this.Jc();this.Ic();this.Kc()}
y.prototype={reset:function(){this.b=this.Ab=this.a=this.gb=this.t=this.v=this.s=this.u=this.j=this.g=this.Cb=this.Gb=this.i=this.h=this.wb=this.zb=this.f=this.e=this.sb=this.ub=this.c=this.rb=0;this.o=57328;this.Ra=this.q=0;this.Ma=this.ma=this.la=o;this.Sa=0;this.Ha=o},Nb:function(a,b){for(this.q+=a;this.q>b;){this.na&&this.Rc();var c=this.d(this.b++);this.Ma=o;this.q-=C[c];switch(c){case 1:this.e=this.d(this.b++);this.f=this.d(this.b++);break;case 2:this.k(this.N(),this.c);break;case 3:this.Oc();
break;case 4:this.f=this.W(this.f);break;case 5:this.f=this.I(this.f);break;case 6:this.f=this.d(this.b++);break;case 7:this.Yc();break;case 8:this.Bc();break;case 9:this.Xa(this.T(this.l(),this.N()));break;case 10:this.c=this.d(this.N());break;case 11:this.aa();break;case 12:this.e=this.W(this.e);break;case 13:this.e=this.I(this.e);break;case 14:this.e=this.d(this.b++);break;case 15:this.$c();break;case 16:this.f=this.f-1&255;this.Ua(0!=this.f);break;case 17:this.h=this.d(this.b++);this.i=this.d(this.b++);
break;case 18:this.k(this.Y(),this.c);break;case 19:this.Eb();break;case 20:this.i=this.W(this.i);break;case 21:this.i=this.I(this.i);break;case 22:this.i=this.d(this.b++);break;case 23:this.Xc();break;case 24:this.b+=this.p()+1;break;case 25:this.Xa(this.T(this.l(),this.Y()));break;case 26:this.c=this.d(this.Y());break;case 27:this.xb();break;case 28:this.h=this.W(this.h);break;case 29:this.h=this.I(this.h);break;case 30:this.h=this.d(this.b++);break;case 31:this.Zc();break;case 32:this.Ua(0==(this.a&
64));break;case 33:this.g=this.d(this.b++);this.j=this.d(this.b++);break;case 34:c=this.w(this.b);this.k(c,this.g);this.k(++c,this.j);this.b+=2;break;case 35:this.ca();break;case 36:this.j=this.W(this.j);break;case 37:this.j=this.I(this.j);break;case 38:this.j=this.d(this.b++);break;case 39:this.kc();break;case 40:this.Ua(0!=(this.a&64));break;case 41:this.Xa(this.T(this.l(),this.l()));break;case 42:c=this.w(this.b);this.g=this.d(c);this.j=this.d(c+1);this.b+=2;break;case 43:this.ba();break;case 44:this.g=
this.W(this.g);break;case 45:this.g=this.I(this.g);break;case 46:this.g=this.d(this.b++);break;case 47:this.ic();break;case 48:this.Ua(0==(this.a&1));break;case 49:this.o=this.w(this.b);this.b+=2;break;case 50:this.k(this.w(this.b),this.c);this.b+=2;break;case 51:this.o++;break;case 52:this.Fb(this.l());break;case 53:this.yb(this.l());break;case 54:this.k(this.l(),this.d(this.b++));break;case 55:this.a|=1;this.a&=-3;this.a&=-17;break;case 56:this.Ua(0!=(this.a&1));break;case 57:this.Xa(this.T(this.l(),
this.o));break;case 58:this.c=this.d(this.w(this.b));this.b+=2;break;case 59:this.o--;break;case 60:this.c=this.W(this.c);break;case 61:this.c=this.I(this.c);break;case 62:this.c=this.d(this.b++);break;case 63:this.fc();break;case 65:this.f=this.e;break;case 66:this.f=this.i;break;case 67:this.f=this.h;break;case 68:this.f=this.j;break;case 69:this.f=this.g;break;case 70:this.f=this.d(this.l());break;case 71:this.f=this.c;break;case 72:this.e=this.f;break;case 74:this.e=this.i;break;case 75:this.e=
this.h;break;case 76:this.e=this.j;break;case 77:this.e=this.g;break;case 78:this.e=this.d(this.l());break;case 79:this.e=this.c;break;case 80:this.i=this.f;break;case 81:this.i=this.e;break;case 83:this.i=this.h;break;case 84:this.i=this.j;break;case 85:this.i=this.g;break;case 86:this.i=this.d(this.l());break;case 87:this.i=this.c;break;case 88:this.h=this.f;break;case 89:this.h=this.e;break;case 90:this.h=this.i;break;case 92:this.h=this.j;break;case 93:this.h=this.g;break;case 94:this.h=this.d(this.l());
break;case 95:this.h=this.c;break;case 96:this.j=this.f;break;case 97:this.j=this.e;break;case 98:this.j=this.i;break;case 99:this.j=this.h;break;case 101:this.j=this.g;break;case 102:this.j=this.d(this.l());break;case 103:this.j=this.c;break;case 104:this.g=this.f;break;case 105:this.g=this.e;break;case 106:this.g=this.i;break;case 107:this.g=this.h;break;case 108:this.g=this.j;break;case 110:this.g=this.d(this.l());break;case 111:this.g=this.c;break;case 112:this.k(this.l(),this.f);break;case 113:this.k(this.l(),
this.e);break;case 114:this.k(this.l(),this.i);break;case 115:this.k(this.l(),this.h);break;case 116:this.k(this.l(),this.j);break;case 117:this.k(this.l(),this.g);break;case 118:this.Ha=h;this.b--;break;case 119:this.k(this.l(),this.c);break;case 120:this.c=this.f;break;case 121:this.c=this.e;break;case 122:this.c=this.i;break;case 123:this.c=this.h;break;case 124:this.c=this.j;break;case 125:this.c=this.g;break;case 126:this.c=this.d(this.l());break;case 128:this.L(this.f);break;case 129:this.L(this.e);
break;case 130:this.L(this.i);break;case 131:this.L(this.h);break;case 132:this.L(this.j);break;case 133:this.L(this.g);break;case 134:this.L(this.d(this.l()));break;case 135:this.L(this.c);break;case 136:this.M(this.f);break;case 137:this.M(this.e);break;case 138:this.M(this.i);break;case 139:this.M(this.h);break;case 140:this.M(this.j);break;case 141:this.M(this.g);break;case 142:this.M(this.d(this.l()));break;case 143:this.M(this.c);break;case 144:this.K(this.f);break;case 145:this.K(this.e);break;
case 146:this.K(this.i);break;case 147:this.K(this.h);break;case 148:this.K(this.j);break;case 149:this.K(this.g);break;case 150:this.K(this.d(this.l()));break;case 151:this.K(this.c);break;case 152:this.O(this.f);break;case 153:this.O(this.e);break;case 154:this.O(this.i);break;case 155:this.O(this.h);break;case 156:this.O(this.j);break;case 157:this.O(this.g);break;case 158:this.O(this.d(this.l()));break;case 159:this.O(this.c);break;case 160:this.a=this.n[this.c&=this.f]|16;break;case 161:this.a=
this.n[this.c&=this.e]|16;break;case 162:this.a=this.n[this.c&=this.i]|16;break;case 163:this.a=this.n[this.c&=this.h]|16;break;case 164:this.a=this.n[this.c&=this.j]|16;break;case 165:this.a=this.n[this.c&=this.g]|16;break;case 166:this.a=this.n[this.c&=this.d(this.l())]|16;break;case 167:this.a=this.n[this.c]|16;break;case 168:this.a=this.n[this.c^=this.f];break;case 169:this.a=this.n[this.c^=this.e];break;case 170:this.a=this.n[this.c^=this.i];break;case 171:this.a=this.n[this.c^=this.h];break;
case 172:this.a=this.n[this.c^=this.j];break;case 173:this.a=this.n[this.c^=this.g];break;case 174:this.a=this.n[this.c^=this.d(this.l())];break;case 175:this.a=this.n[this.c=0];break;case 176:this.a=this.n[this.c|=this.f];break;case 177:this.a=this.n[this.c|=this.e];break;case 178:this.a=this.n[this.c|=this.i];break;case 179:this.a=this.n[this.c|=this.h];break;case 180:this.a=this.n[this.c|=this.j];break;case 181:this.a=this.n[this.c|=this.g];break;case 182:this.a=this.n[this.c|=this.d(this.l())];
break;case 183:this.a=this.n[this.c];break;case 184:this.J(this.f);break;case 185:this.J(this.e);break;case 186:this.J(this.i);break;case 187:this.J(this.h);break;case 188:this.J(this.j);break;case 189:this.J(this.g);break;case 190:this.J(this.d(this.l()));break;case 191:this.J(this.c);break;case 192:this.sa(0==(this.a&64));break;case 193:this.ad(this.w(this.o));this.o+=2;break;case 194:this.qa(0==(this.a&64));break;case 195:this.b=this.w(this.b);break;case 196:this.call(0==(this.a&64));break;case 197:this.push(this.f,
this.e);break;case 198:this.L(this.d(this.b++));break;case 199:this.push(this.b);this.b=0;break;case 200:this.sa(0!=(this.a&64));break;case 201:this.b=this.w(this.o);this.o+=2;break;case 202:this.qa(0!=(this.a&64));break;case 203:this.rc(this.d(this.b++));break;case 204:this.call(0!=(this.a&64));break;case 205:this.push(this.b+2);this.b=this.w(this.b);break;case 206:this.M(this.d(this.b++));break;case 207:this.push(this.b);this.b=8;break;case 208:this.sa(0==(this.a&1));break;case 209:this.bd(this.w(this.o));
this.o+=2;break;case 210:this.qa(0==(this.a&1));break;case 211:this.port.S(this.d(this.b++),this.c);break;case 212:this.call(0==(this.a&1));break;case 213:this.push(this.i,this.h);break;case 214:this.K(this.d(this.b++));break;case 215:this.push(this.b);this.b=16;break;case 216:this.sa(0!=(this.a&1));break;case 217:this.Cc();this.Dc();this.Ec();break;case 218:this.qa(0!=(this.a&1));break;case 219:this.c=this.port.V(this.d(this.b++));break;case 220:this.call(0!=(this.a&1));break;case 221:this.tc(this.d(this.b++));
break;case 222:this.O(this.d(this.b++));break;case 223:this.push(this.b);this.b=24;break;case 224:this.sa(0==(this.a&4));break;case 225:this.Xa(this.w(this.o));this.o+=2;break;case 226:this.qa(0==(this.a&4));break;case 227:c=this.j;this.j=this.d(this.o+1);this.k(this.o+1,c);c=this.g;this.g=this.d(this.o);this.k(this.o,c);break;case 228:this.call(0==(this.a&4));break;case 229:this.push(this.j,this.g);break;case 230:this.a=this.n[this.c&=this.d(this.b++)]|16;break;case 231:this.push(this.b);this.b=
32;break;case 232:this.sa(0!=(this.a&4));break;case 233:this.b=this.l();break;case 234:this.qa(0!=(this.a&4));break;case 235:c=this.i;this.i=this.j;this.j=c;c=this.h;this.h=this.g;this.g=c;break;case 236:this.call(0!=(this.a&4));break;case 237:this.sc(this.d(this.b));break;case 238:this.a=this.n[this.c^=this.d(this.b++)];break;case 239:this.push(this.b);this.b=40;break;case 240:this.sa(0==(this.a&128));break;case 241:this.a=this.d(this.o++);this.c=this.d(this.o++);break;case 242:this.qa(0==(this.a&
128));break;case 243:this.la=this.ma=o;this.Ma=h;break;case 244:this.call(0==(this.a&128));break;case 245:this.push(this.c,this.a);break;case 246:this.a=this.n[this.c|=this.d(this.b++)];break;case 247:this.push(this.b);this.b=48;break;case 248:this.sa(0!=(this.a&128));break;case 249:this.o=this.l();break;case 250:this.qa(0!=(this.a&128));break;case 251:this.la=this.ma=this.Ma=h;break;case 252:this.call(0!=(this.a&128));break;case 253:this.uc(this.d(this.b++));break;case 254:this.J(this.d(this.b++));
break;case 255:this.push(this.b),this.b=56}}},Tc:function(){this.ma=this.la;this.la=o;this.Ha&&(this.b++,this.Ha=o);this.push(this.b);this.b=102;this.q-=11},Rc:function(){this.la&&!this.Ma&&((this.Ha&&(this.b++,this.Ha=o),this.na=this.la=this.ma=o,this.push(this.b),0==this.Ra)?(this.b=0==this.Sa||255==this.Sa?56:this.Sa,this.q-=13):1==this.Ra?(this.b=56,this.q-=13):(this.b=this.w((this.gb<<8)+this.Sa),this.q-=19))},qa:function(a){this.b=a?this.w(this.b):this.b+2},Ua:function(a){a?(a=this.p()+1,this.b+=
128>a?a:a-256,this.q-=5):this.b++},call:function(a){a?(this.push(this.b+2),this.b=this.w(this.b),this.q-=7):this.b+=2},sa:function(a){a&&(this.b=this.w(this.o),this.o+=2,this.q-=6)},push:function(a,b){"undefined"===typeof b?(this.k(--this.o,a>>8),this.k(--this.o,a&255)):(this.k(--this.o,a),this.k(--this.o,b))},Fb:function(a){this.k(a,this.W(this.d(a)))},yb:function(a){this.k(a,this.I(this.d(a)))},fc:function(){0!=(this.a&1)?(this.a&=-2,this.a|=16):(this.a|=1,this.a&=-17);this.a&=-3},kc:function(){var a=
this.pb[this.c|(this.a&1)<<8|(this.a&2)<<8|(this.a&16)<<6];this.c=a&255;this.a=this.a&2|a>>8},rc:function(a){this.q-=D[a];switch(a){case 0:this.f=this.ea(this.f);break;case 1:this.e=this.ea(this.e);break;case 2:this.i=this.ea(this.i);break;case 3:this.h=this.ea(this.h);break;case 4:this.j=this.ea(this.j);break;case 5:this.g=this.ea(this.g);break;case 6:this.k(this.l(),this.ea(this.d(this.l())));break;case 7:this.c=this.ea(this.c);break;case 8:this.f=this.ga(this.f);break;case 9:this.e=this.ga(this.e);
break;case 10:this.i=this.ga(this.i);break;case 11:this.h=this.ga(this.h);break;case 12:this.j=this.ga(this.j);break;case 13:this.g=this.ga(this.g);break;case 14:this.k(this.l(),this.ga(this.d(this.l())));break;case 15:this.c=this.ga(this.c);break;case 16:this.f=this.Z(this.f);break;case 17:this.e=this.Z(this.e);break;case 18:this.i=this.Z(this.i);break;case 19:this.h=this.Z(this.h);break;case 20:this.j=this.Z(this.j);break;case 21:this.g=this.Z(this.g);break;case 22:this.k(this.l(),this.Z(this.d(this.l())));
break;case 23:this.c=this.Z(this.c);break;case 24:this.f=this.fa(this.f);break;case 25:this.e=this.fa(this.e);break;case 26:this.i=this.fa(this.i);break;case 27:this.h=this.fa(this.h);break;case 28:this.j=this.fa(this.j);break;case 29:this.g=this.fa(this.g);break;case 30:this.k(this.l(),this.fa(this.d(this.l())));break;case 31:this.c=this.fa(this.c);break;case 32:this.f=this.ha(this.f);break;case 33:this.e=this.ha(this.e);break;case 34:this.i=this.ha(this.i);break;case 35:this.h=this.ha(this.h);break;
case 36:this.j=this.ha(this.j);break;case 37:this.g=this.ha(this.g);break;case 38:this.k(this.l(),this.ha(this.d(this.l())));break;case 39:this.c=this.ha(this.c);break;case 40:this.f=this.ja(this.f);break;case 41:this.e=this.ja(this.e);break;case 42:this.i=this.ja(this.i);break;case 43:this.h=this.ja(this.h);break;case 44:this.j=this.ja(this.j);break;case 45:this.g=this.ja(this.g);break;case 46:this.k(this.l(),this.ja(this.d(this.l())));break;case 47:this.c=this.ja(this.c);break;case 48:this.f=this.ia(this.f);
break;case 49:this.e=this.ia(this.e);break;case 50:this.i=this.ia(this.i);break;case 51:this.h=this.ia(this.h);break;case 52:this.j=this.ia(this.j);break;case 53:this.g=this.ia(this.g);break;case 54:this.k(this.l(),this.ia(this.d(this.l())));break;case 55:this.c=this.ia(this.c);break;case 56:this.f=this.va(this.f);break;case 57:this.e=this.va(this.e);break;case 58:this.i=this.va(this.i);break;case 59:this.h=this.va(this.h);break;case 60:this.j=this.va(this.j);break;case 61:this.g=this.Z(this.g);break;
case 62:this.k(this.l(),this.va(this.d(this.l())));break;case 63:this.c=this.va(this.c);break;case 64:this.m(this.f&1);break;case 65:this.m(this.e&1);break;case 66:this.m(this.i&1);break;case 67:this.m(this.h&1);break;case 68:this.m(this.j&1);break;case 69:this.m(this.g&1);break;case 70:this.m(this.d(this.l())&1);break;case 71:this.m(this.c&1);break;case 72:this.m(this.f&2);break;case 73:this.m(this.e&2);break;case 74:this.m(this.i&2);break;case 75:this.m(this.h&2);break;case 76:this.m(this.j&2);
break;case 77:this.m(this.g&2);break;case 78:this.m(this.d(this.l())&2);break;case 79:this.m(this.c&2);break;case 80:this.m(this.f&4);break;case 81:this.m(this.e&4);break;case 82:this.m(this.i&4);break;case 83:this.m(this.h&4);break;case 84:this.m(this.j&4);break;case 85:this.m(this.g&4);break;case 86:this.m(this.d(this.l())&4);break;case 87:this.m(this.c&4);break;case 88:this.m(this.f&8);break;case 89:this.m(this.e&8);break;case 90:this.m(this.i&8);break;case 91:this.m(this.h&8);break;case 92:this.m(this.j&
8);break;case 93:this.m(this.g&8);break;case 94:this.m(this.d(this.l())&8);break;case 95:this.m(this.c&8);break;case 96:this.m(this.f&16);break;case 97:this.m(this.e&16);break;case 98:this.m(this.i&16);break;case 99:this.m(this.h&16);break;case 100:this.m(this.j&16);break;case 101:this.m(this.g&16);break;case 102:this.m(this.d(this.l())&16);break;case 103:this.m(this.c&16);break;case 104:this.m(this.f&32);break;case 105:this.m(this.e&32);break;case 106:this.m(this.i&32);break;case 107:this.m(this.h&
32);break;case 108:this.m(this.j&32);break;case 109:this.m(this.g&32);break;case 110:this.m(this.d(this.l())&32);break;case 111:this.m(this.c&32);break;case 112:this.m(this.f&64);break;case 113:this.m(this.e&64);break;case 114:this.m(this.i&64);break;case 115:this.m(this.h&64);break;case 116:this.m(this.j&64);break;case 117:this.m(this.g&64);break;case 118:this.m(this.d(this.l())&64);break;case 119:this.m(this.c&64);break;case 120:this.m(this.f&128);break;case 121:this.m(this.e&128);break;case 122:this.m(this.i&
128);break;case 123:this.m(this.h&128);break;case 124:this.m(this.j&128);break;case 125:this.m(this.g&128);break;case 126:this.m(this.d(this.l())&128);break;case 127:this.m(this.c&128);break;case 128:this.f&=-2;break;case 129:this.e&=-2;break;case 130:this.i&=-2;break;case 131:this.h&=-2;break;case 132:this.j&=-2;break;case 133:this.g&=-2;break;case 134:this.k(this.l(),this.d(this.l())&-2);break;case 135:this.c&=-2;break;case 136:this.f&=-3;break;case 137:this.e&=-3;break;case 138:this.i&=-3;break;
case 139:this.h&=-3;break;case 140:this.j&=-3;break;case 141:this.g&=-3;break;case 142:this.k(this.l(),this.d(this.l())&-3);break;case 143:this.c&=-3;break;case 144:this.f&=-5;break;case 145:this.e&=-5;break;case 146:this.i&=-5;break;case 147:this.h&=-5;break;case 148:this.j&=-5;break;case 149:this.g&=-5;break;case 150:this.k(this.l(),this.d(this.l())&-5);break;case 151:this.c&=-5;break;case 152:this.f&=-9;break;case 153:this.e&=-9;break;case 154:this.i&=-9;break;case 155:this.h&=-9;break;case 156:this.j&=
-9;break;case 157:this.g&=-9;break;case 158:this.k(this.l(),this.d(this.l())&-9);break;case 159:this.c&=-9;break;case 160:this.f&=-17;break;case 161:this.e&=-17;break;case 162:this.i&=-17;break;case 163:this.h&=-17;break;case 164:this.j&=-17;break;case 165:this.g&=-17;break;case 166:this.k(this.l(),this.d(this.l())&-17);break;case 167:this.c&=-17;break;case 168:this.f&=-33;break;case 169:this.e&=-33;break;case 170:this.i&=-33;break;case 171:this.h&=-33;break;case 172:this.j&=-33;break;case 173:this.g&=
-33;break;case 174:this.k(this.l(),this.d(this.l())&-33);break;case 175:this.c&=-33;break;case 176:this.f&=-65;break;case 177:this.e&=-65;break;case 178:this.i&=-65;break;case 179:this.h&=-65;break;case 180:this.j&=-65;break;case 181:this.g&=-65;break;case 182:this.k(this.l(),this.d(this.l())&-65);break;case 183:this.c&=-65;break;case 184:this.f&=-129;break;case 185:this.e&=-129;break;case 186:this.i&=-129;break;case 187:this.h&=-129;break;case 188:this.j&=-129;break;case 189:this.g&=-129;break;case 190:this.k(this.l(),
this.d(this.l())&-129);break;case 191:this.c&=-129;break;case 192:this.f|=1;break;case 193:this.e|=1;break;case 194:this.i|=1;break;case 195:this.h|=1;break;case 196:this.j|=1;break;case 197:this.g|=1;break;case 198:this.k(this.l(),this.d(this.l())|1);break;case 199:this.c|=1;break;case 200:this.f|=2;break;case 201:this.e|=2;break;case 202:this.i|=2;break;case 203:this.h|=2;break;case 204:this.j|=2;break;case 205:this.g|=2;break;case 206:this.k(this.l(),this.d(this.l())|2);break;case 207:this.c|=
2;break;case 208:this.f|=4;break;case 209:this.e|=4;break;case 210:this.i|=4;break;case 211:this.h|=4;break;case 212:this.j|=4;break;case 213:this.g|=4;break;case 214:this.k(this.l(),this.d(this.l())|4);break;case 215:this.c|=4;break;case 216:this.f|=8;break;case 217:this.e|=8;break;case 218:this.i|=8;break;case 219:this.h|=8;break;case 220:this.j|=8;break;case 221:this.g|=8;break;case 222:this.k(this.l(),this.d(this.l())|8);break;case 223:this.c|=8;break;case 224:this.f|=16;break;case 225:this.e|=
16;break;case 226:this.i|=16;break;case 227:this.h|=16;break;case 228:this.j|=16;break;case 229:this.g|=16;break;case 230:this.k(this.l(),this.d(this.l())|16);break;case 231:this.c|=16;break;case 232:this.f|=32;break;case 233:this.e|=32;break;case 234:this.i|=32;break;case 235:this.h|=32;break;case 236:this.j|=32;break;case 237:this.g|=32;break;case 238:this.k(this.l(),this.d(this.l())|32);break;case 239:this.c|=32;break;case 240:this.f|=64;break;case 241:this.e|=64;break;case 242:this.i|=64;break;
case 243:this.h|=64;break;case 244:this.j|=64;break;case 245:this.g|=64;break;case 246:this.k(this.l(),this.d(this.l())|64);break;case 247:this.c|=64;break;case 248:this.f|=128;break;case 249:this.e|=128;break;case 250:this.i|=128;break;case 251:this.h|=128;break;case 252:this.j|=128;break;case 253:this.g|=128;break;case 254:this.k(this.l(),this.d(this.l())|128);break;case 255:this.c|=128}},ea:function(a){var b=(a&128)>>7,a=(a<<1|a>>7)&255;this.a=b|this.n[a];return a},ga:function(a){var b=a&1,a=(a>>
1|a<<7)&255;this.a=b|this.n[a];return a},Z:function(a){var b=(a&128)>>7,a=(a<<1|this.a&1)&255;this.a=b|this.n[a];return a},fa:function(a){var b=a&1,a=(a>>1|this.a<<7)&255;this.a=b|this.n[a];return a},ha:function(a){var b=(a&128)>>7,a=a<<1&255;this.a=b|this.n[a];return a},ia:function(a){var b=(a&128)>>7,a=(a<<1|1)&255;this.a=b|this.n[a];return a},ja:function(a){var b=a&1,a=a>>1|a&128;this.a=b|this.n[a];return a},va:function(a){var b=a&1,a=a>>1&255;this.a=b|this.n[a];return a},m:function(a){this.a=
this.a&1|this.Na[a]},tc:function(a){this.q-=E[a];switch(a){case 9:this.Ea(this.T(this.z(),this.N()));break;case 25:this.Ea(this.T(this.z(),this.Y()));break;case 33:this.Ea(this.w(this.b));this.b+=2;break;case 34:a=this.w(this.b);this.k(a++,this.s);this.k(a,this.u);this.b+=2;break;case 35:this.Pc();break;case 36:this.u=this.W(this.u);break;case 37:this.u=this.I(this.u);break;case 38:this.u=this.d(this.b++);break;case 41:this.Ea(this.T(this.z(),this.z()));break;case 42:a=this.w(this.b);this.s=this.d(a);
this.u=this.d(++a);this.b+=2;break;case 43:this.nc();break;case 44:this.s=this.W(this.s);break;case 45:this.s=this.I(this.s);break;case 46:this.s=this.d(this.b++);break;case 52:this.Fb(this.z()+this.p());this.b++;break;case 53:this.yb(this.z()+this.p());this.b++;break;case 54:this.k(this.z()+this.p(),this.d(++this.b));this.b++;break;case 57:this.Ea(this.T(this.z(),this.o));break;case 68:this.f=this.u;break;case 69:this.f=this.s;break;case 70:this.f=this.d(this.z()+this.p());this.b++;break;case 76:this.e=
this.u;break;case 77:this.e=this.s;break;case 78:this.e=this.d(this.z()+this.p());this.b++;break;case 84:this.i=this.u;break;case 85:this.i=this.s;break;case 86:this.i=this.d(this.z()+this.p());this.b++;break;case 92:this.h=this.u;break;case 93:this.h=this.s;break;case 94:this.h=this.d(this.z()+this.p());this.b++;break;case 96:this.u=this.f;break;case 97:this.u=this.e;break;case 98:this.u=this.i;break;case 99:this.u=this.h;break;case 100:break;case 101:this.u=this.s;break;case 102:this.j=this.d(this.z()+
this.p());this.b++;break;case 103:this.u=this.c;break;case 104:this.s=this.f;break;case 105:this.s=this.e;break;case 106:this.s=this.i;break;case 107:this.s=this.h;break;case 108:this.s=this.u;break;case 109:break;case 110:this.g=this.d(this.z()+this.p());this.b++;break;case 111:this.s=this.c;break;case 112:this.k(this.z()+this.p(),this.f);this.b++;break;case 113:this.k(this.z()+this.p(),this.e);this.b++;break;case 114:this.k(this.z()+this.p(),this.i);this.b++;break;case 115:this.k(this.z()+this.p(),
this.h);this.b++;break;case 116:this.k(this.z()+this.p(),this.j);this.b++;break;case 117:this.k(this.z()+this.p(),this.g);this.b++;break;case 119:this.k(this.z()+this.p(),this.c);this.b++;break;case 124:this.c=this.u;break;case 125:this.c=this.s;break;case 126:this.c=this.d(this.z()+this.p());this.b++;break;case 132:this.L(this.u);break;case 133:this.L(this.s);break;case 134:this.L(this.d(this.z()+this.p()));this.b++;break;case 140:this.M(this.u);break;case 141:this.M(this.s);break;case 142:this.M(this.d(this.z()+
this.p()));this.b++;break;case 148:this.K(this.u);break;case 149:this.K(this.s);break;case 150:this.K(this.d(this.z()+this.p()));this.b++;break;case 156:this.O(this.u);break;case 157:this.O(this.s);break;case 158:this.O(this.d(this.z()+this.p()));this.b++;break;case 164:this.a=this.n[this.c&=this.u]|16;break;case 165:this.a=this.n[this.c&=this.s]|16;break;case 166:this.a=this.n[this.c&=this.d(this.z()+this.p())]|16;this.b++;break;case 172:this.a=this.n[this.c^=this.u];break;case 173:this.a=this.n[this.c^=
this.s];break;case 174:this.a=this.n[this.c^=this.d(this.z()+this.p())];this.b++;break;case 180:this.a=this.n[this.c|=this.u];break;case 181:this.a=this.n[this.c|=this.s];break;case 182:this.a=this.n[this.c|=this.d(this.z()+this.p())];this.b++;break;case 188:this.J(this.u);break;case 189:this.J(this.s);break;case 190:this.J(this.d(this.z()+this.p()));this.b++;break;case 203:this.Sb(this.z());break;case 225:this.Ea(this.w(this.o));this.o+=2;break;case 227:a=this.z();this.Ea(this.w(this.o));this.k(this.o,
a&255);this.k(this.o+1,a>>8);break;case 229:this.push(this.u,this.s);break;case 233:this.b=this.z();break;case 249:this.o=this.z();break;default:this.b--}},uc:function(a){this.q-=E[a];switch(a){case 9:this.Fa(this.T(this.A(),this.N()));break;case 25:this.Fa(this.T(this.A(),this.Y()));break;case 33:this.Fa(this.w(this.b));this.b+=2;break;case 34:a=this.w(this.b);this.k(a++,this.t);this.k(a,this.v);this.b+=2;break;case 35:this.Qc();break;case 36:this.v=this.W(this.v);break;case 37:this.v=this.I(this.v);
break;case 38:this.v=this.d(this.b++);break;case 41:this.Fa(this.T(this.A(),this.A()));break;case 42:a=this.w(this.b);this.t=this.d(a);this.v=this.d(++a);this.b+=2;break;case 43:this.oc();break;case 44:this.t=this.W(this.t);break;case 45:this.t=this.I(this.t);break;case 46:this.t=this.d(this.b++);break;case 52:this.Fb(this.A()+this.p());this.b++;break;case 53:this.yb(this.A()+this.p());this.b++;break;case 54:this.k(this.A()+this.p(),this.d(++this.b));this.b++;break;case 57:this.Fa(this.T(this.A(),
this.o));break;case 68:this.f=this.v;break;case 69:this.f=this.t;break;case 70:this.f=this.d(this.A()+this.p());this.b++;break;case 76:this.e=this.v;break;case 77:this.e=this.t;break;case 78:this.e=this.d(this.A()+this.p());this.b++;break;case 84:this.i=this.v;break;case 85:this.i=this.t;break;case 86:this.i=this.d(this.A()+this.p());this.b++;break;case 92:this.h=this.v;break;case 93:this.h=this.t;break;case 94:this.h=this.d(this.A()+this.p());this.b++;break;case 96:this.v=this.f;break;case 97:this.v=
this.e;break;case 98:this.v=this.i;break;case 99:this.v=this.h;break;case 100:break;case 101:this.v=this.t;break;case 102:this.j=this.d(this.A()+this.p());this.b++;break;case 103:this.v=this.c;break;case 104:this.t=this.f;break;case 105:this.t=this.e;break;case 106:this.t=this.i;break;case 107:this.t=this.h;break;case 108:this.t=this.v;break;case 109:break;case 110:this.g=this.d(this.A()+this.p());this.b++;break;case 111:this.t=this.c;break;case 112:this.k(this.A()+this.p(),this.f);this.b++;break;
case 113:this.k(this.A()+this.p(),this.e);this.b++;break;case 114:this.k(this.A()+this.p(),this.i);this.b++;break;case 115:this.k(this.A()+this.p(),this.h);this.b++;break;case 116:this.k(this.A()+this.p(),this.j);this.b++;break;case 117:this.k(this.A()+this.p(),this.g);this.b++;break;case 119:this.k(this.A()+this.p(),this.c);this.b++;break;case 124:this.c=this.v;break;case 125:this.c=this.t;break;case 126:this.c=this.d(this.A()+this.p());this.b++;break;case 132:this.L(this.v);break;case 133:this.L(this.t);
break;case 134:this.L(this.d(this.A()+this.p()));this.b++;break;case 140:this.M(this.v);break;case 141:this.M(this.t);break;case 142:this.M(this.d(this.A()+this.p()));this.b++;break;case 148:this.K(this.v);break;case 149:this.K(this.t);break;case 150:this.K(this.d(this.A()+this.p()));this.b++;break;case 156:this.O(this.v);break;case 157:this.O(this.t);break;case 158:this.O(this.d(this.A()+this.p()));this.b++;break;case 164:this.a=this.n[this.c&=this.v]|16;break;case 165:this.a=this.n[this.c&=this.t]|
16;break;case 166:this.a=this.n[this.c&=this.d(this.A()+this.p())]|16;this.b++;break;case 172:this.a=this.n[this.c^=this.v];break;case 173:this.a=this.n[this.c^=this.t];break;case 174:this.a=this.n[this.c^=this.d(this.A()+this.p())];this.b++;break;case 180:this.a=this.n[this.c|=this.v];break;case 181:this.a=this.n[this.c|=this.t];break;case 182:this.a=this.n[this.c|=this.d(this.A()+this.p())];this.b++;break;case 188:this.J(this.v);break;case 189:this.J(this.t);break;case 190:this.J(this.d(this.A()+
this.p()));this.b++;break;case 203:this.Sb(this.A());break;case 225:this.Fa(this.w(this.o));this.o+=2;break;case 227:a=this.A();this.Fa(this.w(this.o));this.k(this.o,a&255);this.k(this.o+1,a>>8);break;case 229:this.push(this.v,this.t);break;case 233:this.b=this.A();break;case 249:this.o=this.A();break;default:this.b--}},Sb:function(a){var a=a+this.p()&65535,b=this.d(++this.b);this.q-=F[b];switch(b){case 6:this.k(a,this.ea(this.d(a)));break;case 14:this.k(a,this.ga(this.d(a)));break;case 22:this.k(a,
this.Z(this.d(a)));break;case 30:this.k(a,this.fa(this.d(a)));break;case 38:this.k(a,this.ha(this.d(a)));break;case 46:this.k(a,this.ja(this.d(a)));break;case 54:this.k(a,this.ia(this.d(a)));break;case 62:this.k(a,this.va(this.d(a)));break;case 70:this.m(this.d(a)&1);break;case 78:this.m(this.d(a)&2);break;case 86:this.m(this.d(a)&4);break;case 94:this.m(this.d(a)&8);break;case 102:this.m(this.d(a)&16);break;case 110:this.m(this.d(a)&32);break;case 118:this.m(this.d(a)&64);break;case 126:this.m(this.d(a)&
128);break;case 134:this.k(a,this.d(a)&-2);break;case 142:this.k(a,this.d(a)&-3);break;case 150:this.k(a,this.d(a)&-5);break;case 158:this.k(a,this.d(a)&-9);break;case 166:this.k(a,this.d(a)&-17);break;case 174:this.k(a,this.d(a)&-33);break;case 182:this.k(a,this.d(a)&-65);break;case 190:this.k(a,this.d(a)&-129);break;case 198:this.k(a,this.d(a)|1);break;case 206:this.k(a,this.d(a)|2);break;case 214:this.k(a,this.d(a)|4);break;case 222:this.k(a,this.d(a)|8);break;case 230:this.k(a,this.d(a)|16);break;
case 238:this.k(a,this.d(a)|32);break;case 246:this.k(a,this.d(a)|64);break;case 254:this.k(a,this.d(a)|128)}this.b++},sc:function(a){this.q-=G[a];switch(a){case 64:this.f=this.port.V(this.e);this.a=this.a&1|this.n[this.f];this.b++;break;case 65:this.port.S(this.e,this.f);this.b++;break;case 66:this.lb(this.N());this.b++;break;case 67:a=this.w(this.b+1);this.k(a++,this.e);this.k(a,this.f);this.b+=3;break;case 68:case 76:case 84:case 92:case 100:case 108:case 116:case 124:a=this.c;this.c=0;this.K(a);
this.b++;break;case 69:case 77:case 85:case 93:case 101:case 109:case 117:case 125:this.b=this.w(this.o);this.o+=2;this.la=this.ma;break;case 70:case 78:case 102:case 110:this.Ra=0;this.b++;break;case 71:this.gb=this.c;this.b++;break;case 72:this.e=this.port.V(this.e);this.a=this.a&1|this.n[this.e];this.b++;break;case 73:this.port.S(this.e,this.e);this.b++;break;case 74:this.$a(this.N());this.b++;break;case 75:a=this.w(this.b+1);this.e=this.d(a++);this.f=this.d(a);this.b+=3;break;case 79:this.b++;
break;case 80:this.i=this.port.V(this.e);this.a=this.a&1|this.n[this.i];this.b++;break;case 81:this.port.S(this.e,this.i);this.b++;break;case 82:this.lb(this.Y());this.b++;break;case 83:a=this.w(this.b+1);this.k(a++,this.h);this.k(a,this.i);this.b+=3;break;case 86:case 118:this.Ra=1;this.b++;break;case 87:this.c=this.gb;this.a=this.a&1|this.Za[this.c]|(this.ma?4:0);this.b++;break;case 88:this.h=this.port.V(this.e);this.a=this.a&1|this.n[this.h];this.b++;break;case 89:this.port.S(this.e,this.h);this.b++;
break;case 90:this.$a(this.Y());this.b++;break;case 91:a=this.w(this.b+1);this.h=this.d(a++);this.i=this.d(a);this.b+=3;break;case 95:this.c=Math.round(255*Math.random());this.a=this.a&1|this.Za[this.c]|(this.ma?4:0);this.b++;break;case 96:this.j=this.port.V(this.e);this.a=this.a&1|this.n[this.j];this.b++;break;case 97:this.port.S(this.e,this.j);this.b++;break;case 98:this.lb(this.l());this.b++;break;case 99:a=this.w(this.b+1);this.k(a++,this.g);this.k(a,this.j);this.b+=3;break;case 103:var a=this.l(),
b=this.d(a);this.k(a,b>>4|(this.c&15)<<4);this.c=this.c&240|b&15;this.a=this.a&1|this.n[this.c];this.b++;break;case 104:this.g=this.port.V(this.e);this.a=this.a&1|this.n[this.g];this.b++;break;case 105:this.port.S(this.e,this.g);this.b++;break;case 106:this.$a(this.l());this.b++;break;case 107:a=this.w(this.b+1);this.g=this.d(a++);this.j=this.d(a);this.b+=3;break;case 111:a=this.l();b=this.d(a);this.k(a,(b&15)<<4|this.c&15);this.c=this.c&240|b>>4;this.a=this.a&1|this.n[this.c];this.b++;break;case 113:this.port.S(this.e,
0);this.b++;break;case 114:this.lb(this.o);this.b++;break;case 115:a=this.w(this.b+1);this.k(a++,this.o&255);this.k(a,this.o>>8);this.b+=3;break;case 120:this.c=this.port.V(this.e);this.a=this.a&1|this.n[this.c];this.b++;break;case 121:this.port.S(this.e,this.c);this.b++;break;case 122:this.$a(this.o);this.b++;break;case 123:this.o=this.w(this.w(this.b+1));this.b+=3;break;case 160:this.k(this.Y(),this.d(this.l()));this.Eb();this.ca();this.aa();this.a=this.a&193|(0!=this.N()?4:0);this.b++;break;case 161:a=
this.a&1|2;this.J(this.d(this.l()));this.ca();this.aa();a|=0==this.N()?0:4;this.a=this.a&248|a;this.b++;break;case 162:a=this.port.V(this.e);this.k(this.l(),a);this.f=this.I(this.f);this.ca();this.a=128==(a&128)?this.a|2:this.a&-3;this.b++;break;case 163:a=this.d(this.l());this.port.S(this.e,a);this.ca();this.f=this.I(this.f);255<this.g+a?(this.a|=1,this.a|=16):(this.a&=-2,this.a&=-17);this.a=128==(a&128)?this.a|2:this.a&-3;this.b++;break;case 168:this.k(this.Y(),this.d(this.l()));this.xb();this.ba();
this.aa();this.a=this.a&193|(0!=this.N()?4:0);this.b++;break;case 169:a=this.a&1|2;this.J(this.d(this.l()));this.ba();this.aa();a|=0==this.N()?0:4;this.a=this.a&248|a;this.b++;break;case 170:a=this.port.V(this.e);this.k(this.l(),a);this.f=this.I(this.f);this.ba();this.a=0!=(a&128)?this.a|2:this.a&-3;this.b++;break;case 171:a=this.d(this.l());this.port.S(this.e,a);this.ba();this.f=this.I(this.f);255<this.g+a?(this.a|=1,this.a|=16):(this.a&=-2,this.a&=-17);this.a=128==(a&128)?this.a|2:this.a&-3;this.b++;
break;case 176:this.k(this.Y(),this.d(this.l()));this.Eb();this.ca();this.aa();0!=this.N()?(this.a|=4,this.q-=5,this.b--):(this.a&=-5,this.b++);this.a&=-3;this.a&=-17;break;case 177:a=this.a&1|2;this.J(this.d(this.l()));this.ca();this.aa();a|=0==this.N()?0:4;0!=(a&4)&&0==(this.a&64)?(this.q-=5,this.b--):this.b++;this.a=this.a&248|a;break;case 178:a=this.port.V(this.e);this.k(this.l(),a);this.f=this.I(this.f);this.ca();0!=this.f?(this.q-=5,this.b--):this.b++;this.a=128==(a&128)?this.a|2:this.a&-3;
break;case 179:a=this.d(this.l());this.port.S(this.e,a);this.f=this.I(this.f);this.ca();0!=this.f?(this.q-=5,this.b--):this.b++;255<this.g+a?(this.a|=1,this.a|=16):(this.a&=-2,this.a&=-17);this.a=0!=(a&128)?this.a|2:this.a&-3;break;case 184:this.k(this.Y(),this.d(this.l()));this.xb();this.ba();this.aa();0!=this.N()?(this.a|=4,this.q-=5,this.b--):(this.a&=-5,this.b++);this.a&=-3;this.a&=-17;break;case 185:a=this.a&1|2;this.J(this.d(this.l()));this.ba();this.aa();a|=0==this.N()?0:4;0!=(a&4)&&0==(this.a&
64)?(this.q-=5,this.b--):this.b++;this.a=this.a&248|a;break;case 186:a=this.port.V(this.e);this.k(this.l(),a);this.f=this.I(this.f);this.ba();0!=this.f?(this.q-=5,this.b--):this.b++;this.a=0!=(a&128)?this.a|2:this.a&-3;break;case 187:a=this.d(this.l());this.port.S(this.e,a);this.f=this.I(this.f);this.ba();0!=this.f?(this.q-=5,this.b--):this.b++;255<this.g+a?(this.a|=1,this.a|=16):(this.a&=-2,this.a&=-17);this.a=0!=(a&128)?this.a|2:this.a&-3;break;default:this.b++}},Ic:function(){this.pb=Array(2048);
for(var a=256;0!=a--;)for(var b=0;1>=b;b++)for(var c=0;1>=c;c++)for(var d=0;1>=d;d++)this.pb[b<<8|d<<9|c<<10|a]=this.Lc(a,b|d<<1|c<<4);this.c=this.a=0},Lc:function(a,b){this.c=a;this.a=b;var c=this.c,d=0,e=b&1,f=e;if(0!=(b&16)||9<(c&15))d|=6;if(1==e||159<c||143<c&&9<(c&15))d|=96,f=1;153<c&&(f=1);0!=(b&2)?this.K(d):this.L(d);b=this.a&254|f;b=this.Wb(this.c)?b&251|4:b&251;return this.c|b<<8},L:function(a){a=this.c+a&255;this.a=this.G[this.c<<8|a];this.c=a},M:function(a){var b=this.a&1,a=this.c+a+b&
255;this.a=this.G[b<<16|this.c<<8|a];this.c=a},K:function(a){a=this.c-a&255;this.a=this.F[this.c<<8|a];this.c=a},O:function(a){var b=this.a&1,a=this.c-a-b&255;this.a=this.F[b<<16|this.c<<8|a];this.c=a},J:function(a){this.a=this.F[this.c<<8|this.c-a&255]},ic:function(){this.c^=255;this.a|=18},Zc:function(){var a=this.c&1;this.c=(this.c>>1|(this.a&1)<<7)&255;this.a=this.a&236|a},Xc:function(){var a=this.c>>7;this.c=(this.c<<1|this.a&1)&255;this.a=this.a&236|a},Yc:function(){var a=this.c>>7;this.c=this.c<<
1&255|a;this.a=this.a&236|a},$c:function(){var a=this.c&1;this.c=this.c>>1|a<<7;this.a=this.a&236|a},N:function(){return this.f<<8|this.e},Y:function(){return this.i<<8|this.h},l:function(){return this.j<<8|this.g},z:function(){return this.u<<8|this.s},A:function(){return this.v<<8|this.t},ad:function(a){this.f=a>>8;this.e=a&255},bd:function(a){this.i=a>>8;this.h=a&255},Xa:function(a){this.j=a>>8;this.g=a&255},Ea:function(a){this.u=a>>8;this.s=a&255},Fa:function(a){this.v=a>>8;this.t=a&255},Oc:function(){this.e=
this.e+1&255;0==this.e&&(this.f=this.f+1&255)},Eb:function(){this.h=this.h+1&255;0==this.h&&(this.i=this.i+1&255)},ca:function(){this.g=this.g+1&255;0==this.g&&(this.j=this.j+1&255)},Pc:function(){this.s=this.s+1&255;0==this.s&&(this.u=this.u+1&255)},Qc:function(){this.t=this.t+1&255;0==this.t&&(this.v=this.v+1&255)},aa:function(){this.e=this.e-1&255;255==this.e&&(this.f=this.f-1&255)},xb:function(){this.h=this.h-1&255;255==this.h&&(this.i=this.i-1&255)},ba:function(){this.g=this.g-1&255;255==this.g&&
(this.j=this.j-1&255)},nc:function(){this.s=this.s-1&255;255==this.s&&(this.u=this.u-1&255)},oc:function(){this.t=this.t-1&255;255==this.t&&(this.v=this.v-1&255)},W:function(a){a=a+1&255;this.a=this.a&1|this.xa[a];return a},I:function(a){a=a-1&255;this.a=this.a&1|this.wa[a];return a},Bc:function(){var a=this.c;this.c=this.rb;this.rb=a;a=this.a;this.a=this.Ab;this.Ab=a},Cc:function(){var a=this.f;this.f=this.sb;this.sb=a;a=this.e;this.e=this.ub;this.ub=a},Dc:function(){var a=this.i;this.i=this.wb;
this.wb=a;a=this.h;this.h=this.zb;this.zb=a},Ec:function(){var a=this.j;this.j=this.Cb;this.Cb=a;a=this.g;this.g=this.Gb;this.Gb=a},T:function(a,b){var c=a+b;this.a=this.a&196|(a^c^b)>>8&16|c>>16&1;return c&65535},$a:function(a){var b=this.j<<8|this.g,c=b+a+(this.a&1);this.a=(b^c^a)>>8&16|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|((a^b^32768)&(a^c)&32768)>>13;this.j=c>>8&255;this.g=c&255},lb:function(a){var b=this.j<<8|this.g,c=b-a-(this.a&1);this.a=(b^c^a)>>8&16|2|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|
((a^b)&(b^c)&32768)>>13;this.j=c>>8&255;this.g=c&255},Jc:function(){this.Za=Array(256);this.n=Array(256);this.xa=Array(256);this.wa=Array(256);this.Na=Array(256);for(var a=0;256>a;a++){var b=0!=(a&128)?128:0,c=0==a?64:0,d=a&32,e=a&8,f=this.Wb(a)?4:0;this.Za[a]=b|c|d|e;this.n[a]=b|c|d|e|f;this.xa[a]=b|c|d|e;this.xa[a]|=128==a?4:0;this.xa[a]|=0==(a&15)?16:0;this.wa[a]=b|c|d|e|2;this.wa[a]|=127==a?4:0;this.wa[a]|=15==(a&15)?16:0;this.Na[a]=0!=a?a&128:68;this.Na[a]|=d|e|16}this.G=Array(131072);this.F=
Array(131072);a=0;b=65536;c=0;d=65536;for(e=0;256>e;e++)for(f=0;256>f;f++){var g=f-e;this.G[a]=0!=f?0!=(f&128)?128:0:64;this.G[a]|=f&40;(f&15)<(e&15)&&(this.G[a]|=16);f<e&&(this.G[a]|=1);0!=((g^e^128)&(g^f)&128)&&(this.G[a]|=4);a++;g=f-e-1;this.G[b]=0!=f?0!=(f&128)?128:0:64;this.G[b]|=f&40;(f&15)<=(e&15)&&(this.G[b]|=16);f<=e&&(this.G[b]|=1);0!=((g^e^128)&(g^f)&128)&&(this.G[b]|=4);b++;g=e-f;this.F[c]=0!=f?0!=(f&128)?130:2:66;this.F[c]|=f&40;(f&15)>(e&15)&&(this.F[c]|=16);f>e&&(this.F[c]|=1);0!=((g^
e)&(e^f)&128)&&(this.F[c]|=4);c++;g=e-f-1;this.F[d]=0!=f?0!=(f&128)?130:2:66;this.F[d]|=f&40;(f&15)>=(e&15)&&(this.F[d]|=16);f>=e&&(this.F[d]|=1);0!=((g^e)&(e^f)&128)&&(this.F[d]|=4);d++}},Wb:function(a){for(var b=h,c=0;8>c;c++)0!=(a&1<<c)&&(b=!b);return b},eb:function(){return Array(1024)},Kc:function(){for(var a=0;65>a;a++)this.R[a]=Array(1024),this.Ca[a]=Array(1024);for(a=0;8>a;a++)this.Kb[a]=Array(1024);this.mb==i&&(this.mb=Array(32));this.R[64]=this.eb();this.Ca[64]=this.eb();this.Da=2},ac:function(a){a!=
i&&(this.ta=a);this.za[0]=0;this.za[1]=0;this.za[2]=1;this.za[3]=0;this.ta!=i?(this.Da=this.ta.length/16,this.cd()):this.Da=0},cd:function(){for(var a=0;48>a;a++)this.R[a]=z(this.ta[a&31]),this.Ca[a]=this.eb();for(a=48;64>a;a++)this.R[a]=this.Kb[a&7],this.Ca[a]=this.Kb[a&7]},k:function(a,b){this.Ca[a>>10][a&1023]=b;65532<=a&&this.page(a&3,b)},d:function(a){return this.R[a>>10][a&1023]&255},p:function(){return this.R[this.b>>10][this.b&1023]},w:function(a){return this.R[a>>10][a&1023]&255|(this.R[++a>>
10][a&1023]&255)<<8},page:function(a,b){this.za[a]=b;switch(a){case 0:if(0!=(b&8))for(var c=(b&4)<<2,d=32;48>d;d++)this.R[d]=z(this.mb[c]),this.Ca[d]=z(this.mb[c]),c++;else{c=this.za[3]%this.Da<<4;for(d=32;48>d;d++)this.R[d]=z(this.ta[c++]),this.Ca[d]=this.eb()}break;case 1:c=(b%this.Da<<4)+1;for(d=1;16>d;d++)this.R[d]=z(this.ta[c++]);break;case 2:c=b%this.Da<<4;for(d=16;32>d;d++)this.R[d]=z(this.ta[c++]);break;case 3:if(0==(this.za[0]&8)){c=b%this.Da<<4;for(d=32;48>d;d++)this.R[d]=z(this.ta[c++])}}}};function u(a){this.r=a;this.Ga=this.B=this.C=0}
u.prototype={reset:function(){this.Ga=this.B=this.C=255;this.jb=o},keydown:function(a){switch(a.keyCode){case 38:this.C&=-2;break;case 40:this.C&=-3;break;case 37:this.C&=-5;break;case 39:this.C&=-9;break;case 88:this.C&=-17;break;case 90:this.C&=-33;break;case 13:this.r.Aa?this.r.jb=h:this.Ga&=-129;break;case 104:this.B&=-2;break;case 98:this.B&=-3;break;case 100:this.B&=-5;break;case 102:this.B&=-9;break;case 103:this.B&=-17;break;case 105:this.B&=-33;break;case 97:this.B&=-65;break;default:return}a.preventDefault()},
keyup:function(a){switch(a.keyCode){case 38:this.C|=1;break;case 40:this.C|=2;break;case 37:this.C|=4;break;case 39:this.C|=8;break;case 88:this.C|=16;break;case 90:this.C|=32;break;case 13:this.r.Aa||(this.Ga|=128);break;case 104:this.B|=1;break;case 98:this.B|=2;break;case 100:this.B|=4;break;case 102:this.B|=8;break;case 103:this.B|=16;break;case 105:this.B|=32;break;case 97:this.B|=64;break;default:return}a.preventDefault()}};function w(a){this.r=a}w.prototype={write:p()};function v(a){this.r=a;this.Qb=0;this.P=Array(16384);this.X=Array(32);for(a=0;32>a;a++)this.X[a]=0;this.D=Array(16);this.status=0;this.ya=o;this.Qa=this.Ia=this.kb=this.Wa=this.location=this.ka=0;this.Oa=Array(256);this.ua=Array(256);this.Pb=this.tb=0;this.display=Array(49152);this.ib=[];this.Ya=[];this.qb=[];this.$=this.Db=this.fb=0;this.oa=o;this.Ja=Array(192);for(a=0;192>a;a++)this.Ja[a]=Array(25);this.nb=Array(512);this.Ta=Array(512);this.Ba=this.Ka=0;this.jc()}
v.prototype={reset:function(){var a;this.Hc();this.ya=h;for(a=this.Wa=this.status=this.Qa=this.location=0;16>a;a++)this.D[a]=0;this.D[2]=14;this.D[5]=126;this.Pb=0;this.r.Q.na=o;this.oa=h;this.Ka=512;this.Ba=-1;for(a=0;16384>a;a++)this.P[a]=0;for(a=0;49152>a;a++)this.display[a]=0},Ub:function(){this.tb=(this.D[2]&14)<<10;this.Ka=0;this.Ba=511;for(var a=0,b=this.Ta.length;a<b;a++)this.Ta[a]=h;this.$=(this.D[5]&-130)<<7;this.oa=h},Mc:function(){if(0==this.Qb){if(218<this.Ia)return this.Ia-6}else if(242<
this.Ia)return this.Ia-57;return this.Ia},gc:function(){this.ya=h;var a=this.status;this.status=0;this.r.Q.na=o;return a},hc:function(a){if(this.ya)this.ya=o,this.ka=a,this.location=this.location&16128|a;else if(this.ya=h,this.Wa=a>>6&3,this.location=this.ka|a<<8,0==this.Wa)this.kb=this.P[this.location++&16383]&255;else if(2==this.Wa){a&=15;switch(a){case 0:0!=(this.status&4)&&(this.r.Q.na=0!=(this.ka&16));break;case 1:0!=(this.status&128)&&0!=(this.ka&32)&&(this.r.Q.na=h);(this.ka&3)!=(this.D[a]&
3)&&(this.oa=h);break;case 2:this.tb=(this.ka&14)<<10;break;case 5:var b=this.$;this.$=(this.ka&-130)<<7;b!=this.$&&(this.oa=h)}this.D[a]=this.ka}},lc:function(){this.ya=h;var a=this.kb;this.kb=this.P[this.location++&16383]&255;return a},mc:function(a){this.ya=h;switch(this.Wa){case 0:case 1:case 2:var b=this.location&16383;if(a!=(this.P[b]&255)){if(b>=this.$&&b<this.$+64)this.oa=h;else if(b>=this.$+128&&b<this.$+256)this.oa=h;else{var c=b>>5;this.Ta[c]=h;c<this.Ka&&(this.Ka=c);c>this.Ba&&(this.Ba=
c)}this.P[b]=a}break;case 3:this.r.Aa?this.X[this.location&31]=this.ib[a&63]:this.r.pa&&(this.X[(this.location&63)>>1]=0==(this.location&1)?this.Ya[a]:this.X[(this.location&63)>>1]|this.qb[a&15])}this.kb=a;this.location++},Sc:function(a){if(192>=a){if(0==this.Qa?(this.Qa=this.D[10],this.status|=4):this.Qa--,0!=(this.status&4)&&0!=(this.D[0]&16))this.r.Q.na=h}else if(this.Qa=this.D[10],0!=(this.status&128)&&(0!=(this.D[1]&32)&&224>a)&&(this.r.Q.na=h),a==this.r.Va-1)this.Pb=this.D[9]},gd:function(){this.status|=
128},yc:function(a){if(!this.r.pa||!(24>a||168<=a)){for(var b=this.ua.length;0!=b--;)this.ua[b]=o;if(0!=(this.D[1]&64)){if(-1!=this.Ba&&this.qc(),this.xc(a),this.oa&&this.pc(),0!=this.Ja[a][0]&&this.zc(a),this.r.Aa&&0!=(this.D[0]&32)){b=this.X[16+(this.D[7]&15)];a<<=8;if(32<16+(this.D[7]&15))debugger;if(49152<a)debugger;this.display[a++]=b;this.display[a++]=b;this.display[a++]=b;this.display[a++]=b;this.display[a++]=b;this.display[a++]=b;this.display[a++]=b;this.display[a]=b}}else this.wc(a)}},xc:function(a){var b=
this.D[8],c=this.Pb;16>a&&0!=(this.D[0]&64)&&(b=0);var d=this.D[0]&128,e=32-(b>>3)+this.fb,f=a+c>>3;27<f&&(f-=28);for(var c=(a+(c&7)&7)<<3,g=a<<8,k=this.fb;k<this.Db;k++){var j=this.tb+((e&31)<<1)+(f<<6),l=this.P[j+1],m=(l&8)<<1,n=(k<<3)+(b&7),B=0==(l&4)?c:56-c,j=this.nb[(this.P[j]&255)+((l&1)<<8)];if(0==(l&2))for(var q=0;8>q&&256>n;q++,n++){var s=j[q+B];this.Oa[n]=0!=(l&16)&&0!=s;this.display[n+g]=this.X[s+m]}else for(q=7;0<=q&&256>n;q--,n++)s=j[q+B],this.Oa[n]=0!=(l&16)&&0!=s,this.display[n+g]=
this.X[s+m];e++;0!=d&&23==k&&(f=a>>3,c=(a&7)<<3)}},zc:function(a){for(var b=this.Ja[a],c=Math.min(8,b[0]),d=this.D[1]&1,e=a<<8,f=3*c;0!=c--;){var g=b[f--]|(this.D[6]&4)<<6,k=b[f--],j=b[f--]-(this.D[0]&8),l=a-k>>d;0!=(this.D[1]&2)&&(g&=-2);g=this.nb[g+((l&8)>>3)];k=0;0>j&&(k=-j,j=0);l=k+((l&7)<<3);if(0==d)for(;8>k&&256>j;k++,j++){var m=g[l++];0!=m&&!this.Oa[j]&&(this.display[j+e]=this.X[m+16],this.ua[j]?this.status|=32:this.ua[j]=h)}else for(;8>k&&256>j;k++,j+=2)if(m=g[l++],0!=m&&!this.Oa[j]&&(this.display[j+
e]=this.X[m+16],this.ua[j]?this.status|=32:this.ua[j]=h),0!=m&&!this.Oa[j+1])this.display[j+e+1]=this.X[m+16],this.ua[j+1]?this.status|=32:this.ua[j+1]=h}8<=b[0]&&(this.status|=64)},wc:function(a){var b=this.X[16+(this.D[7]&15)],a=a<<8,c;for(c=0;256>c;c++)this.display[a++]=b},Hc:function(){var a,b,c,d;if(this.r.Aa&&!this.ib.length){this.ib=Array(64);for(a=0;64>a;a++)b=a&3,c=a>>2&3,d=a>>4&3,this.ib[a]=85*b|85*c<<8|85*d<<16}else if(this.r.pa&&!this.Ya.length){this.Ya=Array(256);this.qb=Array(16);for(a=
0;256>a;a++)c=a&15,d=a>>4&15,this.Ya[a]=d<<12|d<<8|c<<4|c;for(a=0;16>a;a++)this.qb[a]=a<<20}},jc:function(){for(var a=0;512>a;a++)this.nb[a]=Array(64)},qc:function(){for(var a=this.Ka;a<=this.Ba;a++)if(this.Ta[a]){this.Ta[a]=o;for(var b=this.nb[a],c=0,d=a<<5,e=0;8>e;e++)for(var f=this.P[d++],g=this.P[d++],k=this.P[d++],j=this.P[d++],l=128;0!=l;l>>=1){var m=0;0!=(f&l)&&(m|=1);0!=(g&l)&&(m|=2);0!=(k&l)&&(m|=4);0!=(j&l)&&(m|=8);b[c++]=m}}this.Ka=512;this.Ba=-1},pc:function(){this.oa=o;for(var a=0;a<
this.Ja.length;a++)this.Ja[a][0]=0;a=0==(this.D[1]&2)?8:16;1==(this.D[1]&1)&&(a<<=1);for(var b=0;64>b;b++){var c=this.P[this.$+b]&255;if(208==c)break;c++;240<c&&(c-=256);for(var d=0;192>d;d++)if(d>=c&&d-c<a){var e=this.Ja[d];if(8>e[0]){var f=3*e[0]+1,g=this.$+(b<<1)+128;e[f++]=this.P[g++]&255;e[f++]=c;e[f++]=this.P[g]&255;e[0]++}}}}};function t(a){this.r=a;this.enable=p();this.updateStatus=p();this.dc=p()}
"undefined"!==typeof $&&($.fn.ec=function(a){function b(b){this.r=b;var e=this,b=$("<div></div>"),f=$('<div class="roms"></div>'),g=$('<div class="controls"></div>'),k=A(["fullscreenEnabled","mozFullScreenEnabled","webkitCancelFullScreen"]);this.Xb=A(["hidden","mozHidden","webkitHidden","msHidden"]);this.screen=$('<canvas width=256 height=192 class="screen"></canvas>');this.Pa=this.screen[0].getContext("2d");this.Pa.getImageData?(this.ab=this.Pa.getImageData(0,0,256,192),this.Vc(),this.La=$("<select></select>").appendTo(f),
this.La.change(function(){e.Ib();e.U.start.removeAttr("disabled")}),this.U={start:$('<input type="button" value="Stop" class="btn" disabled="disabled">').appendTo(g),bc:$('<input type="button" value="Restart" class="btn" disabled="disabled">').appendTo(g),Ob:$('<input type="button" value="Enable sound" class="btn" disabled="disabled">').appendTo(g),zoom:$('<input type="button" value="Zoom in" class="btn">').appendTo(g)},k&&$('<input type="button" value="Go fullscreen" class="btn">').appendTo(g).click(function(){var a=
e.screen[0];a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}),this.log=$('<div id="status"></div>'),this.U.start.click(function(){e.r.hb?(e.r.stop(),e.updateStatus("Paused"),e.U.start.attr("value","Start")):(e.r.start(),e.U.start.attr("value","Stop"))}),this.U.bc.click(function(){e.r.Uc()?(e.r.reset(),e.r.H.Ub(),e.r.start()):$(this).attr("disabled","disabled")}),this.U.Ob.click(p()),this.Rb=o,this.U.zoom.click(function(){e.Rb?
(e.screen.animate({width:"256px",height:"192px"},function(){$(this).removeAttr("style")}),e.U.zoom.attr("value","Zoom in")):(e.screen.animate({width:"512px",height:"384px"}),e.U.zoom.attr("value","Zoom out"));e.Rb=!e.Rb}),this.screen.appendTo(b),f.appendTo(b),g.appendTo(b),this.log.appendTo(b),b.appendTo($(c)),"undefined"!=typeof a&&this.ed(a),$(document).bind("keydown",function(a){e.r.ra.keydown(a)}).bind("keyup",function(a){e.r.ra.keyup(a)})):$(c).html('<div class="alert-message error"><p><strong>Oh no!</strong> Your browser doesn\'t support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Firefox, Google Chrome, Opera or Safari!</p></div>')}
var c=this;b.prototype={reset:function(){this.screen[0].width=256;this.screen[0].height=192;this.log.text("")},Vc:function(){this.Pa.fillStyle="black";this.Pa.fillRect(0,0,256,192);for(var a=3;a<=this.ab.data.length-3;a+=4)this.ab.data[a]=255},ed:function(a){this.La.children().remove();$("<option>Select a ROM...</option>").appendTo(this.La);for(var b in a)if(a.hasOwnProperty(b)){for(var c=$("<optgroup></optgroup>").attr("label",b),g=0;g<a[b].length;g++)$("<option>"+a[b][g][0]+"</option>").attr("value",
a[b][g][1]).appendTo(c);this.La.append(c)}},Ib:function(){var a=this;this.updateStatus("Downloading...");$.ajax({url:escape(this.La.val()),xhr:function(){var b=$.ajaxSettings.xhr();"undefined"!==typeof b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");return a.xhr=b},complete:function(b){a.r.$b(b.responseText,a.La.val());a.r.reset();a.r.H.Ub();a.r.start();a.enable()}})},enable:function(){this.U.bc.removeAttr("disabled");this.r.cc?this.U.Ob.attr("value","Disable sound"):
this.U.Ob.attr("value","Enable sound")},updateStatus:function(a){this.log.text(a)},dc:function(a){if(!this.Xb||!document[this.Xb]){var b=this.ab.data,c,g,k;for(g=0;49152>=g;g++)c=a[g],k=4*g,b[k]=c&255,b[k+1]=c>>8&255,b[k+2]=c>>16&255;this.Pa.putImageData(this.ab,0,0)}}};return b});function x(a){this.r=a;this.H=a.H;this.Jb=a.Jb;this.ra=a.ra;this.Tb=64;this.Nc=0;this.da=[]}
x.prototype={reset:function(){this.da=Array(2)},S:function(a,b){if(!(this.r.pa&&7>a))switch(a&193){case 1:this.da[0]=(b&32)<<1;this.da[1]=b&128;0==this.Tb&&(this.da[0]=~this.da[0],this.da[1]=~this.da[1]);break;case 128:this.H.mc(b);break;case 129:this.H.hc(b);break;case 64:case 65:this.r.cc&&this.Jb.write(b)}},V:function(a){if(this.r.pa&&7>a)switch(a){case 0:return this.ra.Ga&191|this.Tb;case 1:case 2:case 3:case 4:case 5:return 0;case 6:return 255}switch(a&193){case 64:return this.H.Mc();case 65:return this.Nc;
case 128:return this.H.lc();case 129:return this.H.gc();case 192:return this.ra.C;case 193:return this.ra.B&63|this.da[0]|this.da[1]}return 255}};window.JSSMS=r;jQuery.fn.JSSMSUI=jQuery.fn.ec;
