/*
 jsSMS - A Sega Master System/GameGear emulator in JavaScript
 Copyright (C) 2012  Guillaume Marty (https://github.com/gmarty)
 Based on JavaGear Copyright (c) 2002-2008 Chris White.

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
'use strict';var f=!0,aa=null,h=!1;function ba(){return function(){}}var ca=!(!window.DataView||!window.ArrayBuffer);function da(b){this.xb={ui:ea,swfPath:"lib/"};if("undefined"!=typeof b)for(var a in this.xb)"undefined"!=typeof b[a]&&(this.xb[a]=b[a]);this.W=new fa(this);this.Ca=new b.ui(this);this.B=new ga(this);this.Aa=new ha(this);this.ports=new ia(this);this.I=new ka(this);this.Ca.updateStatus("Ready to load a ROM.")}
da.prototype={xa:h,$a:0,O:0,vb:0,Ja:0,La:0,Pa:h,ba:f,V:h,Sa:f,Ga:[],Ha:0,Ra:0,Ba:[],tb:0,sb:0,Ka:0,Gb:0,kb:"",lb:"",reset:function(){var b=this.B.ob,a=0;0==b||this.V?(this.Ja=60,this.O=262,a=3579545):1==b&&(this.Ja=50,this.O=313,a=3546893);this.$a=Math.round(a/this.Ja/this.O+1);this.B.ob=b;if(this.Sa){b=this.Aa;b.rb=(a<<8)/16/44100;b.P=0;b.J=0;b.oa=16;b.Y=32768;for(a=0;4>a;a++)b.H[a<<1]=1,b.H[(a<<1)+1]=15,b.F[a]=0,b.M[a]=1,3!=a&&(b.ia[a]=la);this.Ra=Math.round(44100/this.Ja);if(0==this.Ga.length||
this.Ga.length!=this.Ra)this.Ga=Array(this.Ra);if(0==this.Ba.length||this.Ba.length!=this.O){this.Ba=Array(this.O);for(var d=0,a=0;a<this.O;a++)b=(this.Ra<<16)/this.O+d,d=b-(b>>16<<16),this.Ba[a]=b>>16}}this.Gb=0;this.La=this.vb;this.W.reset();this.Ca.reset();this.B.reset();this.ports.reset();this.I.reset();ma(this.I,aa)},start:function(){var b=this;this.xa||(this.xa=f);requestAnimationFrame(this.frame.bind(this));this.hb=aa;this.Ka=0;na(this);this.Fb=setInterval(function(){na(b)},500)},stop:function(){clearInterval(this.Fb);
this.xa=h},frame:function(){if(this.xa){var b;for(b=0;b<this.O;b++){if(193==b){oa(this.I,this.$a,8);var a=this.B;a.status|=128;oa(this.I,0,0)}else oa(this.I,this.$a,0);this.Sa&&(a=b,0==a&&(this.Ha=0),a=this.Ba[a],this.Ga=this.Aa.update(this.Ha,a),this.Ha+=a);this.B.la=b;if(0==this.La&&192>b){var a=this.B,d=b,c=0,e=0,g=0;if(!a.o.V||!(24>d||168<=d)){for(c=256;c--;)a.fa[c]=h;if(0!=(a.z[1]&64)){if(-1!=a.ca){c=a;for(e=c.na;e<=c.ca;e++)if(c.ya[e]){c.ya[e]=h;for(var g=c.Ua[e],j=0,n=e<<5,r=0;8>r;r++)for(var x=
c.G[n++],s=c.G[n++],G=c.G[n++],y=c.G[n++],u=128;0!=u;u>>=1){var t=0;0!=(x&u)&&(t|=1);0!=(s&u)&&(t|=2);0!=(G&u)&&(t|=4);0!=(y&u)&&(t|=8);g[j++]=t}}c.na=512;c.ca=-1}var c=a,e=d,F=0,ja=0,Y=0,Z=0,g=c.z[8],x=c.nb;16>e&&0!=(c.z[0]&64)&&(g=0);j=c.z[0]&128;n=32-(g>>3)+c.Ma;r=e+x>>3;27<r&&(r-=28);x=(e+(x&7)&7)<<3;s=e<<8;for(G=c.Ma;G<c.fb;G++){var F=c.Ya+((n&31)<<1)+(r<<6),y=c.G[F+1],u=(y&8)<<1,t=(G<<3)+(g&7),B=0==(y&4)?x:56-x,Ga=c.Ua[(c.G[F]&255)+((y&1)<<8)];if(0==(y&2))for(F=0;8>F&&256>t;F++,t++)ja=Ga[F+
B],Y=4*(t+s),Z=3*(ja+u),c.ra[t]=0!=(y&16)&&0!=ja,c.display[Y]=c.u[Z],c.display[Y+1]=c.u[Z+1],c.display[Y+2]=c.u[Z+2];else for(F=7;0<=F&&256>t;F--,t++)ja=Ga[F+B],Y=4*(t+s),Z=3*(ja+u),c.ra[t]=0!=(y&16)&&0!=ja,c.display[Y]=c.u[Z],c.display[Y+1]=c.u[Z+1],c.display[Y+2]=c.u[Z+2];n++;0!=j&&23==G&&(r=e>>3,x=(e&7)<<3)}if(a.U){c=a;c.U=h;for(e=0;e<c.ma.length;e++)c.ma[e][0]=0;e=0==(c.z[1]&2)?8:16;1==(c.z[1]&1)&&(e<<=1);for(g=0;64>g;g++){j=c.G[c.L+g]&255;if(208==j)break;j++;240<j&&(j-=256);for(n=0;192>n;n++)n>=
j&&n-j<e&&(r=c.ma[n],8>r[0]&&(x=3*r[0]+1,s=c.L+(g<<1)+128,r[x++]=c.G[s++]&255,r[x++]=j,r[x++]=c.G[s]&255,r[0]++))}}if(0!=a.ma[d][0]){c=a;e=d;B=t=u=0;g=c.ma[e];x=Math.min(8,g[0]);j=c.z[1]&1;n=e<<8;for(r=3*x;x--;)if(G=g[r--]|(c.z[6]&4)<<6,y=g[r--],s=g[r--]-(c.z[0]&8),u=e-y>>j,0!=(c.z[1]&2)&&(G&=-2),G=c.Ua[G+((u&8)>>3)],y=0,0>s&&(y=-s,s=0),F=y+((u&7)<<3),0==j)for(;8>y&&256>s;y++,s++)u=G[F++],0!=u&&!c.ra[s]&&(t=4*(s+n),B=3*(u+16),c.display[t]=c.u[B],c.display[t+1]=c.u[B+1],c.display[t+2]=c.u[B+2],c.fa[s]?
c.status|=32:c.fa[s]=f);else for(;8>y&&256>s;y++,s+=2)u=G[F++],0!=u&&!c.ra[s]&&(t=4*(s+n),B=3*(u+16),c.display[t]=c.u[B],c.display[t+1]=c.u[B+1],c.display[t+2]=c.u[B+2],c.fa[s]?c.status|=32:c.fa[s]=f),0!=u&&!c.ra[s+1]&&(t=4*(s+n+1),B=3*(u+16),c.display[t]=c.u[B],c.display[t+1]=c.u[B+1],c.display[t+2]=c.u[B+2],c.fa[s+1]?c.status|=32:c.fa[s+1]=f);8<=g[0]&&(c.status|=64)}if(a.o.ba&&0!=(a.z[0]&32)){d<<=8;if(32<16+(a.z[7]&15))debugger;if(49152<d)debugger;e=4*d;g=3*(16+(a.z[7]&15));for(c=0;8>c;c++)a.display[e+
c]=a.u[g],a.display[e+c+1]=a.u[g],a.display[e+c+2]=a.u[g]}}else{d<<=8;c=0;e=3*(16+(a.z[7]&15));for(g=0;1024>g;g++)c=4*d,a.display[c]=a.u[e],a.display[c+1]=a.u[e+1],a.display[c+2]=a.u[e+2],d++}}}a=this.B;d=b;192>=d?(0==a.ta?(a.ta=a.z[10],a.status|=4):a.ta--,0!=(a.status&4)&&0!=(a.z[0]&16)&&(a.o.I.T=f)):(a.ta=a.z[10],0!=(a.status&128)&&(0!=(a.z[1]&32)&&224>d)&&(a.o.I.T=f),d==a.o.O-1&&(a.nb=a.z[9]))}this.Pa&&(b=this.I,b.S=b.R,b.R=h,b.ka&&(b.b++,b.ka=h),k(b,b.b),b.b=102,b.n-=11,this.Pa=h);0==this.La--?
(this.La=this.vb,b=f):b=h;b&&this.Ca.Db(this.B.display,[]);this.Ka++;requestAnimationFrame(this.frame.bind(this))}},ib:function(b,a){0!=a%1024&&(b=b.substr(512),a-=512);var d,c,e=Math.round(a/1024),g=Array(e);for(d=0;d<e;d++)if(g[d]=l(1024),ca)for(c=0;1024>c;c++)g[d].setUint8(c,b.charCodeAt(1024*d+c));else for(c=0;1024>c;c++)g[d][c]=b.charCodeAt(1024*d+c)&255;return g}};
function pa(b,a,d){var c;c=".gg"==d.substr(-3).toLowerCase()?2:1;var e=a.length;1==c?(b.ba=f,b.V=h,b.B.Ma=0,b.B.fb=32,b.tb=256,b.sb=192):2==c&&(b.V=f,b.ba=h,b.B.Ma=5,b.B.fb=27,b.tb=160,b.sb=144);if(1024>=e)return h;c=b.ib(a,e);if(c==aa)return h;ma(b.I,c);b.kb=a;b.lb=d;return f}function na(b){var a=qa(),d="Running";b.hb&&(d+=": "+(b.Ka/((a-b.hb)/1E3)).toFixed(2)+" (/ "+(1E3/17).toFixed(2)+") FPS");b.Ca.updateStatus(d);b.Ka=0;b.hb=a};var l=ca?function(b){b||(b=0);return new DataView(new ArrayBuffer(b))}:Array,ra=ca?function(b){if(!b)return l();var a,d;a=b.byteLength;for(d=new l(a);a--;)d.setInt8(a,b.getInt8(a));return d}:function(b){if(!b)return l();var a,d;a=b.length;for(d=new l(a);a--;)"undefined"!=typeof b[a]&&(d[a]=b[a]);return d},sa=ca?function(b,a,d){b.X[a>>10].setInt8(a&1023,d);65532<=a&&b.page(a&3,d)}:function(b,a,d){b.X[a>>10][a&1023]=d;65532<=a&&b.page(a&3,d)},ta=ca?function(b,a){return b[a>>10].getUint8(a&1023)}:function(b,
a){return b[a>>10][a&1023]&255},ua=ca?function(b,a){return 1023>(a&1023)?b[a>>10].getUint16(a&1023,f):b[a>>10].getUint8(a&1023)|b[++a>>10].getUint8(a&1023)<<8}:function(b,a){return b[a>>10][a&1023]&255|(b[++a>>10][a&1023]&255)<<8},qa=Date.now||(Date.now=function(){return(new Date).getTime()});function va(b){var a=h;b.some(function(b){return b in document?(a=b,f):h});return a};var wa=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,
19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],xa=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,
8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],ya=[4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,4,4,4,4,4,4,4,14,20,10,8,8,11,4,4,15,20,10,8,8,11,4,4,4,4,4,23,23,19,4,4,15,4,4,4,4,4,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,4,19,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,
4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,8,8,19,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,14,4,23,4,15,4,4,4,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,10,4,4,4,4,4,4],za=[0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,
0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,23,0],Aa=[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,8,12,15,20,8,14,8,
8,12,12,15,20,8,14,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,16,16,16,16,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];
function ka(b){this.o=b;this.port=b.ports;this.ua=this.m=this.b=0;this.T=this.qa=this.ka=this.S=this.R=h;this.n=this.Bb=this.cb=this.a=this.Na=this.yb=this.s=this.q=this.r=this.p=this.gb=this.eb=this.g=this.j=this.bb=this.ab=this.h=this.i=this.Za=this.Xa=this.e=this.f=this.Wa=this.c=this.va=0;this.Z=[];this.jb=Array(8);this.Ta=aa;this.Cb=h;this.aa=Array(4);this.da=0;this.X=Array(65);this.K=Array(65);this.qb=Array(2048);this.Va=Array(256);this.l=Array(256);this.ha=Array(256);this.ga=Array(256);this.C=
Array(131072);this.A=Array(131072);this.Fa=Array(256);var a,d,c,e,g,j;for(b=0;256>b;b++)a=0!=(b&128)?128:0,d=0==b?64:0,c=b&32,e=b&8,g=Ba(b)?4:0,this.Va[b]=a|d|c|e,this.l[b]=a|d|c|e|g,this.ha[b]=a|d|c|e,this.ha[b]|=128==b?4:0,this.ha[b]|=0==(b&15)?16:0,this.ga[b]=a|d|c|e|2,this.ga[b]|=127==b?4:0,this.ga[b]|=15==(b&15)?16:0,this.Fa[b]=0!=b?b&128:68,this.Fa[b]|=c|e|16;b=0;a=65536;d=0;c=65536;for(g=0;256>g;g++)for(j=0;256>j;j++)e=j-g,this.C[b]=0!=j?0!=(j&128)?128:0:64,this.C[b]|=j&40,(j&15)<(g&15)&&(this.C[b]|=
16),j<g&&(this.C[b]|=1),0!=((e^g^128)&(e^j)&128)&&(this.C[b]|=4),b++,e=j-g-1,this.C[a]=0!=j?0!=(j&128)?128:0:64,this.C[a]|=j&40,(j&15)<=(g&15)&&(this.C[a]|=16),j<=g&&(this.C[a]|=1),0!=((e^g^128)&(e^j)&128)&&(this.C[a]|=4),a++,e=g-j,this.A[d]=0!=j?0!=(j&128)?130:2:66,this.A[d]|=j&40,(j&15)>(g&15)&&(this.A[d]|=16),j>g&&(this.A[d]|=1),0!=((e^g)&(g^j)&128)&&(this.A[d]|=4),d++,e=g-j-1,this.A[c]=0!=j?0!=(j&128)?130:2:66,this.A[c]|=j&40,(j&15)>=(g&15)&&(this.A[c]|=16),j>=g&&(this.A[c]|=1),0!=((e^g)&(g^j)&
128)&&(this.A[c]|=4),c++;for(b=256;b--;)for(a=0;1>=a;a++)for(d=0;1>=d;d++)for(c=0;1>=c;c++){e=this.qb;g=a<<8|c<<9|d<<10|b;j=a|c<<1|d<<4;this.c=b;this.a=j;var n=this.c,r=0,x=j&1,s=x;if(0!=(j&16)||9<(n&15))r|=6;if(1==x||159<n||143<n&&9<(n&15))r|=96,s=1;153<n&&(s=1);0!=(j&2)?m(this,r):p(this,r);j=this.a&254|s;j=Ba(this.c)?j&251|4:j&251;e[g]=this.c|j<<8}for(b=this.c=this.a=0;65>b;b++)this.K[b]=l(1024),this.X[b]=l(1024);for(b=0;8>b;b++)this.jb[b]=l(1024);this.Ta==aa&&(this.Ta=l(32),this.Cb=h);this.K[64]=
l(1024);this.X[64]=l(1024);this.da=2;this.k=sa.bind(this,this);this.d=ta.bind(this,this.K);this.t=ua.bind(this,this.K)}
ka.prototype={reset:function(){this.b=this.cb=this.a=this.Na=this.yb=this.q=this.s=this.p=this.r=this.j=this.g=this.eb=this.gb=this.i=this.h=this.ab=this.bb=this.f=this.e=this.Xa=this.Za=this.c=this.Wa=0;this.m=57328;this.ua=this.Bb=this.n=0;this.qa=this.S=this.R=h;this.va=0;this.ka=h},call:function(b){b?(k(this,this.b+2),this.b=this.t(this.b),this.n-=7):this.b+=2},page:function(b,a){var d,c;this.aa[b]=a;switch(b){case 0:if(0!=(a&8)){d=(a&4)<<2;for(c=32;48>c;c++)this.K[c]=ra(this.Ta[d]),this.X[c]=
ra(this.Ta[d]),d++;this.Cb=f}else{d=this.aa[3]%this.da<<4;for(c=32;48>c;c++)this.K[c]=ra(this.Z[d++]),this.X[c]=l(1024)}break;case 1:d=(a%this.da<<4)+1;for(c=1;16>c;c++)this.K[c]=ra(this.Z[d++]);break;case 2:d=a%this.da<<4;for(c=16;32>c;c++)this.K[c]=ra(this.Z[d++]);break;case 3:if(0==(this.aa[0]&8)){d=a%this.da<<4;for(c=32;48>c;c++)this.K[c]=ra(this.Z[d++])}}}};function q(b){return b.d(b.b)}
function ma(b,a){a!=aa&&(b.Z=a);b.aa[0]=0;b.aa[1]=0;b.aa[2]=1;b.aa[3]=0;if(b.Z!=aa){b.da=b.Z.length/16;for(var d=0;48>d;d++)b.K[d]=ra(b.Z[d&31]),b.X[d]=l(1024);for(d=48;64>d;d++)b.K[d]=b.jb[d&7],b.X[d]=b.jb[d&7]}else b.da=0}function Ba(b){var a=f,d;for(d=0;8>d;d++)0!=(b&1<<d)&&(a=!a);return a}function Ca(b,a){var d=b.j<<8|b.g,c=d-a-(b.a&1);b.a=(d^c^a)>>8&16|2|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|((a^d)&(d^c)&32768)>>13;b.j=c>>8&255;b.g=c&255}
function Da(b,a){var d=b.j<<8|b.g,c=d+a+(b.a&1);b.a=(d^c^a)>>8&16|c>>16&1|c>>8&128|(0!=(c&65535)?0:64)|((a^d^32768)&(a^c)&32768)>>13;b.j=c>>8&255;b.g=c&255}function v(b,a,d){var c=a+d;b.a=b.a&196|(a^c^d)>>8&16|c>>16&1;return c&65535}function w(b,a){a=a-1&255;b.a=b.a&1|b.ga[a];return a}function z(b,a){a=a+1&255;b.a=b.a&1|b.ha[a];return a}function A(b){b.g=b.g-1&255;255==b.g&&(b.j=b.j-1&255)}function Ea(b){b.h=b.h-1&255;255==b.h&&(b.i=b.i-1&255)}
function C(b){b.e=b.e-1&255;255==b.e&&(b.f=b.f-1&255)}function D(b){b.g=b.g+1&255;0==b.g&&(b.j=b.j+1&255)}function Fa(b){b.h=b.h+1&255;0==b.h&&(b.i=b.i+1&255)}function Ha(b,a){b.s=a>>8;b.q=a&255}function Ia(b,a){b.r=a>>8;b.p=a&255}function Ja(b,a){b.j=a>>8;b.g=a&255}function E(b){return b.s<<8|b.q}function H(b){return b.r<<8|b.p}function I(b){return b.j<<8|b.g}function J(b){return b.i<<8|b.h}function K(b){return b.f<<8|b.e}function L(b,a){b.a=b.A[b.c<<8|b.c-a&255]}
function M(b,a){var d=b.a&1,c=b.c-a-d&255;b.a=b.A[d<<16|b.c<<8|c];b.c=c}function m(b,a){var d=b.c-a&255;b.a=b.A[b.c<<8|d];b.c=d}function N(b,a){var d=b.a&1,c=b.c+a+d&255;b.a=b.C[d<<16|b.c<<8|c];b.c=c}function p(b,a){var d=b.c+a&255;b.a=b.C[b.c<<8|d];b.c=d}
function Ka(b,a){var d=a+q(b)&65535,c=b.d(++b.b);b.n-=za[c];switch(c){case 6:b.k(d,O(b,b.d(d)));break;case 14:b.k(d,P(b,b.d(d)));break;case 22:b.k(d,Q(b,b.d(d)));break;case 30:b.k(d,R(b,b.d(d)));break;case 38:b.k(d,S(b,b.d(d)));break;case 46:b.k(d,T(b,b.d(d)));break;case 54:b.k(d,U(b,b.d(d)));break;case 62:b.k(d,La(b,b.d(d)));break;case 70:V(b,b.d(d)&1);break;case 78:V(b,b.d(d)&2);break;case 86:V(b,b.d(d)&4);break;case 94:V(b,b.d(d)&8);break;case 102:V(b,b.d(d)&16);break;case 110:V(b,b.d(d)&32);break;
case 118:V(b,b.d(d)&64);break;case 126:V(b,b.d(d)&128);break;case 134:b.k(d,b.d(d)&-2);break;case 142:b.k(d,b.d(d)&-3);break;case 150:b.k(d,b.d(d)&-5);break;case 158:b.k(d,b.d(d)&-9);break;case 166:b.k(d,b.d(d)&-17);break;case 174:b.k(d,b.d(d)&-33);break;case 182:b.k(d,b.d(d)&-65);break;case 190:b.k(d,b.d(d)&-129);break;case 198:b.k(d,b.d(d)|1);break;case 206:b.k(d,b.d(d)|2);break;case 214:b.k(d,b.d(d)|4);break;case 222:b.k(d,b.d(d)|8);break;case 230:b.k(d,b.d(d)|16);break;case 238:b.k(d,b.d(d)|32);
break;case 246:b.k(d,b.d(d)|64);break;case 254:b.k(d,b.d(d)|128)}b.b++}function V(b,a){b.a=b.a&1|b.Fa[a]}function La(b,a){var d=a&1;a=a>>1&255;b.a=d|b.l[a];return a}function T(b,a){var d=a&1;a=a>>1|a&128;b.a=d|b.l[a];return a}function U(b,a){var d=(a&128)>>7;a=(a<<1|1)&255;b.a=d|b.l[a];return a}function S(b,a){var d=(a&128)>>7;a=a<<1&255;b.a=d|b.l[a];return a}function R(b,a){var d=a&1;a=(a>>1|b.a<<7)&255;b.a=d|b.l[a];return a}
function Q(b,a){var d=(a&128)>>7;a=(a<<1|b.a&1)&255;b.a=d|b.l[a];return a}function P(b,a){var d=a&1;a=(a>>1|a<<7)&255;b.a=d|b.l[a];return a}function O(b,a){var d=(a&128)>>7;a=(a<<1|a>>7)&255;b.a=d|b.l[a];return a}function Ma(b,a){b.k(a,w(b,b.d(a)))}function Na(b,a){b.k(a,z(b,b.d(a)))}function Oa(b,a,d){b.k(--b.m,a);b.k(--b.m,d)}function k(b,a){b.k(--b.m,a>>8);b.k(--b.m,a&255)}function Pa(b,a){a&&(b.b=b.t(b.m),b.m+=2,b.n-=6)}
function Qa(b,a){if(a){var d=q(b)+1;128<=d&&(d-=256);b.b+=d;b.n-=5}else b.b++}function Ra(b,a){b.b=a?b.t(b.b):b.b+2}
function oa(b,a,d){var c=0,c=c=0;b.n+=a;0!=a&&(b.Bb=a);for(;b.n>d;)switch(b.T&&(a=b,a.R&&!a.qa&&(a.ka&&(a.b++,a.ka=h),a.R=a.S=h,a.T=h,k(a,a.b),0==a.ua?(a.b=0==a.va||255==a.va?56:a.va,a.n-=13):1==a.ua?(a.b=56,a.n-=13):(a.b=a.t((a.Na<<8)+a.va),a.n-=19))),c=b.d(b.b++),b.qa=h,b.n-=wa[c],c){case 1:b.e=b.d(b.b++);b.f=b.d(b.b++);break;case 2:b.k(K(b),b.c);break;case 3:a=b;a.e=a.e+1&255;0==a.e&&(a.f=a.f+1&255);break;case 4:b.f=z(b,b.f);break;case 5:b.f=w(b,b.f);break;case 6:b.f=b.d(b.b++);break;case 7:a=
b;c=a.c>>7;a.c=a.c<<1&255|c;a.a=a.a&236|c;break;case 8:a=b;c=a.c;a.c=a.Wa;a.Wa=c;c=a.a;a.a=a.cb;a.cb=c;break;case 9:Ja(b,v(b,I(b),K(b)));break;case 10:b.c=b.d(K(b));break;case 11:C(b);break;case 12:b.e=z(b,b.e);break;case 13:b.e=w(b,b.e);break;case 14:b.e=b.d(b.b++);break;case 15:a=b;c=a.c&1;a.c=a.c>>1|c<<7;a.a=a.a&236|c;break;case 16:b.f=b.f-1&255;Qa(b,0!=b.f);break;case 17:b.h=b.d(b.b++);b.i=b.d(b.b++);break;case 18:b.k(J(b),b.c);break;case 19:Fa(b);break;case 20:b.i=z(b,b.i);break;case 21:b.i=
w(b,b.i);break;case 22:b.i=b.d(b.b++);break;case 23:a=b;c=a.c>>7;a.c=(a.c<<1|a.a&1)&255;a.a=a.a&236|c;break;case 24:b.b+=q(b)+1;break;case 25:Ja(b,v(b,I(b),J(b)));break;case 26:b.c=b.d(J(b));break;case 27:Ea(b);break;case 28:b.h=z(b,b.h);break;case 29:b.h=w(b,b.h);break;case 30:b.h=b.d(b.b++);break;case 31:a=b;c=a.c&1;a.c=(a.c>>1|(a.a&1)<<7)&255;a.a=a.a&236|c;break;case 32:Qa(b,0==(b.a&64));break;case 33:b.g=b.d(b.b++);b.j=b.d(b.b++);break;case 34:c=b.t(b.b);b.k(c,b.g);b.k(++c,b.j);b.b+=2;break;case 35:D(b);
break;case 36:b.j=z(b,b.j);break;case 37:b.j=w(b,b.j);break;case 38:b.j=b.d(b.b++);break;case 39:a=b;c=a.qb[a.c|(a.a&1)<<8|(a.a&2)<<8|(a.a&16)<<6];a.c=c&255;a.a=a.a&2|c>>8;break;case 40:Qa(b,0!=(b.a&64));break;case 41:Ja(b,v(b,I(b),I(b)));break;case 42:c=b.t(b.b);b.g=b.d(c);b.j=b.d(c+1);b.b+=2;break;case 43:A(b);break;case 44:b.g=z(b,b.g);break;case 45:b.g=w(b,b.g);break;case 46:b.g=b.d(b.b++);break;case 47:a=b;a.c^=255;a.a|=18;break;case 48:Qa(b,0==(b.a&1));break;case 49:b.m=b.t(b.b);b.b+=2;break;
case 50:b.k(b.t(b.b),b.c);b.b+=2;break;case 51:b.m++;break;case 52:Na(b,I(b));break;case 53:Ma(b,I(b));break;case 54:b.k(I(b),b.d(b.b++));break;case 55:b.a|=1;b.a&=-3;b.a&=-17;break;case 56:Qa(b,0!=(b.a&1));break;case 57:Ja(b,v(b,I(b),b.m));break;case 58:b.c=b.d(b.t(b.b));b.b+=2;break;case 59:b.m--;break;case 60:b.c=z(b,b.c);break;case 61:b.c=w(b,b.c);break;case 62:b.c=b.d(b.b++);break;case 63:a=b;0!=(a.a&1)?(a.a&=-2,a.a|=16):(a.a|=1,a.a&=-17);a.a&=-3;break;case 65:b.f=b.e;break;case 66:b.f=b.i;break;
case 67:b.f=b.h;break;case 68:b.f=b.j;break;case 69:b.f=b.g;break;case 70:b.f=b.d(I(b));break;case 71:b.f=b.c;break;case 72:b.e=b.f;break;case 74:b.e=b.i;break;case 75:b.e=b.h;break;case 76:b.e=b.j;break;case 77:b.e=b.g;break;case 78:b.e=b.d(I(b));break;case 79:b.e=b.c;break;case 80:b.i=b.f;break;case 81:b.i=b.e;break;case 83:b.i=b.h;break;case 84:b.i=b.j;break;case 85:b.i=b.g;break;case 86:b.i=b.d(I(b));break;case 87:b.i=b.c;break;case 88:b.h=b.f;break;case 89:b.h=b.e;break;case 90:b.h=b.i;break;
case 92:b.h=b.j;break;case 93:b.h=b.g;break;case 94:b.h=b.d(I(b));break;case 95:b.h=b.c;break;case 96:b.j=b.f;break;case 97:b.j=b.e;break;case 98:b.j=b.i;break;case 99:b.j=b.h;break;case 101:b.j=b.g;break;case 102:b.j=b.d(I(b));break;case 103:b.j=b.c;break;case 104:b.g=b.f;break;case 105:b.g=b.e;break;case 106:b.g=b.i;break;case 107:b.g=b.h;break;case 108:b.g=b.j;break;case 110:b.g=b.d(I(b));break;case 111:b.g=b.c;break;case 112:b.k(I(b),b.f);break;case 113:b.k(I(b),b.e);break;case 114:b.k(I(b),b.i);
break;case 115:b.k(I(b),b.h);break;case 116:b.k(I(b),b.j);break;case 117:b.k(I(b),b.g);break;case 118:b.ka=f;b.b--;break;case 119:b.k(I(b),b.c);break;case 120:b.c=b.f;break;case 121:b.c=b.e;break;case 122:b.c=b.i;break;case 123:b.c=b.h;break;case 124:b.c=b.j;break;case 125:b.c=b.g;break;case 126:b.c=b.d(I(b));break;case 128:p(b,b.f);break;case 129:p(b,b.e);break;case 130:p(b,b.i);break;case 131:p(b,b.h);break;case 132:p(b,b.j);break;case 133:p(b,b.g);break;case 134:p(b,b.d(I(b)));break;case 135:p(b,
b.c);break;case 136:N(b,b.f);break;case 137:N(b,b.e);break;case 138:N(b,b.i);break;case 139:N(b,b.h);break;case 140:N(b,b.j);break;case 141:N(b,b.g);break;case 142:N(b,b.d(I(b)));break;case 143:N(b,b.c);break;case 144:m(b,b.f);break;case 145:m(b,b.e);break;case 146:m(b,b.i);break;case 147:m(b,b.h);break;case 148:m(b,b.j);break;case 149:m(b,b.g);break;case 150:m(b,b.d(I(b)));break;case 151:m(b,b.c);break;case 152:M(b,b.f);break;case 153:M(b,b.e);break;case 154:M(b,b.i);break;case 155:M(b,b.h);break;
case 156:M(b,b.j);break;case 157:M(b,b.g);break;case 158:M(b,b.d(I(b)));break;case 159:M(b,b.c);break;case 160:b.a=b.l[b.c&=b.f]|16;break;case 161:b.a=b.l[b.c&=b.e]|16;break;case 162:b.a=b.l[b.c&=b.i]|16;break;case 163:b.a=b.l[b.c&=b.h]|16;break;case 164:b.a=b.l[b.c&=b.j]|16;break;case 165:b.a=b.l[b.c&=b.g]|16;break;case 166:b.a=b.l[b.c&=b.d(I(b))]|16;break;case 167:b.a=b.l[b.c]|16;break;case 168:b.a=b.l[b.c^=b.f];break;case 169:b.a=b.l[b.c^=b.e];break;case 170:b.a=b.l[b.c^=b.i];break;case 171:b.a=
b.l[b.c^=b.h];break;case 172:b.a=b.l[b.c^=b.j];break;case 173:b.a=b.l[b.c^=b.g];break;case 174:b.a=b.l[b.c^=b.d(I(b))];break;case 175:b.a=b.l[b.c=0];break;case 176:b.a=b.l[b.c|=b.f];break;case 177:b.a=b.l[b.c|=b.e];break;case 178:b.a=b.l[b.c|=b.i];break;case 179:b.a=b.l[b.c|=b.h];break;case 180:b.a=b.l[b.c|=b.j];break;case 181:b.a=b.l[b.c|=b.g];break;case 182:b.a=b.l[b.c|=b.d(I(b))];break;case 183:b.a=b.l[b.c];break;case 184:L(b,b.f);break;case 185:L(b,b.e);break;case 186:L(b,b.i);break;case 187:L(b,
b.h);break;case 188:L(b,b.j);break;case 189:L(b,b.g);break;case 190:L(b,b.d(I(b)));break;case 191:L(b,b.c);break;case 192:Pa(b,0==(b.a&64));break;case 193:a=b;c=b.t(b.m);a.f=c>>8;a.e=c&255;b.m+=2;break;case 194:Ra(b,0==(b.a&64));break;case 195:b.b=b.t(b.b);break;case 196:b.call(0==(b.a&64));break;case 197:Oa(b,b.f,b.e);break;case 198:p(b,b.d(b.b++));break;case 199:k(b,b.b);b.b=0;break;case 200:Pa(b,0!=(b.a&64));break;case 201:b.b=b.t(b.m);b.m+=2;break;case 202:Ra(b,0!=(b.a&64));break;case 203:a=b;
c=b.d(b.b++);a.n-=xa[c];switch(c){case 0:a.f=O(a,a.f);break;case 1:a.e=O(a,a.e);break;case 2:a.i=O(a,a.i);break;case 3:a.h=O(a,a.h);break;case 4:a.j=O(a,a.j);break;case 5:a.g=O(a,a.g);break;case 6:a.k(I(a),O(a,a.d(I(a))));break;case 7:a.c=O(a,a.c);break;case 8:a.f=P(a,a.f);break;case 9:a.e=P(a,a.e);break;case 10:a.i=P(a,a.i);break;case 11:a.h=P(a,a.h);break;case 12:a.j=P(a,a.j);break;case 13:a.g=P(a,a.g);break;case 14:a.k(I(a),P(a,a.d(I(a))));break;case 15:a.c=P(a,a.c);break;case 16:a.f=Q(a,a.f);
break;case 17:a.e=Q(a,a.e);break;case 18:a.i=Q(a,a.i);break;case 19:a.h=Q(a,a.h);break;case 20:a.j=Q(a,a.j);break;case 21:a.g=Q(a,a.g);break;case 22:a.k(I(a),Q(a,a.d(I(a))));break;case 23:a.c=Q(a,a.c);break;case 24:a.f=R(a,a.f);break;case 25:a.e=R(a,a.e);break;case 26:a.i=R(a,a.i);break;case 27:a.h=R(a,a.h);break;case 28:a.j=R(a,a.j);break;case 29:a.g=R(a,a.g);break;case 30:a.k(I(a),R(a,a.d(I(a))));break;case 31:a.c=R(a,a.c);break;case 32:a.f=S(a,a.f);break;case 33:a.e=S(a,a.e);break;case 34:a.i=
S(a,a.i);break;case 35:a.h=S(a,a.h);break;case 36:a.j=S(a,a.j);break;case 37:a.g=S(a,a.g);break;case 38:a.k(I(a),S(a,a.d(I(a))));break;case 39:a.c=S(a,a.c);break;case 40:a.f=T(a,a.f);break;case 41:a.e=T(a,a.e);break;case 42:a.i=T(a,a.i);break;case 43:a.h=T(a,a.h);break;case 44:a.j=T(a,a.j);break;case 45:a.g=T(a,a.g);break;case 46:a.k(I(a),T(a,a.d(I(a))));break;case 47:a.c=T(a,a.c);break;case 48:a.f=U(a,a.f);break;case 49:a.e=U(a,a.e);break;case 50:a.i=U(a,a.i);break;case 51:a.h=U(a,a.h);break;case 52:a.j=
U(a,a.j);break;case 53:a.g=U(a,a.g);break;case 54:a.k(I(a),U(a,a.d(I(a))));break;case 55:a.c=U(a,a.c);break;case 56:a.f=La(a,a.f);break;case 57:a.e=La(a,a.e);break;case 58:a.i=La(a,a.i);break;case 59:a.h=La(a,a.h);break;case 60:a.j=La(a,a.j);break;case 61:a.g=Q(a,a.g);break;case 62:a.k(I(a),La(a,a.d(I(a))));break;case 63:a.c=La(a,a.c);break;case 64:V(a,a.f&1);break;case 65:V(a,a.e&1);break;case 66:V(a,a.i&1);break;case 67:V(a,a.h&1);break;case 68:V(a,a.j&1);break;case 69:V(a,a.g&1);break;case 70:V(a,
a.d(I(a))&1);break;case 71:V(a,a.c&1);break;case 72:V(a,a.f&2);break;case 73:V(a,a.e&2);break;case 74:V(a,a.i&2);break;case 75:V(a,a.h&2);break;case 76:V(a,a.j&2);break;case 77:V(a,a.g&2);break;case 78:V(a,a.d(I(a))&2);break;case 79:V(a,a.c&2);break;case 80:V(a,a.f&4);break;case 81:V(a,a.e&4);break;case 82:V(a,a.i&4);break;case 83:V(a,a.h&4);break;case 84:V(a,a.j&4);break;case 85:V(a,a.g&4);break;case 86:V(a,a.d(I(a))&4);break;case 87:V(a,a.c&4);break;case 88:V(a,a.f&8);break;case 89:V(a,a.e&8);break;
case 90:V(a,a.i&8);break;case 91:V(a,a.h&8);break;case 92:V(a,a.j&8);break;case 93:V(a,a.g&8);break;case 94:V(a,a.d(I(a))&8);break;case 95:V(a,a.c&8);break;case 96:V(a,a.f&16);break;case 97:V(a,a.e&16);break;case 98:V(a,a.i&16);break;case 99:V(a,a.h&16);break;case 100:V(a,a.j&16);break;case 101:V(a,a.g&16);break;case 102:V(a,a.d(I(a))&16);break;case 103:V(a,a.c&16);break;case 104:V(a,a.f&32);break;case 105:V(a,a.e&32);break;case 106:V(a,a.i&32);break;case 107:V(a,a.h&32);break;case 108:V(a,a.j&32);
break;case 109:V(a,a.g&32);break;case 110:V(a,a.d(I(a))&32);break;case 111:V(a,a.c&32);break;case 112:V(a,a.f&64);break;case 113:V(a,a.e&64);break;case 114:V(a,a.i&64);break;case 115:V(a,a.h&64);break;case 116:V(a,a.j&64);break;case 117:V(a,a.g&64);break;case 118:V(a,a.d(I(a))&64);break;case 119:V(a,a.c&64);break;case 120:V(a,a.f&128);break;case 121:V(a,a.e&128);break;case 122:V(a,a.i&128);break;case 123:V(a,a.h&128);break;case 124:V(a,a.j&128);break;case 125:V(a,a.g&128);break;case 126:V(a,a.d(I(a))&
128);break;case 127:V(a,a.c&128);break;case 128:a.f&=-2;break;case 129:a.e&=-2;break;case 130:a.i&=-2;break;case 131:a.h&=-2;break;case 132:a.j&=-2;break;case 133:a.g&=-2;break;case 134:a.k(I(a),a.d(I(a))&-2);break;case 135:a.c&=-2;break;case 136:a.f&=-3;break;case 137:a.e&=-3;break;case 138:a.i&=-3;break;case 139:a.h&=-3;break;case 140:a.j&=-3;break;case 141:a.g&=-3;break;case 142:a.k(I(a),a.d(I(a))&-3);break;case 143:a.c&=-3;break;case 144:a.f&=-5;break;case 145:a.e&=-5;break;case 146:a.i&=-5;break;
case 147:a.h&=-5;break;case 148:a.j&=-5;break;case 149:a.g&=-5;break;case 150:a.k(I(a),a.d(I(a))&-5);break;case 151:a.c&=-5;break;case 152:a.f&=-9;break;case 153:a.e&=-9;break;case 154:a.i&=-9;break;case 155:a.h&=-9;break;case 156:a.j&=-9;break;case 157:a.g&=-9;break;case 158:a.k(I(a),a.d(I(a))&-9);break;case 159:a.c&=-9;break;case 160:a.f&=-17;break;case 161:a.e&=-17;break;case 162:a.i&=-17;break;case 163:a.h&=-17;break;case 164:a.j&=-17;break;case 165:a.g&=-17;break;case 166:a.k(I(a),a.d(I(a))&
-17);break;case 167:a.c&=-17;break;case 168:a.f&=-33;break;case 169:a.e&=-33;break;case 170:a.i&=-33;break;case 171:a.h&=-33;break;case 172:a.j&=-33;break;case 173:a.g&=-33;break;case 174:a.k(I(a),a.d(I(a))&-33);break;case 175:a.c&=-33;break;case 176:a.f&=-65;break;case 177:a.e&=-65;break;case 178:a.i&=-65;break;case 179:a.h&=-65;break;case 180:a.j&=-65;break;case 181:a.g&=-65;break;case 182:a.k(I(a),a.d(I(a))&-65);break;case 183:a.c&=-65;break;case 184:a.f&=-129;break;case 185:a.e&=-129;break;case 186:a.i&=
-129;break;case 187:a.h&=-129;break;case 188:a.j&=-129;break;case 189:a.g&=-129;break;case 190:a.k(I(a),a.d(I(a))&-129);break;case 191:a.c&=-129;break;case 192:a.f|=1;break;case 193:a.e|=1;break;case 194:a.i|=1;break;case 195:a.h|=1;break;case 196:a.j|=1;break;case 197:a.g|=1;break;case 198:a.k(I(a),a.d(I(a))|1);break;case 199:a.c|=1;break;case 200:a.f|=2;break;case 201:a.e|=2;break;case 202:a.i|=2;break;case 203:a.h|=2;break;case 204:a.j|=2;break;case 205:a.g|=2;break;case 206:a.k(I(a),a.d(I(a))|
2);break;case 207:a.c|=2;break;case 208:a.f|=4;break;case 209:a.e|=4;break;case 210:a.i|=4;break;case 211:a.h|=4;break;case 212:a.j|=4;break;case 213:a.g|=4;break;case 214:a.k(I(a),a.d(I(a))|4);break;case 215:a.c|=4;break;case 216:a.f|=8;break;case 217:a.e|=8;break;case 218:a.i|=8;break;case 219:a.h|=8;break;case 220:a.j|=8;break;case 221:a.g|=8;break;case 222:a.k(I(a),a.d(I(a))|8);break;case 223:a.c|=8;break;case 224:a.f|=16;break;case 225:a.e|=16;break;case 226:a.i|=16;break;case 227:a.h|=16;break;
case 228:a.j|=16;break;case 229:a.g|=16;break;case 230:a.k(I(a),a.d(I(a))|16);break;case 231:a.c|=16;break;case 232:a.f|=32;break;case 233:a.e|=32;break;case 234:a.i|=32;break;case 235:a.h|=32;break;case 236:a.j|=32;break;case 237:a.g|=32;break;case 238:a.k(I(a),a.d(I(a))|32);break;case 239:a.c|=32;break;case 240:a.f|=64;break;case 241:a.e|=64;break;case 242:a.i|=64;break;case 243:a.h|=64;break;case 244:a.j|=64;break;case 245:a.g|=64;break;case 246:a.k(I(a),a.d(I(a))|64);break;case 247:a.c|=64;break;
case 248:a.f|=128;break;case 249:a.e|=128;break;case 250:a.i|=128;break;case 251:a.h|=128;break;case 252:a.j|=128;break;case 253:a.g|=128;break;case 254:a.k(I(a),a.d(I(a))|128);break;case 255:a.c|=128}break;case 204:b.call(0!=(b.a&64));break;case 205:k(b,b.b+2);b.b=b.t(b.b);break;case 206:N(b,b.d(b.b++));break;case 207:k(b,b.b);b.b=8;break;case 208:Pa(b,0==(b.a&1));break;case 209:a=b;c=b.t(b.m);a.i=c>>8;a.h=c&255;b.m+=2;break;case 210:Ra(b,0==(b.a&1));break;case 211:W(b.port,b.d(b.b++),b.c);break;
case 212:b.call(0==(b.a&1));break;case 213:Oa(b,b.i,b.h);break;case 214:m(b,b.d(b.b++));break;case 215:k(b,b.b);b.b=16;break;case 216:Pa(b,0!=(b.a&1));break;case 217:a=b;c=a.f;a.f=a.Xa;a.Xa=c;c=a.e;a.e=a.Za;a.Za=c;a=b;c=a.i;a.i=a.ab;a.ab=c;c=a.h;a.h=a.bb;a.bb=c;a=b;c=a.j;a.j=a.eb;a.eb=c;c=a.g;a.g=a.gb;a.gb=c;break;case 218:Ra(b,0!=(b.a&1));break;case 219:b.c=X(b.port,b.d(b.b++));break;case 220:b.call(0!=(b.a&1));break;case 221:a=b;var c=b.d(b.b++),e=0,e=0;a.n-=ya[c];switch(c){case 9:Ia(a,v(a,H(a),
K(a)));break;case 25:Ia(a,v(a,H(a),J(a)));break;case 33:Ia(a,a.t(a.b));a.b+=2;break;case 34:e=a.t(a.b);a.k(e++,a.p);a.k(e,a.r);a.b+=2;break;case 35:a.p=a.p+1&255;0==a.p&&(a.r=a.r+1&255);break;case 36:a.r=z(a,a.r);break;case 37:a.r=w(a,a.r);break;case 38:a.r=a.d(a.b++);break;case 41:Ia(a,v(a,H(a),H(a)));break;case 42:e=a.t(a.b);a.p=a.d(e);a.r=a.d(++e);a.b+=2;break;case 43:a.p=a.p-1&255;255==a.p&&(a.r=a.r-1&255);break;case 44:a.p=z(a,a.p);break;case 45:a.p=w(a,a.p);break;case 46:a.p=a.d(a.b++);break;
case 52:Na(a,H(a)+q(a));a.b++;break;case 53:Ma(a,H(a)+q(a));a.b++;break;case 54:a.k(H(a)+q(a),a.d(++a.b));a.b++;break;case 57:Ia(a,v(a,H(a),a.m));break;case 68:a.f=a.r;break;case 69:a.f=a.p;break;case 70:a.f=a.d(H(a)+q(a));a.b++;break;case 76:a.e=a.r;break;case 77:a.e=a.p;break;case 78:a.e=a.d(H(a)+q(a));a.b++;break;case 84:a.i=a.r;break;case 85:a.i=a.p;break;case 86:a.i=a.d(H(a)+q(a));a.b++;break;case 92:a.h=a.r;break;case 93:a.h=a.p;break;case 94:a.h=a.d(H(a)+q(a));a.b++;break;case 96:a.r=a.f;break;
case 97:a.r=a.e;break;case 98:a.r=a.i;break;case 99:a.r=a.h;break;case 100:break;case 101:a.r=a.p;break;case 102:a.j=a.d(H(a)+q(a));a.b++;break;case 103:a.r=a.c;break;case 104:a.p=a.f;break;case 105:a.p=a.e;break;case 106:a.p=a.i;break;case 107:a.p=a.h;break;case 108:a.p=a.r;break;case 109:break;case 110:a.g=a.d(H(a)+q(a));a.b++;break;case 111:a.p=a.c;break;case 112:a.k(H(a)+q(a),a.f);a.b++;break;case 113:a.k(H(a)+q(a),a.e);a.b++;break;case 114:a.k(H(a)+q(a),a.i);a.b++;break;case 115:a.k(H(a)+q(a),
a.h);a.b++;break;case 116:a.k(H(a)+q(a),a.j);a.b++;break;case 117:a.k(H(a)+q(a),a.g);a.b++;break;case 119:a.k(H(a)+q(a),a.c);a.b++;break;case 124:a.c=a.r;break;case 125:a.c=a.p;break;case 126:a.c=a.d(H(a)+q(a));a.b++;break;case 132:p(a,a.r);break;case 133:p(a,a.p);break;case 134:p(a,a.d(H(a)+q(a)));a.b++;break;case 140:N(a,a.r);break;case 141:N(a,a.p);break;case 142:N(a,a.d(H(a)+q(a)));a.b++;break;case 148:m(a,a.r);break;case 149:m(a,a.p);break;case 150:m(a,a.d(H(a)+q(a)));a.b++;break;case 156:M(a,
a.r);break;case 157:M(a,a.p);break;case 158:M(a,a.d(H(a)+q(a)));a.b++;break;case 164:a.a=a.l[a.c&=a.r]|16;break;case 165:a.a=a.l[a.c&=a.p]|16;break;case 166:a.a=a.l[a.c&=a.d(H(a)+q(a))]|16;a.b++;break;case 172:a.a=a.l[a.c^=a.r];break;case 173:a.a=a.l[a.c^=a.p];break;case 174:a.a=a.l[a.c^=a.d(H(a)+q(a))];a.b++;break;case 180:a.a=a.l[a.c|=a.r];break;case 181:a.a=a.l[a.c|=a.p];break;case 182:a.a=a.l[a.c|=a.d(H(a)+q(a))];a.b++;break;case 188:L(a,a.r);break;case 189:L(a,a.p);break;case 190:L(a,a.d(H(a)+
q(a)));a.b++;break;case 203:Ka(a,H(a));break;case 225:Ia(a,a.t(a.m));a.m+=2;break;case 227:e=H(a);Ia(a,a.t(a.m));a.k(a.m,e&255);a.k(a.m+1,e>>8);break;case 229:Oa(a,a.r,a.p);break;case 233:a.b=H(a);break;case 249:a.m=H(a);break;default:a.b--}break;case 222:M(b,b.d(b.b++));break;case 223:k(b,b.b);b.b=24;break;case 224:Pa(b,0==(b.a&4));break;case 225:Ja(b,b.t(b.m));b.m+=2;break;case 226:Ra(b,0==(b.a&4));break;case 227:c=b.j;b.j=b.d(b.m+1);b.k(b.m+1,c);c=b.g;b.g=b.d(b.m);b.k(b.m,c);break;case 228:b.call(0==
(b.a&4));break;case 229:Oa(b,b.j,b.g);break;case 230:b.a=b.l[b.c&=b.d(b.b++)]|16;break;case 231:k(b,b.b);b.b=32;break;case 232:Pa(b,0!=(b.a&4));break;case 233:b.b=I(b);break;case 234:Ra(b,0!=(b.a&4));break;case 235:c=b.i;b.i=b.j;b.j=c;c=b.h;b.h=b.g;b.g=c;break;case 236:b.call(0!=(b.a&4));break;case 237:a=b;var c=b.d(b.b),g=e=e=0;a.n-=Aa[c];switch(c){case 64:a.f=X(a.port,a.e);a.a=a.a&1|a.l[a.f];a.b++;break;case 65:W(a.port,a.e,a.f);a.b++;break;case 66:Ca(a,K(a));a.b++;break;case 67:e=a.t(a.b+1);a.k(e++,
a.e);a.k(e,a.f);a.b+=3;break;case 68:case 76:case 84:case 92:case 100:case 108:case 116:case 124:e=a.c;a.c=0;m(a,e);a.b++;break;case 69:case 77:case 85:case 93:case 101:case 109:case 117:case 125:a.b=a.t(a.m);a.m+=2;a.R=a.S;break;case 70:case 78:case 102:case 110:a.ua=0;a.b++;break;case 71:a.Na=a.c;a.b++;break;case 72:a.e=X(a.port,a.e);a.a=a.a&1|a.l[a.e];a.b++;break;case 73:W(a.port,a.e,a.e);a.b++;break;case 74:Da(a,K(a));a.b++;break;case 75:e=a.t(a.b+1);a.e=a.d(e++);a.f=a.d(e);a.b+=3;break;case 79:a.yb=
a.c;a.b++;break;case 80:a.i=X(a.port,a.e);a.a=a.a&1|a.l[a.i];a.b++;break;case 81:W(a.port,a.e,a.i);a.b++;break;case 82:Ca(a,J(a));a.b++;break;case 83:e=a.t(a.b+1);a.k(e++,a.h);a.k(e,a.i);a.b+=3;break;case 86:case 118:a.ua=1;a.b++;break;case 87:a.c=a.Na;a.a=a.a&1|a.Va[a.c]|(a.S?4:0);a.b++;break;case 88:a.h=X(a.port,a.e);a.a=a.a&1|a.l[a.h];a.b++;break;case 89:W(a.port,a.e,a.h);a.b++;break;case 90:Da(a,J(a));a.b++;break;case 91:e=a.t(a.b+1);a.h=a.d(e++);a.i=a.d(e);a.b+=3;break;case 95:a.c=Math.round(255*
Math.random());a.a=a.a&1|a.Va[a.c]|(a.S?4:0);a.b++;break;case 96:a.j=X(a.port,a.e);a.a=a.a&1|a.l[a.j];a.b++;break;case 97:W(a.port,a.e,a.j);a.b++;break;case 98:Ca(a,I(a));a.b++;break;case 99:e=a.t(a.b+1);a.k(e++,a.g);a.k(e,a.j);a.b+=3;break;case 103:e=I(a);g=a.d(e);a.k(e,g>>4|(a.c&15)<<4);a.c=a.c&240|g&15;a.a=a.a&1|a.l[a.c];a.b++;break;case 104:a.g=X(a.port,a.e);a.a=a.a&1|a.l[a.g];a.b++;break;case 105:W(a.port,a.e,a.g);a.b++;break;case 106:Da(a,I(a));a.b++;break;case 107:e=a.t(a.b+1);a.g=a.d(e++);
a.j=a.d(e);a.b+=3;break;case 111:e=I(a);g=a.d(e);a.k(e,(g&15)<<4|a.c&15);a.c=a.c&240|g>>4;a.a=a.a&1|a.l[a.c];a.b++;break;case 113:W(a.port,a.e,0);a.b++;break;case 114:Ca(a,a.m);a.b++;break;case 115:e=a.t(a.b+1);a.k(e++,a.m&255);a.k(e,a.m>>8);a.b+=3;break;case 120:a.c=X(a.port,a.e);a.a=a.a&1|a.l[a.c];a.b++;break;case 121:W(a.port,a.e,a.c);a.b++;break;case 122:Da(a,a.m);a.b++;break;case 123:a.m=a.t(a.t(a.b+1));a.b+=3;break;case 160:a.k(J(a),a.d(I(a)));Fa(a);D(a);C(a);a.a=a.a&193|(0!=K(a)?4:0);a.b++;
break;case 161:e=a.a&1|2;L(a,a.d(I(a)));D(a);C(a);e|=0==K(a)?0:4;a.a=a.a&248|e;a.b++;break;case 162:e=X(a.port,a.e);a.k(I(a),e);a.f=w(a,a.f);D(a);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 163:e=a.d(I(a));W(a.port,a.e,e);D(a);a.f=w(a,a.f);255<a.g+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 168:a.k(J(a),a.d(I(a)));Ea(a);A(a);C(a);a.a=a.a&193|(0!=K(a)?4:0);a.b++;break;case 169:e=a.a&1|2;L(a,a.d(I(a)));A(a);C(a);e|=0==K(a)?0:4;a.a=a.a&248|e;a.b++;break;case 170:e=
X(a.port,a.e);a.k(I(a),e);a.f=w(a,a.f);A(a);a.a=0!=(e&128)?a.a|2:a.a&-3;a.b++;break;case 171:e=a.d(I(a));W(a.port,a.e,e);A(a);a.f=w(a,a.f);255<a.g+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=128==(e&128)?a.a|2:a.a&-3;a.b++;break;case 176:a.k(J(a),a.d(I(a)));Fa(a);D(a);C(a);0!=K(a)?(a.a|=4,a.n-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 177:e=a.a&1|2;L(a,a.d(I(a)));D(a);C(a);e|=0==K(a)?0:4;0!=(e&4)&&0==(a.a&64)?(a.n-=5,a.b--):a.b++;a.a=a.a&248|e;break;case 178:e=X(a.port,a.e);a.k(I(a),e);a.f=
w(a,a.f);D(a);0!=a.f?(a.n-=5,a.b--):a.b++;a.a=128==(e&128)?a.a|2:a.a&-3;break;case 179:e=a.d(I(a));W(a.port,a.e,e);a.f=w(a,a.f);D(a);0!=a.f?(a.n-=5,a.b--):a.b++;255<a.g+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(e&128)?a.a|2:a.a&-3;break;case 184:a.k(J(a),a.d(I(a)));Ea(a);A(a);C(a);0!=K(a)?(a.a|=4,a.n-=5,a.b--):(a.a&=-5,a.b++);a.a&=-3;a.a&=-17;break;case 185:e=a.a&1|2;L(a,a.d(I(a)));A(a);C(a);e|=0==K(a)?0:4;0!=(e&4)&&0==(a.a&64)?(a.n-=5,a.b--):a.b++;a.a=a.a&248|e;break;case 186:e=X(a.port,a.e);
a.k(I(a),e);a.f=w(a,a.f);A(a);0!=a.f?(a.n-=5,a.b--):a.b++;a.a=0!=(e&128)?a.a|2:a.a&-3;break;case 187:e=a.d(I(a));W(a.port,a.e,e);a.f=w(a,a.f);A(a);0!=a.f?(a.n-=5,a.b--):a.b++;255<a.g+e?(a.a|=1,a.a|=16):(a.a&=-2,a.a&=-17);a.a=0!=(e&128)?a.a|2:a.a&-3;break;default:a.b++}break;case 238:b.a=b.l[b.c^=b.d(b.b++)];break;case 239:k(b,b.b);b.b=40;break;case 240:Pa(b,0==(b.a&128));break;case 241:b.a=b.d(b.m++);b.c=b.d(b.m++);break;case 242:Ra(b,0==(b.a&128));break;case 243:b.R=b.S=h;b.qa=f;break;case 244:b.call(0==
(b.a&128));break;case 245:Oa(b,b.c,b.a);break;case 246:b.a=b.l[b.c|=b.d(b.b++)];break;case 247:k(b,b.b);b.b=48;break;case 248:Pa(b,0!=(b.a&128));break;case 249:b.m=I(b);break;case 250:Ra(b,0!=(b.a&128));break;case 251:b.R=b.S=b.qa=f;break;case 252:b.call(0!=(b.a&128));break;case 253:a=b;c=b.d(b.b++);e=e=void 0;a.n-=ya[c];switch(c){case 9:Ha(a,v(a,E(a),K(a)));break;case 25:Ha(a,v(a,E(a),J(a)));break;case 33:Ha(a,a.t(a.b));a.b+=2;break;case 34:e=a.t(a.b);a.k(e++,a.q);a.k(e,a.s);a.b+=2;break;case 35:a.q=
a.q+1&255;0==a.q&&(a.s=a.s+1&255);break;case 36:a.s=z(a,a.s);break;case 37:a.s=w(a,a.s);break;case 38:a.s=a.d(a.b++);break;case 41:Ha(a,v(a,E(a),E(a)));break;case 42:e=a.t(a.b);a.q=a.d(e);a.s=a.d(++e);a.b+=2;break;case 43:a.q=a.q-1&255;255==a.q&&(a.s=a.s-1&255);break;case 44:a.q=z(a,a.q);break;case 45:a.q=w(a,a.q);break;case 46:a.q=a.d(a.b++);break;case 52:Na(a,E(a)+q(a));a.b++;break;case 53:Ma(a,E(a)+q(a));a.b++;break;case 54:a.k(E(a)+q(a),a.d(++a.b));a.b++;break;case 57:Ha(a,v(a,E(a),a.m));break;
case 68:a.f=a.s;break;case 69:a.f=a.q;break;case 70:a.f=a.d(E(a)+q(a));a.b++;break;case 76:a.e=a.s;break;case 77:a.e=a.q;break;case 78:a.e=a.d(E(a)+q(a));a.b++;break;case 84:a.i=a.s;break;case 85:a.i=a.q;break;case 86:a.i=a.d(E(a)+q(a));a.b++;break;case 92:a.h=a.s;break;case 93:a.h=a.q;break;case 94:a.h=a.d(E(a)+q(a));a.b++;break;case 96:a.s=a.f;break;case 97:a.s=a.e;break;case 98:a.s=a.i;break;case 99:a.s=a.h;break;case 100:break;case 101:a.s=a.q;break;case 102:a.j=a.d(E(a)+q(a));a.b++;break;case 103:a.s=
a.c;break;case 104:a.q=a.f;break;case 105:a.q=a.e;break;case 106:a.q=a.i;break;case 107:a.q=a.h;break;case 108:a.q=a.s;break;case 109:break;case 110:a.g=a.d(E(a)+q(a));a.b++;break;case 111:a.q=a.c;break;case 112:a.k(E(a)+q(a),a.f);a.b++;break;case 113:a.k(E(a)+q(a),a.e);a.b++;break;case 114:a.k(E(a)+q(a),a.i);a.b++;break;case 115:a.k(E(a)+q(a),a.h);a.b++;break;case 116:a.k(E(a)+q(a),a.j);a.b++;break;case 117:a.k(E(a)+q(a),a.g);a.b++;break;case 119:a.k(E(a)+q(a),a.c);a.b++;break;case 124:a.c=a.s;break;
case 125:a.c=a.q;break;case 126:a.c=a.d(E(a)+q(a));a.b++;break;case 132:p(a,a.s);break;case 133:p(a,a.q);break;case 134:p(a,a.d(E(a)+q(a)));a.b++;break;case 140:N(a,a.s);break;case 141:N(a,a.q);break;case 142:N(a,a.d(E(a)+q(a)));a.b++;break;case 148:m(a,a.s);break;case 149:m(a,a.q);break;case 150:m(a,a.d(E(a)+q(a)));a.b++;break;case 156:M(a,a.s);break;case 157:M(a,a.q);break;case 158:M(a,a.d(E(a)+q(a)));a.b++;break;case 164:a.a=a.l[a.c&=a.s]|16;break;case 165:a.a=a.l[a.c&=a.q]|16;break;case 166:a.a=
a.l[a.c&=a.d(E(a)+q(a))]|16;a.b++;break;case 172:a.a=a.l[a.c^=a.s];break;case 173:a.a=a.l[a.c^=a.q];break;case 174:a.a=a.l[a.c^=a.d(E(a)+q(a))];a.b++;break;case 180:a.a=a.l[a.c|=a.s];break;case 181:a.a=a.l[a.c|=a.q];break;case 182:a.a=a.l[a.c|=a.d(E(a)+q(a))];a.b++;break;case 188:L(a,a.s);break;case 189:L(a,a.q);break;case 190:L(a,a.d(E(a)+q(a)));a.b++;break;case 203:Ka(a,E(a));break;case 225:Ha(a,a.t(a.m));a.m+=2;break;case 227:e=E(a);Ha(a,a.t(a.m));a.k(a.m,e&255);a.k(a.m+1,e>>8);break;case 229:Oa(a,
a.s,a.q);break;case 233:a.b=E(a);break;case 249:a.m=E(a);break;default:a.b--}break;case 254:L(b,b.d(b.b++));break;case 255:k(b,b.b),b.b=56}};function fa(b){this.o=b;this.Pb=this.Ob=this.ja=this.v=this.w=0;this.Nb=this.Mb=h}
fa.prototype={reset:function(){this.ja=this.v=this.w=255;this.Pa=h},keydown:function(b){switch(b.keyCode){case 38:this.w&=-2;break;case 40:this.w&=-3;break;case 37:this.w&=-5;break;case 39:this.w&=-9;break;case 88:this.w&=-17;break;case 90:this.w&=-33;break;case 13:this.o.ba?this.o.Pa=f:this.ja&=-129;break;case 104:this.v&=-2;break;case 98:this.v&=-3;break;case 100:this.v&=-5;break;case 102:this.v&=-9;break;case 103:this.v&=-17;break;case 105:this.v&=-33;break;case 97:this.v&=-65;break;default:return}b.preventDefault()},
keyup:function(b){switch(b.keyCode){case 38:this.w|=1;break;case 40:this.w|=2;break;case 37:this.w|=4;break;case 39:this.w|=8;break;case 88:this.w|=16;break;case 90:this.w|=32;break;case 13:this.o.ba||(this.ja|=128);break;case 104:this.v|=1;break;case 98:this.v|=2;break;case 100:this.v|=4;break;case 102:this.v|=8;break;case 103:this.v|=16;break;case 105:this.v|=32;break;case 97:this.v|=64;break;default:return}b.preventDefault()}};var la=Number.MIN_VALUE,Sa=[25,20,16,13,10,8,6,5,4,3,3,2,2,1,1,0];function ha(b){this.o=b;this.P=this.rb=0;this.H=Array(8);this.J=0;this.F=Array(4);this.M=Array(4);this.ia=Array(3);this.oa=16;this.Y=32768;this.pa=Array(4)}
ha.prototype={write:function(b){0!=(b&128)?(this.J=b>>4&7,this.H[this.J]=this.H[this.J]&1008|b&15):this.H[this.J]=0==this.J||2==this.J||4==this.J?this.H[this.J]&15|(b&63)<<4:b&15;switch(this.J){case 0:case 2:case 4:0==this.H[this.J]&&(this.H[this.J]=1);break;case 6:this.oa=16<<(this.H[6]&3),this.Y=32768}},update:function(b,a){for(var d=[],c=0,e=0;c<a;c++){for(e=0;3>e;e++)this.pa[e]=this.ia[e]!=la?Sa[this.H[(e<<1)+1]]*this.ia[e]>>8:Sa[this.H[(e<<1)+1]]*this.M[e];this.pa[3]=Sa[this.H[7]]*(this.Y&1)<<
1;e=this.pa[0]+this.pa[1]+this.pa[2]+this.pa[3];127<e?e=127:-128>e&&(e=-128);d[b+c]=e;this.P+=this.rb;var g=this.P>>8,j=g<<8;this.P-=j;this.F[0]-=g;this.F[1]-=g;this.F[2]-=g;this.F[3]=128==this.oa?this.F[2]:this.F[3]-g;for(e=0;3>e;e++){var n=this.F[e];if(0>=n){var r=this.H[e<<1];6<r?(this.ia[e]=(j-this.P+512*n<<8)*this.M[e]/(j+this.P),this.M[e]=-this.M[e]):(this.M[e]=1,this.ia[e]=la);this.F[e]+=r*(g/r+1)}else this.ia[e]=la}0>=this.F[3]&&(this.M[3]=-this.M[3],128!=this.oa&&(this.F[3]+=this.oa*(g/this.oa+
1)),1==this.M[3]&&(e=0,e=0!=(this.H[6]&4)?0!=(this.Y&9)&&0!=(this.Y&9^9)?1:0:this.Y&1,this.Y=this.Y>>1|e<<15))}return d}};function ga(b){this.o=b;var a;this.ob=0;this.G=Array(16384);this.u=Array(96);for(a=0;96>a;a++)this.u[a]=255;this.z=Array(16);this.status=0;this.$=h;this.ta=this.la=this.Qa=this.za=this.location=this.Q=0;this.ra=Array(256);this.fa=Array(256);this.nb=this.Ya=0;this.display=b.Ca.Ia.data;this.Oa=Array(64);this.Da=Array(256);this.Ea=Array(16);this.wa=h;this.L=this.fb=this.Ma=0;this.U=h;this.ma=Array(192);for(a=0;192>a;a++)this.ma[a]=Array(25);this.Ua=Array(512);this.ya=Array(512);for(b=this.ca=this.na=
0;512>b;b++)this.Ua[b]=Array(64)}
ga.prototype={reset:function(){var b;this.wa=h;var a,d,c;if(this.o.ba&&!this.wa)for(b=0;64>b;b++)a=b&3,d=b>>2&3,c=b>>4&3,this.Oa[b]=85*a|85*d<<8|85*c<<16,this.wa=f;else if(this.o.V&&!this.wa){for(b=0;256>b;b++)d=b&15,c=b>>4&15,this.Da[b]=c<<12|c<<8|d<<4|d;for(b=0;16>b;b++)this.Ea[b]=b<<20;this.wa=f}this.$=f;for(b=this.za=this.status=this.ta=this.location=0;16>b;b++)this.z[b]=0;this.z[2]=14;this.z[5]=126;this.nb=0;this.o.I.T=h;this.U=f;this.na=512;this.ca=-1;for(b=0;16384>b;b++)this.G[b]=0;for(b=0;196608>
b;b++)this.display[b]=255}};function Ta(b){b.Ya=(b.z[2]&14)<<10;b.na=0;b.ca=511;for(var a=0,d=b.ya.length;a<d;a++)b.ya[a]=f;b.L=(b.z[5]&-130)<<7;b.U=f};function ea(b){this.o=b;this.enable=ba();this.updateStatus=ba();this.Kb=ba();this.Db=ba()}
"undefined"!=typeof $&&($.fn.Eb=function(b){function a(a){this.o=a;var e=this;a=$("<div></div>");var g=$('<div class="controls"></div>'),j=va(["fullscreenEnabled","mozFullScreenEnabled","webkitCancelFullScreen"]),n;this.pb=h;this.wb=va(["hidden","mozHidden","webkitHidden","msHidden"]);this.screen=$('<canvas width=256 height=192 class="screen"></canvas>');this.sa=this.screen[0].getContext("2d");if(this.sa.getImageData){this.Ia=this.sa.getImageData(0,0,256,192);this.Ib();this.Ab=$("<div></div>");this.ea=
$("<select></select>");this.ea.change(function(){e.ib()});this.D={start:$('<input type="button" value="Stop" class="btn" disabled="disabled">'),zb:$('<input type="button" value="Restart" class="btn" disabled="disabled">'),mb:$('<input type="button" value="Enable sound" class="btn" disabled="disabled">'),zoom:$('<input type="button" value="Zoom in" class="btn">')};this.D.start.click(function(){e.o.xa?(e.o.stop(),e.updateStatus("Paused"),e.D.start.attr("value","Start")):(e.o.start(),e.D.start.attr("value",
"Stop"))});this.D.zb.click(function(){""!=e.o.kb&&""!=e.o.lb&&pa(e.o,e.o.kb,e.o.lb)?(e.o.reset(),Ta(e.o.B),e.o.start()):$(this).attr("disabled","disabled")});this.D.mb.click(ba());this.D.zoom.click(function(){e.pb?(e.screen.animate({width:"256px",height:"192px"},function(){$(this).removeAttr("style")}),e.D.zoom.attr("value","Zoom in")):(e.screen.animate({width:"512px",height:"384px"}),e.D.zoom.attr("value","Zoom out"));e.pb=!e.pb});j&&(this.D.Lb=$('<input type="button" value="Go fullscreen" class="btn">').click(function(){var a=
e.screen[0];a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}));for(n in this.D)this.D.hasOwnProperty(n)&&this.D[n].appendTo(g);this.log=$('<div id="status"></div>');this.screen.appendTo(a);this.Ab.appendTo(a);g.appendTo(a);this.log.appendTo(a);a.appendTo($(d));"undefined"!=typeof b&&this.Jb(b);$(document).bind("keydown",function(a){e.o.W.keydown(a)}).bind("keyup",function(a){e.o.W.keyup(a)})}else $(d).html('<div class="alert-message error"><p><strong>Oh no!</strong> Your browser doesn\'t support writing pixels directly to the <code>&lt;canvas&gt;</code> tag. Try the latest versions of Firefox, Google Chrome, Opera or Safari!</p></div>')}
var d=this;a.prototype={reset:function(){this.screen[0].width=256;this.screen[0].height=192;this.log.text("")},Ib:function(){this.sa.fillStyle="black";this.sa.fillRect(0,0,256,192);for(var a=3;a<=this.Ia.data.length-3;a+=4)this.Ia.data[a]=255},Jb:function(a){var b,d,j,n,r=0;this.ea.children().remove();$("<option>Select a ROM...</option>").appendTo(this.ea);for(b in a){if(a.hasOwnProperty(b)){d=$("<optgroup></optgroup>").attr("label",b);j=a[b].length;for(n=0;n<j;n++)$("<option>"+a[b][n][0]+"</option>").attr("value",
a[b][n][1]).appendTo(d);d.appendTo(this.ea)}r++}r&&this.ea.appendTo(this.Ab)},ib:function(){var a=this;this.updateStatus("Downloading...");$.ajax({url:escape(this.ea.val()),xhr:function(){var b=$.ajaxSettings.xhr();"undefined"!=typeof b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined");return a.xhr=b},complete:function(b,d){var j;"error"==d?a.updateStatus("The selected rom could not be loaded."):(j=b.responseText,pa(a.o,j,a.ea.val()),a.o.reset(),Ta(a.o.B),a.o.start(),a.enable(),
a.D.start.removeAttr("disabled"))}})},enable:function(){this.D.zb.removeAttr("disabled");this.o.Sa?this.D.mb.attr("value","Disable sound"):this.D.mb.attr("value","Enable sound")},updateStatus:function(a){this.log.text(a)},Kb:ba(),Db:function(){(!this.wb||!document[this.wb])&&this.sa.putImageData(this.Ia,0,0)}};return a});var Ua=0,Va=["ms","moz","webkit","o"],Wa;
for(Wa=0;Wa<Va.length&&!window.requestAnimationFrame;++Wa)window.requestAnimationFrame=window[Va[Wa]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Va[Wa]+"CancelAnimationFrame"]||window[Va[Wa]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var a=qa(),d=Math.max(0,16-(a-Ua)),c=window.setTimeout(function(){b(a+d)},d);Ua=a+d;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)});function ia(b){this.o=b;this.B=b.B;this.Aa=b.Aa;this.W=b.W;this.ub=64;this.Hb=0;this.N=[]}ia.prototype={reset:function(){this.N=Array(2)}};
function X(b,a){if(b.o.V&&7>a)switch(a){case 0:return b.W.ja&191|b.ub;case 1:case 2:case 3:case 4:case 5:return 0;case 6:return 255}switch(a&193){case 64:var d;a:{d=b.B;if(0==d.ob){if(218<d.la){d=d.la-6;break a}}else if(242<d.la){d=d.la-57;break a}d=d.la}return d;case 65:return b.Hb;case 128:d=b.B;d.$=f;var c=d.Qa;d.Qa=d.G[d.location++&16383]&255;return c;case 129:return d=b.B,d.$=f,c=d.status,d.status=0,d.o.I.T=h,c;case 192:return b.W.w;case 193:return b.W.v&63|b.N[0]|b.N[1]}return 255}
function W(b,a,d){if(!(b.o.V&&7>a))switch(a&193){case 1:b.N[0]=(d&32)<<1;b.N[1]=d&128;0==b.ub&&(b.N[0]=~b.N[0],b.N[1]=~b.N[1]);break;case 128:b=b.B;a=0;b.$=f;switch(b.za){case 0:case 1:case 2:a=b.location&16383;if(d!=(b.G[a]&255)){if(a>=b.L&&a<b.L+64)b.U=f;else if(a>=b.L+128&&a<b.L+256)b.U=f;else{var c=a>>5;b.ya[c]=f;c<b.na&&(b.na=c);c>b.ca&&(b.ca=c)}b.G[a]=d}break;case 3:b.o.ba?(a=3*(b.location&31),b.u[a]=b.Oa[d&63]&255,b.u[a+1]=b.Oa[d&63]>>8&255,b.u[a+2]=b.Oa[d&63]>>16&255):b.o.V&&(a=3*((b.location&
63)>>1),0==(b.location&1)?(b.u[a]=b.Da[d]&255,b.u[a+1]=b.Da[d]>>8&255,b.u[a+2]=b.Da[d]>>16&255):(b.u[a]|=b.Ea[d&15]&255,b.u[a+1]|=b.Ea[d&15]>>8&255,b.u[a+2]|=b.Ea[d&15]>>8&255))}b.Qa=d;b.location++;break;case 129:b=b.B;if(b.$)b.$=h,b.Q=d,b.location=b.location&16128|d;else if(b.$=f,b.za=d>>6&3,b.location=b.Q|d<<8,0==b.za)b.Qa=b.G[b.location++&16383]&255;else if(2==b.za){d&=15;switch(d){case 0:0!=(b.status&4)&&(b.o.I.T=0!=(b.Q&16));break;case 1:0!=(b.status&128)&&0!=(b.Q&32)&&(b.o.I.T=f);(b.Q&3)!=(b.z[d]&
3)&&(b.U=f);break;case 2:b.Ya=(b.Q&14)<<10;break;case 5:a=b.L,b.L=(b.Q&-130)<<7,a!=b.L&&(b.U=f)}b.z[d]=b.Q}break;case 64:case 65:b.o.Sa&&b.Aa.write(d)}};window.JSSMS=da;jQuery.fn.JSSMSUI=jQuery.fn.Eb;
